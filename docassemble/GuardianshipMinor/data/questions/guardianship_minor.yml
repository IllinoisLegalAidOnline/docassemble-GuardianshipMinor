metadata:
  title: Guardianship of a minor
  short title: Guardianship of a minor
  comment: This program helps you ask the court to become a legal guardian of a minor.
  authors:
    - Matt Newsted
---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ILAO:ilao-interview-framework.yml
  - docassemble.ILAO:shared-basic-questions.yml
---
objects:
  - users: ALPeopleList.using(there_are_any=True)
  - users[i].felony_convictions: DAList.using(object_type=Thing, complete_attribute='complete', there_are_any=True)
  - child: ALIndividual
  - parents: ALPeopleList
  - parents[i].jail_delivery_address: ALAddress
  - other_cases: DAList.using(object_type=Thing, complete_attribute='complete', there_are_any=True)  
  - caregivers: ALPeopleList.using(there_are_any=True, complete_attribute='complete')
  - caregivers[i].jail_delivery_address: ALAddress
  - spouse: ALIndividual
  - spouse.jail_delivery_address: ALAddress
  - adult_relatives: ALPeopleList.using(complete_attribute='complete')
  - adult_relatives[i].jail_delivery_address: ALAddress
  - notice_parties: ALPeopleList.using(there_are_any=True)
  - court_list: ALCourtLoader.using(file_name='docassemble.ILAO:data/sources/il_courts.xlsx')
---
code: |
  al_form_type = 'existing_case'
  ilao_easy_form_title = "Guardianship of a minor"
  ilao_easy_form_url = "https://www.illinoislegalaid.org/legal-information/guardianship-minor"
  form_name = "Petition for Guardianship of a Minor"
  github_user = 'IllinoisLegalAidOnline'
  github_repo_name = 'docassemble-GuardianshipMinor'
  allowed_courts = ['Circuit']
---
# Road map
sections:
  - section_intro: Start
  - section_child: Child
  - section_family: Child's parents, caregivers, and relatives
  - section_guardian: Guardian
  - section_filing: Filing, notice, and delivery
  - section_download: Download  
---
# interview order block
mandatory: True
code: |
  nav.set_section('section_intro')
  sees_nav_bar
  snapshot_start
  how_to_use
  set_progress(5)
  basic_info
  whats_next
  accept_terms
  if not user_qualified:
    ineligible_guardian

  set_progress(25)  
  nav.set_section('section_child')
  child.name.first
  if child.age_in_years() >= 18:
    child_too_old
  if child.address.state != 'IL':
    child_outside_illinois
  previous_standby
  current_stg
  named_in_will
  immigration_separation
  guardianship_type
  child_estate

  set_progress(50)
  nav.set_section('section_family')
  if has_legal_parent:
    parents[0].name.first
    parents[0].agrees
    if has_another_parent:
      parents[1].name.first
      parents[1].agrees
  if other_case_involving_parents:
    other_cases.gather()
  caregivers.gather()
  if minor_is_married:
    spouse.name.first
    spouse.address.unknown
  else:
    if adult_relatives.there_are_any:
      adult_relatives.gather()
  debug_page
  
  set_progress(75)
  nav.set_section('section_guardian')
  guardian_intro
  users[0].name.first
  if users[0].age_in_years() < 18:
    guardian_too_young
  if users[0].is_willing == False:
    guardian_not_willing
  users[0].address.address
  users[0].job
  users[0].is_disabled
  users[0].found_negligent
  if users[0].has_felony_conviction:
    users[0].felony_convictions.gather()
  users[0].phone_number 
  e_signature


  
  set_progress(90)
  nav.set_section('section_filing')  
  filing_county
  

  set_progress(100)
  nav.set_section('section_download')
  forms_assembling
  
  snapshot_forms
  get_docs_screen
---
code: |
  stuff_to_snapshot = {
  	'start_time': str(current_datetime().format_datetime()),
  	'started_interview': True, 
  	}

  try:
    stuff_to_snapshot['ip_address'] = device(ip=True)
  except:
    pass

  stuff_to_snapshot['zip'] = showifdef('users[0].address.zip')

  stuff_to_snapshot['downloaded_forms'] = showifdef('forms_assembling')
  
  try:
    stuff_to_snapshot['session_id'] = current_context().session
  except:
    pass
  
  store_variables_snapshot(
  	data=stuff_to_snapshot, persistent=True
  	)
  snapshot_interview_state = True
---
code: |
  snapshot_interview_state
  snapshot_start = True  
---
code: |
  reconsider('snapshot_interview_state')
  snapshot_forms = True
---
id: welcome
question: |
  Guardianship of a minor
subquestion: |
  Welcome to Illinois Legal Aid Online's **Guardianship of a minor** Easy Form.

  This program helps you make a *${ form_name }* to **UPDATE**.
  
  To learn more, read ILAO's article about [**getting guardianship of a child**](https://www.illinoislegalaid.org/node/30531).
field: sees_nav_bar
---
id: instructions
continue button field: how_to_use
question: |
  Instructions
subquestion: |
  **UPDATE**
  
  To use this program you will need: 

  * A child support order from an Illinois court, 
  * A change of circumstances for you, the other parent, or the children,
  * Information about the other parent, and  
  * Information about the other parent's lawyer, if any. 

  You can find most of this information on other court papers you have about this case. 

  Set aside 10 to 20 minutes to finish this program. You can log in and save your work to continue later. 
 
  ${ collapse_template(help_example) }  

  Click on **{green words}** to learn what they mean. Some questions have a question mark in a circle ${ fa_icon("question-circle", color_css="#0dcaf0" ) } that also gives help.
---
template: help_example
subject: |
  **You can click sections like this to show more information.**
content: |  
  This is an example of help. Click again to hide.
---
id: basic guardianship info
continue button field: basic_info
question: |
  About guardianship of a child
subquestion: |
  **UPDATE**

  Explain what it means to get guardianship of a child.

  Duties, types (person, estate, both), process

  Link to STG? or other forms of guardianship or other ILAO content?

  ADD info about this program is designed to be used by the person who wants to become guardian.

---
id: whats next
continue button field: whats_next
question: |
  After you finish this program
subquestion: |
  **UPDATE**
  
  After you download your forms, you must file them with the court. This program **does not file** your forms for you.
  
  You may need to schedule a court date for when the judge will hear your motion. The scheduling process is different depending on your location and case type. Check with your local circuit clerk for how to schedule a motion hearing.
  
  Finally, you will need to send your *Motion* and *Notice of Court Date for Motion* forms to the other parent.
  
  To learn more, read the instructions you can download at the end of this program. 
---
id: user qualified to be guardian
question: |
  Do you meet the legal requirements to ask for guardianship of a child?
subquestion: |
  UPDATE

  To ask the court to be appointed guardian of a child, you must:

  * Be at least 18 years old,
  * Live in the United States,
  * Be of sound mind,
  * Not be under a court-ordered guardianship yourself, and
  * Not have a felony conviction that involves harm or threat to a minor.

  **Note:** If you have a felony conviction that does not involve harm or threat to a minor, you may still be appointed if the judge finds it to be in the minor's best interest.  
fields:
  - "Do you meet these requirements?": user_qualified
    datatype: yesnoradio
---
id: ineligible guardian kick out
event: ineligible_guardian
question: |
  Sorry
subquestion: |
  Based on your answers, you do not meet the basic requirements to be appointed guardian of a child.

  UPDATE
  
  Click **Back** if you made a mistake, or you can talk with a lawyer to discuss your options. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
buttons:
  - Exit: exit
  - Restart: restart
---
id: child birthdate
question: |
  When was ${child.name_full()} born?
subquestion: |
  **Note:** If the child is undocumented and under 21, speak to an immigration lawyer to see if the minor is eligible for Special Immigrant Juvenile Status before you file this form. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
fields:
  - Birthdate: child.birthdate
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
---
id: child too old kick out
event: child_too_old
question: |
  Sorry
subquestion: |
  Based on your answers, ${child.name_full()} is no longer a minor child. This program makes forms to request guardianship of a child under the age of 18.

  Check out ILAO's article about [**getting guardianship of an adult**](https://www.illinoislegalaid.org/node/29961).
  
  Click **Back** if you made a mistake, or you can talk with a lawyer to discuss your options. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
buttons:
  - Exit: exit
  - Restart: restart
---
id: child address
question: |
  What is ${child.name_full()}'s current address?
subquestion: |
  **Note:** This address will appear on your court papers.
fields:
  - Street address: child.address.address
    address autocomplete: True
  - Address line 2: child.address.unit
    required: False
  - City: child.address.city
  - State: child.address.state
    code: |
      states_list()
    default: IL
  - ZIP code: child.address.zip
    required: False
---
id: child outside illinois kick out
event: child_outside_illinois
question: |
  Sorry
subquestion: |
  Based on your answers, ${child.name_full()} does not live in Illinois. This is a requirement for asking for guardianship of a child in Illinois.

  If you want to file for guardianship outside Illinois, you can use the [**Legal Services Corporation website**](https://www.lsc.gov/about-lsc/what-legal-aid/get-legal-help) to find a legal aid organization in another state.
buttons:
  - Exit: exit
  - Restart: restart
---
id: previous standby guardianship
question: |
  Has a judge appointed a standby guardian for ${child.name_full()}?
subquestion: |
  A court can appoint a person as a standby guardian. That person will become the guardian once the parents or current guardian are no longer able to care for the minor.

  **Note:** If a standby guardian was appointed, you will need to attach the court order when you file your *${ form_name }*.
fields:
  - "Standby guardian appointed?": previous_standby
    datatype: yesnoradio
  - note: |
      Be sure to attach the standby guardianship court order to your *${ form_name }* when you file.
    show if:
      variable: previous_standby
      is: True
---
id: current short-term guardianship
question: |
  Is there a short-term guardian for ${child.name_full()}?
subquestion: |
  Parents can have a written agreement for someone to temporarily be the guardian without any court involvement.

  **Note:** If a short-term guardian was appointed, you will need to attach the written agreement when you file your *${ form_name }*.
fields:
  - "Short-term guardian for ${child.name_full()}?": current_stg
    datatype: yesnoradio
  - note: |
      Be sure to attach the written short-term guardianship agreement to your *${ form_name }* when you file.
    show if:
      variable: current_stg
      is: True
---
id: named guardian in will
question: |
  Did ${child.name_full()}'s parents name you as a guardian in their will or in another document?
subquestion: |
  **Note:** If you were named to be ${child.name_full()}'s guardian in their parent's will or in another document, you will need to attach the will or other document when you file your *${ form_name }*.
fields:
  - "Were you named as ${child.name_full()}'s guardian in their parent's will or in another document?": named_in_will
    datatype: yesnoradio
  - note: |
      Be sure to attach the will or other document naming you as guardian to your *${ form_name }* when you file.
    show if:
      variable: named_in_will
      is: True
---
id: immigration separation
question: |
  Have Immigration officers separated ${child.name_full()} from their parents?
subquestion: |
  If ${child.name_full()} has been or will be separated from their parents due to federal immigration enforcement, this is called administrative separation.

  **Note:** If ${child.name_full()} has been administratively separated from their parents, you will need to attach any documents related to that case when you file your *${ form_name }*.
fields:
  - "Was ${child.name_full()} separated from their parents by Immigration officers?": immigration_separation
    datatype: yesnoradio
  - note: |
      Be sure to attach any documents related to the immigration case to your *${ form_name }* when you file.
    show if:
      variable: immigration_separation
      is: True
---
id: guardianship type
question: |
  What kind of guardianship of ${child.name_full()} are you asking for?
subquestion: |
  UPDATE with explanation of types
fields:
  - Guardianship type: guardianship_type
    input type: radio
    choices:
      - Person only: person
      - Estate (property) only: estate
      - Both person and estate (property): both
---
id: child estate
question: |
  ${child.name_full()}'s estate
subquestion: |
  In a guardianship case, an "estate" is any income, money, or belongings that ${child.name_full()} has. You need to enter this information even if you are not asking the judge to give you control of ${child.name_full()}'s estate.
  
  **Note:** You usually do not need to ask the judge to give you control over Social Security or public benefits, because control is designated by the agency rather than the judge.
fields:
  - "What is the current value of ${child.name_full()}'s estate?": child_estate
    input type: radio
    choices:
      - "I don't know the value of ${child.name_full()}'s estate.": unknown
      - "$0 - ${child.name_full()} has no property, assets or saved money.": zero
      - "I will enter the amount.": amount                                                            
  - "Value of ${child.name_full()}'s estate": estate_value
    datatype: currency
    show if:
      variable: child_estate
      is: 'amount'
  - "What is the ${child.name_full()}'s annual income, including Social Security, SSI, and other public benefits?": child_income
    input type: radio
    choices:
      - "I don't know the amount of ${child.name_full()}'s income.": unknown
      - "$0 - ${child.name_full()} has no annual income.": zero
      - "I will enter the amount.": amount                                                            
  - "Value of ${child.name_full()}'s estate": income_value
    datatype: currency
    show if:
      variable: child_income
      is: 'amount'
---
id: any legal parents
question: |
  Does ${child.name_full()} have at least one legal parent?
subquestion: |
  Legal parents are entitled to notice if someone is asking a court to become a guardian of their child.
  
  You must list each of ${child.name_full()}'s parents on the *${ form_name }*, even if the parent:
  
  * Has died,
  * Gave up physical custody of ${child.name_full()},
  * Cannot be located, or
  * Is unable or unwilling to take care of ${child.name_full()}.

  **Note:**  Do not include parents who have had their parental rights terminated by a court.
fields:
  - Does ${child.name_full()} have at least one legal parent?": has_legal_parent
    datatype: yesnoradio
---
id: names of parents
sets:
  - parents[i].name.first
  - parents[i].name.last
  - parents[i].name.middle
  - parents[i].name.suffix
question: |
  % if i == 0:
  Name of ${child.name_full()}'s parent
  % else:
  Name of ${child.name_full()}'s second parent
  % endif
subquestion: |
  You may be able to find this on ${child.name_full()}'s birth certificate or other official records, if you have them.
fields:
  - code: |
      parents[i].name_fields()
---
id: info about parents
question: |
  Information about ${parents[i].name_full()}
subquestion: |
  Enter information about ${parents[i].name_full()}. Check all that apply.
fields:
  - "${parents[i].name_full()} agrees to the guardianship. They will have to sign a *Consent to Guardianship of Minor and Appearance* or give consent in court.": parents[i].agrees
    datatype: yesno
  - "${parents[i].name_full()} has died.": parents[i].is_dead
    datatype: yesno
  - "When did ${parents[i].name_full()} die?": parents[i].decease_date
    datatype: date
    show if:
      variable: parents[i].is_dead
      is: True
  - "${parents[i].name_full()} voluntarily gave up custody of ${child.name_full()}.": parents[i].gave_up_custody
    datatype: yesno
  - "${parents[i].name_full()} cannot be found.": parents[i].not_found
    datatype: yesno
  - "**When** was ${parents[i].name_full()}'s last contact with ${child.name_full()}?": parents[i].last_contact_date
    datatype: date
    show if:
      variable: parents[i].not_found
      is: True
  - "**Where** was ${parents[i].name_full()}'s last contact with ${child.name_full()}?": parents[i].last_contact_location
    maxlength: 50
    show if:
      variable: parents[i].not_found
      is: True
  - "${parents[i].name_full()} is unable or unwilling to take care of  ${child.name_full()}.": parents[i].unable
    datatype: yesno
---
id: any legal parents
question: |
  Does ${child.name_full()} have another legal parent?
subquestion: |
  There is probably no other legal parent if:

  * No other parent is listed on the birth certificate,
  * There is no Voluntary Acknowledgment of Paternity/Parentage,
  * The parents were not married at the time the child was born, and
  * Parentage has not been decided by a court or administrative agency.

  You already entered information about ${parents[0].name_full()}.

  ${ collapse_template(parental_notice_help) }
  
  **Note:** You do not need to include parents who have had their parental rights terminated by a court.
fields:
  - Does ${child.name_full()} have another legal parent?": has_another_parent
    datatype: yesnoradio
---
template: parental_notice_help
subject: |
  **Remind me why parents must be included**
content: |  
  Legal parents are entitled to notice if someone is asking a court to become a guardian of their child.
  
  You must list each of ${child.name_full()}'s parents on the *${ form_name }*, even if the parent:
  
  * Has died,
  * Gave up physical custody of ${child.name_full()},
  * Cannot be located, or
  * Is unable or unwilling to take care of ${child.name_full()}.
---
id: another court case that involves parents
question: |
  Do you know of any court cases that involve ${child.name_full()} or their parents?
subquestion: |
  This includes adoption, divorce, custody, parentage, child support, orders of protection, juvenile, DCFS, and guardianship cases. You must list all cases from anywhere inside or outside the US on your forms.
fields:
  - no label: other_case_involving_parents
    datatype: yesnoradio
---
code: |
  other_cases[i].name.text
  other_cases[i].in_us
  other_cases[i].complete = True
---
id: info about first other case
question: |
  Information about another case
subquestion: |
  This includes adoption, divorce, custody, parentage, child support, orders of protection, juvenile, DCFS, and guardianship cases. You must list all cases from anywhere inside or outside the US.

  This information should be found on the court papers from the other case. If you do not have the court papers, you may be able to find the case information online. To learn more, read ILAO's article about [how to access court records](https://www.illinoislegalaid.org/node/33186).
fields:
  - Case number: other_cases[0].name.text
    maxlength: 25
  - Was the case filed in the United States?: other_cases[0].in_us
    datatype: yesnoradio
  - State: other_cases[0].state
    show if: 
      variable: other_cases[0].in_us
      is: True
    code: |
      states_list()
  - County: other_cases[0].county
    code: |
      court_list._load_courts()["address_county"].unique()      
    js show if: |
      val('other_cases[0].in_us') && val('other_cases[0].state') === "IL"
  - Country (outside US): other_cases[0].non_us_country
    show if: 
      variable: other_cases[0].in_us
      is: False
---
id: info about other cases
question: |
  Information about a ${ ordinal(i) } other case
subquestion: |
  This includes adoption, divorce, custody, parentage, child support, orders of protection, juvenile, DCFS, and guardianship cases. You must list all cases from anywhere inside or outside the US on your forms.

  This information should be found on the court papers from the other case. If you do not have the court papers, you may be able to find the case information online. To learn more, read ILAO's article about [how to access court records](https://www.illinoislegalaid.org/node/33186).
fields:
  - Case number: other_cases[i].name.text
    maxlength: 25
  - Was the case filed in the United States?: other_cases[i].in_us
    datatype: yesnoradio
  - State: other_cases[i].state
    show if: 
      variable: other_cases[i].in_us
      is: True
    code: |
      states_list()
  - County: other_cases[i].county
    code: |
      court_list._load_courts()["address_county"].unique()      
    js show if: |
      val('other_cases[i].in_us') && val('other_cases[i].state') === "IL"
  - Country (outside US): other_cases[i].non_us_country
    code: |
      countries_list()
    show if: 
      variable: other_cases[i].in_us
      is: False
---
id: any other cases
question: |  
  Do you know of any other court cases that involve ${child.name_full()} or their parents?
subquestion: |
  So far you have told us about:

  % for case in other_cases:
  % if case.in_us:
  * Case number: ${case.name.text} in ${state_name(case.state)}
  % else:  
  * Case number: ${case.name.text} in ${country_name(case.non_us_country)}
  % endif  
  % endfor  

  The forms have room for up to eight cases.

  You only need to include adoption, divorce, custody, parentage, child support, orders of protection, juvenile, DCFS, and guardianship cases. You must list all cases from anywhere inside or outside the US on your forms.  
fields:
  - "Any other cases?": other_cases.there_is_another
    datatype: yesnoradio
---
code: |
  if other_cases.number_gathered() >= 8:
    other_cases.there_is_another = False
---
code: |
  caregivers[i].name.first
  caregivers[i].relationship
  caregivers[i].complete = True
---
id: caregiver name
sets: 
  - caregivers[i].name.first
question: |
  % if i==0:
  Who is an adult that lives with ${child.name_full()}?
  % else:
  Who is another adult that lives with ${child.name_full()}?  
  % endif
subquestion: |
  % if i>0:
  So far you have told us about:
  
  % for x in range(caregivers.number_gathered() - 1):
  * ${caregivers[x].name_full()}, ${caregivers[x].relationship}
  % endfor  

  % endif
  You can include up to four adults that live with ${child.name_full()} at ${child.address.on_one_line(bare=True)}.

  **Note:** Be sure to list ${child.name_full()}'s parents, if any of them live with their child.
fields:
  - code: |
      caregivers[i].name_fields()
---
id: caregiver relationship
question: |
  What is ${caregivers[i].name_full()}'s relationship to ${child.name_full()}?
subquestion: |
  You can enter things like parent, brother, sister, aunt, uncle, grandparent, cousin, short-term guardian, etc.
fields:
  - "Relationship to ${child.name_full()}": caregivers[i].relationship
    maxlength: 25
---
id: any other caregivers
question: |  
  Are there any other adults that live with ${child.name_full()}?
subquestion: |
  So far you have told us about:

  % for caregiver in caregivers:
  * ${caregiver.name_full()}, ${caregiver.relationship}
  % endfor  

  The forms have room for up to four adults that live with ${child.name_full()} at ${child.address.on_one_line(bare=True)}.

  **Note:** Be sure to list ${child.name_full()}'s parents, if any of them live with their child.  
fields:
  - "Any other adults?": caregivers.there_is_another
    datatype: yesnoradio
---
code: |
  if caregivers.number_gathered() >= 4:
    caregivers.there_is_another = False
---
id: is minor married
question: |  
  Is ${child.name_full()} married?
subquestion: |
  If ${child.name_full()} married, their spouse needs to have a chance to participate in the guardianship request case.
fields:
  - "Is ${child.name_full()} married?": minor_is_married
    datatype: yesnoradio
---
id: spouse name
sets: 
  - spouse.name.first
question: |
  Who is ${child.name_full()}'s spouse? 
fields:
  - code: |
      spouse.name_fields()
---
id: spouse address
question: |
  What is ${spouse.name_full()}'s current address?
fields:
  - Street address: spouse.address.address
    address autocomplete: True
  - Address line 2: spouse.address.unit
    required: False
  - City: spouse.address.city
  - State: spouse.address.state
    code: |
      states_list()
    default: IL
  - ZIP code: spouse.address.zip
    required: False
  - "I don't know ${spouse.name_full()}'s address.": spouse.address.unknown
    datatype: yesno
    disable others: True
---
id: any adult_relatives
question: |  
  Does ${child.name_full()} have any adult relatives?
subquestion: | 
  So far you have told us about: 

  % for person in caregivers:
  * ${person.name_full()}, ${person.relationship}
  % endfor

  **Important:**

  * List ${child.name_full()}'s parents, adult brothers and sisters, and short-term guardian, if any.
  * If ${child.name_full()} has none of the above relatives, then list the adult relatives who are most closely related to them (for example, grandparents, aunts, and uncles).
  
  The forms have room for up to ten adult relatives of ${child.name_full()}.
fields:
  - "Any other adult relatives?": adult_relatives.there_are_any
    datatype: yesnoradio

---
code: |
  adult_relatives[i].name.first
  adult_relatives[i].relationship
  adult_relatives[i].address.unknown
  adult_relatives[i].complete = True
---
sets: 
  - adult_relatives[i].name.first
id: adult relative name
question: |
  Who is another adult relative of ${child.name_full()}?
subquestion: |
  So far you told us about: 

  % for person in caregivers:
  * ${person.name_full()}, ${person.relationship}
  % endfor
  % for x in range(adult_relatives.number() - 1):
  * ${adult_relatives[x].name_full()}, ${adult_relatives[x].relationship}
  % endfor

  **Important:**

  * List ${child.name_full()}'s parents, adult brothers and sisters, and short-term guardian, if any.
  * If ${child.name_full()} has none of the above relatives, then list the adult relatives who are most closely related to them (for example, grandparents, aunts, and uncles).
  
  You can include up to ten adult relatives of ${child.name_full()}.
fields:
  - code: |
      adult_relatives[i].name_fields()
---
id: adult relative relationship
question: |
  What is ${adult_relatives[i].name_full()}'s relationship to ${child.name_full()}?
fields:
  - Relationship to ${child.name_full()}: adult_relatives[i].relationship
    maxlength: 25
---
id: adult relative address
question: |
  What is ${adult_relatives[i].name_full()}'s current address?
fields:
  - Street address: adult_relatives[i].address.address
    address autocomplete: True
  - Address line 2: adult_relatives[i].address.unit
    required: False
  - City: adult_relatives[i].address.city
  - State: adult_relatives[i].address.state
    code: |
      states_list()
    default: IL
  - ZIP code: adult_relatives[i].address.zip
    required: False
  - "I don't know ${adult_relatives[i].name_full()}'s address.": adult_relatives[i].address.unknown
    datatype: yesno
    disable others: True
---
id: any other adult_relatives
question: |  
  Does ${child.name_full()} have any other adult relatives?
subquestion: |
  So far you have told us about:

  % for person in caregivers:
  * ${person.name_full()}, ${person.relationship}
  % endfor
  % for adult in adult_relatives:
  * ${adult.name_full()}, ${adult.relationship}
  % endfor

  **Important:**

  * List ${child.name_full()}'s parents, adult brothers and sisters, and short-term guardian, if any.
  * If ${child.name_full()} has none of the above relatives, then list the adult relatives who are most closely related to them (for example, grandparents, aunts, and uncles).
  
  The forms have room for up to ten adult relatives of ${child.name_full()}.
fields:
  - "Any other adult relatives?": adult_relatives.there_is_another
    datatype: yesnoradio
---
code: |
  if adult_relatives.number_gathered() >= ( 10-caregivers.number() ):
    adult_relatives.there_is_another = False
---
code: |
  def get_notice_parties():  
    temp_list = []
    
    if minor_is_married:
      temp_list.append(spouse)
    else:
      for caregiver in caregivers:
        temp_list.append(caregiver)    	  
      if adult_relatives.there_are_any:
        for x in range(adult_relatives.number() - 1):
          temp_list.append(adult_relatives[x])
    
    return temp_list
---
id: debug
question: |
  DEBUG PAGE
subquestion: |

  Notice parties (NOT INCLUDING LAST ADULT RELATIVE WHY):

  % for party in get_notice_parties():
  * ${party.name_full()}, ${party.relationship}
  % endfor

  Caregivers:

  % for person in caregivers:
  * ${person.name_full()}, ${person.relationship}
  % endfor

  Adult relatives:
  
  % for adult in adult_relatives:
  * ${adult.name_full()}, ${adult.relationship}
  % endfor


  
continue button field: debug_page
---
id: guardian intro
continue button field: guardian_intro
question: |
  Information about the guardian
subquestion: |
  **UPDATE**

  The next screens will ask questions about you, the person who wants to be ${child.name_full()}'s guardian. If you want the court to appoint a co-guardian, you can enter their information as well.

  **Note:** You may have entered some of this information already if you live with or are related to ${child.name_full()}. It is important that it is included in both places.
---
id: user name
sets:
    - users[0].name.first
question:  |
  What is your name?
subquestion: |
  You will be listed on the court forms as the proposed guardian.
fields:
  - code: |
      users[0].name_fields()
---
id: user birthdate
question: |
  When were you born?
fields:
  - Birthdate: users[0].birthdate
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
---
id: guardian too young kick out
event: guardian_too_young
question: |
  Sorry
subquestion: |
  You must be at least 18 years old to be appointed as a guardian.
  
  Click **Back** if you made a mistake, or you can talk with a lawyer to discuss your options. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
buttons:
  - Exit: exit
  - Restart: restart
---
id: guardian willing and able
question: |
  Are you willing and able to act as guardian of ${child.name_full()}?
subquestion: |
  Being willing and able means that:

  * You are responsible for the health, welfare, and education of ${child.name_full()}.
  * You must notify the court and ${child.name_full()}'s parents of any change in your address or the address of ${child.name_full()} within 30 days of the change.
  * You must get permission from the judge before moving out of state with ${child.name_full()} or traveling with them outside the state for more than 30 days.
  * You cannot transfer custody of ${child.name_full()} to anyone, including ${child.name_full()}'s parents, without permission from the judge, and
  * You will file any reports the judge requires.
fields:
  - no label: users[0].is_willing
    datatype: yesnoradio
---
id: guardian not willing kick out
event: guardian_not_willing
question: |
  Sorry
subquestion: |
  You must be willing and able to the terms of minor guardianship to be appointed as a guardian.
  
  Click **Back** if you made a mistake, or you can talk with a lawyer to discuss your options. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
buttons:
  - Exit: exit
  - Restart: restart
---
id: user address
question: |
  What is your current address?
subquestion: |
  **Note:** This address will appear on your court papers.
fields:
  - Street address: users[0].address.address
    address autocomplete: True
  - Address line 2: users[0].address.unit
    required: False
  - City: users[0].address.city
  - State: users[0].address.state
    code: |
      states_list()
    default: IL
  - ZIP code: users[0].address.zip
    required: False
---
id: guardian job
question: |
  What is your current job?
subquestion: |
  If you are unemployed, retired, or receiving public benefits, you can enter that information.
fields:
  - Job: users[0].job
    maxlength: 50
---
id: guardian disabled
question: |
  Has a judge found you disabled and appointed you a Guardian?
subquestion: |
  It is up to the judge to decide how this might affect your ability to be appointed guardian of ${child.name_full()}.
fields:
  - no label: users[0].is_disabled
    datatype: yesnoradio
---
id: guardian negligent
question: |
  Have you been found to have neglected or abused any minor by DCFS or in court?
subquestion: |
  It is up to the judge to decide how this might affect your ability to be appointed guardian of ${child.name_full()}.
fields:
  - no label: users[0].found_negligent
    datatype: yesnoradio
 
---
id: guardian has felony conviction
question: |
  Do you have any felony convictions?
subquestion: |
  You must list felony convictions on your forms. It is up to the judge to decide how they might affect your ability to be appointed guardian of ${child.name_full()}.
fields:
  - no label: users[0].has_felony_conviction
    datatype: yesnoradio
---
code: |
  users[0].felony_convictions[i].name.text
  users[0].felony_convictions[i].complete = True
---
id: info about first felony conviction
question: |
  Information about your felony conviction
subquestion: |
  It is up to the judge to decide how they might affect your ability to be appointed guardian of ${child.name_full()}.
fields:
  - Date of conviction: users[0].felony_convictions[0].date
    datatype: ThreePartsDate
    alMax: ${ today().format("yyyy-MM-dd") }
    alMin: users[0].birthdate
  - Charge: users[0].felony_convictions[0].name.text
    maxlength: 40
---
id: info about other felony convictions
question: |
  Information about a ${ ordinal(i) } felony conviction
subquestion: |
  It is up to the judge to decide how they might affect your ability to be appointed guardian of ${child.name_full()}.
fields:
  - Date of conviction: users[0].felony_convictions[i].date
    datatype: ThreePartsDate
    alMin: ${ users[0].birthdate.format("yyyy-MM-dd") }
    alMax: ${ today().format("yyyy-MM-dd") }
  - Charge: users[0].felony_convictions[i].name.text
    maxlength: 40
---
id: any other cases
question: |  
  Do you have any other felony convictions?
subquestion: |
  So far you have told us about:

  % for conviction in users[0].felony_convictions:
  * Date of conviction: ${conviction.date}, Charge: ${conviction.name.text}
  % endfor  

  The forms have room for up to three felony convictions.
fields:
  - "Any other felony convictions?": users[0].felony_convictions.there_is_another
    datatype: yesnoradio
---
code: |
  if users[0].felony_convictions.number_gathered() >= 3:
    users[0].felony_convictions.there_is_another = False
---

---
id: your contact information
question: |
  What is your contact information?
subquestion: |
  The court or other parties might need to contact you about this case.

  **This information will appear on your court forms.**
  
  If you do not want to list a phone number on your forms, leave it blank.

  If you have an email address, you must list it. Be sure to check your email daily, otherwise you may miss important court documents or information about your case.

  ${ collapse_template(contact_info_help) }  
fields:  
  - Phone number: users[0].phone_number
    datatype: al_international_phone
    required: False
  - label: |
      Do you have an email address?
    field: users[0].has_email_address      
    datatype: yesnoradio
  - note: |
      This email address will appear on your court forms. Be sure to check 
      this email daily, otherwise you may miss important information about 
      your case.
    show if:
      variable: users[0].has_email_address
      is: True
  - Email address: users[0].email    
    datatype: email
    show if: 
      variable: users[0].has_email_address
      is: True
---
template: contact_info_help
subject: |
  **What if I don't want to list my email address?**
content: |  
  If you do not want to enter your personal email address, you can create a new email account to get email about your case.
  
  To make a new email account try one of these email services:
  
  * [**Gmail**](https://accounts.google.com/SignUp)
  * [**Outlook**](https://outlook.live.com/owa/?nlp=1&signup=1)
  * [**Yahoo**](https://login.yahoo.com/account/create?.lang=en-US&.intl=us)











---
id: filing county
question: |
  In which county will you file your *${ form_name }*?
subquestion: |
  You should file in the county where ${child.name_full()} lives.
fields:
  - County: filing_county
    code:
      court_list._load_courts()["address_county"].unique()

---
id: e-signature
question: |
  Do you want to add your e-signature to your forms?
subquestion: |
  **UPDATE THIS PAGE**
  
  This program can put “**/s/ ${users[0].name_full()}**” where you would sign your name. The court will accept this as your signature.

  If you do not add your **{e-signature}** now, you must sign your paper forms before you file and deliver them.

  <div class="alert alert-info ilao-info" role="alert">
    <h6 class="alert-heading">What it means to sign your forms</h6>
    <p>By signing the <i>Motion</i> and <i>Notice of Court Date for Motion</i> forms, you are certifying that:</p>
    <p><ul>
      <li>You read the document,</li>
      <li>You have been informed and believe it is true and correct, and</li>
      <li>You are not filing it to cause delay or for another bad reason.</li>
    </ul></p>
    <p>See the <a href="https://ilcourtsaudio.blob.core.windows.net/antilles-resources/resources/9ce1fce9-895f-463e-b87d-f9b7631f8fde/Rule%20137.pdf"><b>Illinois Supreme Court Rule 137</b></a> for more information.</p>
    <p>By signing the and Proof of Delivery section of your forms, you are certifying that:</p>
    <p><ul>
      <li>Everything on the forms is true and correct, or you have been informed or believe it to be true and correct, and</li>
      <li>You understand that making a false statement on the forms is perjury and has penalties provided by law.</li>    </ul></p>
  <p>See the <a href="https://www.ilga.gov/legislation/ilcs/documents/073500050k1-109.htm"><b>Illinois Code of Civil Procedure, 735 ILCS 5/1-109</b></a> for more information.</p>
  </div>
fields:
  - "Add e-signature?": e_signature
    datatype: yesnoradio
terms:
  - "e-signature": |
      An e-signature is an electronic signature. It is a digital version of a signature that has the same effect as a hand-written signature. 



---
id: forms assembling
continue button field: forms_assembling
question: |
  Almost done
subquestion: |
  After you click **Next**, it may take a few moments to finish making your forms.
  
  ###### You do not need to refresh your screen. Hang in there!
  
  [NEWLINE]
---
id: get docs screen
event: get_docs_screen
question: |
  Download
subquestion: |
  
  Your forms are ready. View and download your forms below. Click **:edit: Make changes** to fix any mistakes.
  
  This program **does not file** your Motion with the court or deliver it to other parties in your case. You will need to do this yourself. Learn about [**e-filing in Illinois**](https://www.illinoiscourts.gov/eservices/information-for-filers-without-lawyers).

  ${ action_button_html(url_action('review_answers'), label=':edit: Make changes', color='success', size="md") }
  
  ${ al_user_bundle.download_list_html() }

  [NEWLINE]

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

  **Note:** This program **does not file** your Motion with the court or deliver it to other parties in your case. Learn about [**e-filing in Illinois**](https://www.illinoiscourts.gov/eservices/information-for-filers-without-lawyers).
  
  Thank you for using ILAO Easy Forms!
under: |
  % if not user_logged_in():
  [${fa_icon("sign-in-alt", color="#0079d0", size="sm")} **Sign-in**](${url_of('login', next=interview_url())}) or [**create**](${url_of('register', next=interview_url())}) an ILAO Easy Form account to save your progress (optional).
  % endif 

  &nbsp;
  ${ action_button_html(interview_url(i="docassemble.ILAO:feedback.yml", easy_form_interview=ilao_easy_form_url, easy_form_title=ilao_easy_form_title, easy_form_page=current_context().question_id, easy_form_variable=current_context().variable, local=False,reset=1), label=':comment: Was this program helpful?', color="#181c36", size="md", new_window=True) }
---
generic object: ALDocumentBundle
template: x.send_email_template
subject: |
  Guardianship of a minor forms
content: |
  Your forms are attached.
  
  Thanks for using ILAO Easy Forms!
  
  [Illinois Legal Aid Online](https://www.illinoislegalaid.org)

---
objects:
  - instructions: ALDocument.using(title="Instructions", filename="instructions.pdf", has_addendum=False)
---
code: |
  instructions.enabled = True

---
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[instructions], filename="minor_guardianship.pdf", title="All forms")
  - al_court_bundle: ALDocumentBundle.using(elements=[]], filename="minor_guardianship.pdf", title="Motion")

---
attachment:
  variable name: instructions[i]
  name: instructions
  filename: instructions
  skip undefined: True
  editable: False
  pdf template file: instructions.pdf
  fields:
      - "fake": ${ "" }
  
