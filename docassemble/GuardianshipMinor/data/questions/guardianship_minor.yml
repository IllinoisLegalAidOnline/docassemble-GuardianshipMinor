metadata:
  title: Guardianship of a minor
  short title: Guardianship of a minor
  comment: This program helps you ask the court to become a legal guardian of a minor.
  authors:
    - Matt Newsted
---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ILAO:ilao-interview-framework.yml
  - docassemble.ILAO:shared-basic-questions.yml
---
objects:
  - users: ALPeopleList.using(there_are_any=True)
  - users[i].felony_convictions: DAList.using(object_type=Thing, complete_attribute='complete', there_are_any=True)
  - child: ALIndividual
  - child.jail_delivery_address: ALAddress
  - parents: ALPeopleList
  - parents[i].jail_delivery_address: ALAddress
  - other_cases: DAList.using(object_type=Thing, complete_attribute='complete', there_are_any=True)  
  - caregivers: ALPeopleList.using(complete_attribute='complete')
  - caregivers[i].jail_delivery_address: ALAddress
  - spouse: ALIndividual
  - spouse.jail_delivery_address: ALAddress
  - adult_relatives: ALPeopleList.using(complete_attribute='complete')
  - adult_relatives[i].jail_delivery_address: ALAddress
  - relatives: ALPeopleList.using(there_are_any=True)	
  - notice_parties: ALPeopleList.using(there_are_any=True)
  - court_list: ALCourtLoader.using(file_name='docassemble.ILAO:data/sources/il_courts.xlsx')
---
code: |
  al_form_type = 'starts_case'
  ilao_easy_form_title = "Guardianship of a minor"
  ilao_easy_form_url = "https://www.illinoislegalaid.org/legal-information/guardianship-minor"
  form_name = "Petition for Guardianship of a Minor"
  github_user = 'IllinoisLegalAidOnline'
  github_repo_name = 'docassemble-GuardianshipMinor'
  allowed_courts = ['Circuit']
---
# Road map
sections:
  - section_intro: Start
  - section_child: Child
  - section_family: Child's parents, caregivers, and relatives
  - section_guardian: Guardian
  - section_filing: Court and filing details
  - section_download: Download
---
# interview order block
mandatory: True
code: |
  nav.set_section('section_intro')
  sees_nav_bar
  snapshot_start
  how_to_use
  set_progress(5)
  basic_info
  accept_terms
  whats_next
  if not user_qualified:
    ineligible_guardian

  set_progress(25)  
  nav.set_section('section_child')
  child.name.first
  if child.age_in_years() >= 18:
    child_too_old
  if child.address.state != 'IL':
    child_outside_illinois
    child.address.known = True
  
  previous_standby
  current_stg
  named_in_will
  immigration_separation
  guardianship_type
  child_estate

  set_progress(50)
  nav.set_section('section_family')
  notice_intro
  if has_legal_parent:

    parents[0].name.first
    parents[0].relationship = "parent"
    if parents[0].agrees:
      parents[0].consent_info
    if parents[0].not_found or parents[0].is_dead:
      parents[0].address.known = False
    else:
      if parents[0].address.known:
        get_parent_address(parents[0], child)
      else:
        parents[0].notice_by_publication
      parents[0].notice_relationship = "parent"  
      if parents[0].knows_delivery_method:
        parents[0].hand_delivery
        parents[0].delivery_date
  
    if has_second_parent:
      parents[1].name.first
      parents[1].relationship = "parent"
      if parents[1].agrees:
        parents[1].consent_info
      if parents[1].not_found or parents[1].is_dead:
        parents[1].address.known = False
      else:
        if parents[1].address.known:
          get_parent_address(parents[1], child)
        else:
          parents[1].notice_by_publication  
        parents[1].notice_relationship = "parent"  
      if parents[1].knows_delivery_method:
        parents[1].hand_delivery
        parents[1].delivery_date

  # parent_child_same_address_check
  
  if other_case_involving_parents:
    other_cases.gather()
  if caregivers.there_are_any:
    caregivers.gather()
  if minor_is_married:
    spouse.name.first
    spouse.relationship = "Spouse"
    spouse.address.known
    spouse.agrees
    if not spouse.address.known:
      spouse.notice_by_publication
    spouse.notice_relationship = "Spouse"
    if spouse.knows_delivery_method:
      spouse.hand_delivery
      spouse.delivery_date
  else:
    if adult_relatives.there_are_any:
      adult_relatives.gather()
  
  set_progress(75)
  nav.set_section('section_guardian')
  guardian_intro
  users[0].name.first
  if users[0].age_in_years() < 18:
    guardian_too_young
  if users[0].is_willing == False:
    guardian_not_willing
  users[0].address.address
  users[0].job
  users[0].is_disabled
  users[0].found_negligent
  if users[0].has_felony_conviction:
    users[0].felony_convictions.gather()
  users[0].phone_number 
  if add_co_guardian == True:
    users[1].name.first
    if users[1].age_in_years() < 18:
      co_guardian_too_young
    else:
      if users[1].is_willing:
        users[1].address.address
        users[1].job
        users[1].is_disabled
        users[1].found_negligent
        if users[1].has_felony_conviction:
          users[1].felony_convictions.gather()
        users[1].phone_number 
      else:
        co_guardian_not_willing

  oath_intro
  if guardianship_type != "estate":
    if not oath_person_agree:
      oath_required
  if guardianship_type != "person":
    if not oath_estate_agree:
      oath_required
    else:
      bond_info
  
  
  set_progress(90)
  nav.set_section('section_filing')  
  filing_intro
  build_relatives_list
  build_notice_parties
  
  if child.age_in_years() >= 14:
    child.agrees
    if not child.address.known:
      child.notice_by_publication
    child.notice_relationship = "minor"
    if child.knows_delivery_method:
      child.hand_delivery
      child.delivery_date
  
  hand_delivery_info

  courthouse_info
  if trial_court_index == -1:
    cook_district
  if has_court_date:
    hearing_date
  attend_court
  e_signature
  next_steps
  
  set_progress(100)
  nav.set_section('section_download')
  forms_assembling
  refresh_delivery_bundle
  snapshot_forms
  get_docs_screen
---
code: |
  stuff_to_snapshot = {
  	'start_time': str(current_datetime().format_datetime()),
  	'started_interview': True, 
  	}

  try:
    stuff_to_snapshot['ip_address'] = device(ip=True)
  except:
    pass

  stuff_to_snapshot['zip'] = showifdef('users[0].address.zip')

  stuff_to_snapshot['downloaded_forms'] = showifdef('forms_assembling')
  
  try:
    stuff_to_snapshot['session_id'] = current_context().session
  except:
    pass
  
  store_variables_snapshot(
  	data=stuff_to_snapshot, persistent=True
  	)
  snapshot_interview_state = True
---
code: |
  snapshot_interview_state
  snapshot_start = True  
---
code: |
  reconsider('snapshot_interview_state')
  snapshot_forms = True
---
code: |
  chair = True


---
id: welcome
question: |
  Guardianship of a minor
subquestion: |
  Welcome to Illinois Legal Aid Online's **Guardianship of a minor** Easy Form.

  This program helps you make a *${ form_name }* to **UPDATE**.
  
  To learn more, read ILAO's article about [**getting guardianship of a child**](https://www.illinoislegalaid.org/node/30531).
field: sees_nav_bar
---
id: instructions
continue button field: how_to_use
question: |
  Instructions
subquestion: |
  **UPDATE**
  
  Information you will need to fill out the forms:

  * Name,birth date, and address of the minor,
  * Names and addresses of the minor’s nearest relatives and the person who has custody of the minor,
  * Approximate value of minor’s estate (property) and annual income from all sources,
  * Your name, address, age, occupation, telephone, email address, and criminal history (and of the co-guardian, if any),
  * Details about other court cases involving the minor and their parents,
  * Information about the parents, such as most recent contact with minor, reasons why they are unable to care for the minor, or date of death, and
  * Details about any current or previous standby or short-term guardians of the minor.

  Set aside 20 to 30 minutes to finish this program. You can log in and save your work to continue later. 
 
  ${ collapse_template(help_example) }  

  Click on **{green words}** to learn what they mean. Some questions have a question mark in a circle ${ fa_icon("question-circle", color_css="#0dcaf0" ) } that also gives help.
---
template: help_example
subject: |
  **You can click sections like this to show more information.**
content: |  
  This is an example of help. Click again to hide.
---
id: basic guardianship info
continue button field: basic_info
question: |
  About guardianship of a child
subquestion: |
  **UPDATE**

  Explain what it means to get guardianship of a child.

  Duties, types (person, estate, both), process

  Link to STG? or other forms of guardianship or other ILAO content?

  ADD info about this program is designed to be used by the person who wants to become guardian.

---
id: whats next
continue button field: whats_next
question: |
  After you finish this program
subquestion: |
  **UPDATE**
  
  After you download your forms, you must file them with the court. This program **does not file** your forms for you.
  
  You may need to schedule a court date for when the judge will hear your motion. The scheduling process is different depending on your location and case type. Check with your local circuit clerk for how to schedule a motion hearing.
  
  Finally, you will need to send your *Motion* and *Notice of Court Date for Motion* forms to the other parent.
  
  To learn more, read the instructions you can download at the end of this program. 
---
id: user qualified to be guardian
question: |
  Do you meet the legal requirements to ask for guardianship of a child?
subquestion: |
  UPDATE

  To ask the court to be appointed guardian of a child, you must:

  * Be at least 18 years old,
  * Live in the United States,
  * Be of sound mind,
  * Not be under a court-ordered guardianship yourself, and
  * Not have a felony conviction that involves harm or threat to a minor.

  **Note:** If you have a felony conviction that does not involve harm or threat to a minor, you may still be appointed if the judge finds it to be in the minor's best interest.  
fields:
  - "Do you meet these requirements?": user_qualified
    datatype: yesnoradio
---
id: ineligible guardian kick out
event: ineligible_guardian
question: |
  Sorry
subquestion: |
  Based on your answers, you do not meet the basic requirements to be appointed guardian of a child.

  UPDATE
  
  Click **Back** if you made a mistake, or you can talk with a lawyer to discuss your options. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
buttons:
  - Exit: exit
  - Restart: restart
---
id: child birthdate
question: |
  When was ${child.name_full()} born?
subquestion: |
  **Note:** If the child is undocumented and under 21, speak to an immigration lawyer to see if the minor is eligible for Special Immigrant Juvenile Status before you file this form. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
fields:
  - Birthdate: child.birthdate
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
---
id: child too old kick out
event: child_too_old
question: |
  Sorry
subquestion: |
  Based on your answers, ${child.name_full()} is no longer a minor child. This program makes forms to request guardianship of a child under the age of 18.

  Check out ILAO's article about [**getting guardianship of an adult**](https://www.illinoislegalaid.org/node/29961).
  
  Click **Back** if you made a mistake, or you can talk with a lawyer to discuss your options. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
buttons:
  - Exit: exit
  - Restart: restart
---
id: child address
question: |
  What is ${child.name_full()}'s current address?
subquestion: |
  **Note:** This address will appear on your court papers.
fields:
  - Street address: child.address.address
    address autocomplete: True
  - Address line 2: child.address.unit
    required: False
  - City: child.address.city
  - State: child.address.state
    code: |
      states_list()
    default: IL
  - ZIP code: child.address.zip
    required: False
---
code: |
  child.address.known = True
---
id: child outside illinois kick out
event: child_outside_illinois
question: |
  Sorry
subquestion: |
  Based on your answers, ${child.name_full()} does not live in Illinois. This is a requirement for asking for guardianship of a child in Illinois.

  If you want to file for guardianship outside Illinois, you can use the [**Legal Services Corporation website**](https://www.lsc.gov/about-lsc/what-legal-aid/get-legal-help) to find a legal aid organization in another state.
buttons:
  - Exit: exit
  - Restart: restart
---
id: previous standby guardianship
question: |
  Has a judge appointed a standby guardian for ${child.name_full()}?
subquestion: |
  A court can appoint a person as a standby guardian. That person will become the guardian once the parents or current guardian are no longer able to care for the minor.

  **Note:** If a standby guardian was appointed, you will need to attach the court order when you file your *${ form_name }*.
fields:
  - "Standby guardian appointed?": previous_standby
    datatype: yesnoradio
  - note: |
      Be sure to attach the standby guardianship court order to your *${ form_name }* when you file.
    show if:
      variable: previous_standby
      is: True
---
id: current short-term guardianship
question: |
  Is there a current short-term guardian for ${child.name_full()}?
subquestion: |
  Parents can have a written agreement for someone to temporarily be the guardian without any court involvement.

  **Note:** If a short-term guardian was appointed, you will need to attach the written agreement when you file your *${ form_name }*.
fields:
  - "Short-term guardian for ${child.name_full()}?": current_stg
    datatype: yesnoradio
  - note: |
      Be sure to attach the written short-term guardianship agreement to your *${ form_name }* when you file.
    show if:
      variable: current_stg
      is: True
---
id: named guardian in will
question: |
  Did ${child.name_full()}'s parents name you as a guardian in their will or in another document?
subquestion: |
  **Note:** If you were named to be ${child.name_full()}'s guardian in their parent's will or in another document, you will need to attach the will or other document when you file your *${ form_name }*.
fields:
  - "Were you named as ${child.name_full()}'s guardian in their parent's will or in another document?": named_in_will
    datatype: yesnoradio
  - note: |
      Be sure to attach the will or other document naming you as guardian to your *${ form_name }* when you file.
    show if:
      variable: named_in_will
      is: True
---
id: immigration separation
question: |
  Have Immigration officers separated ${child.name_full()} from their parents?
subquestion: |
  If ${child.name_full()} has been or will be separated from their parents due to federal immigration enforcement, this is called administrative separation.

  **Note:** If ${child.name_full()} has been administratively separated from their parents, you will need to attach any documents related to that case when you file your *${ form_name }*.
fields:
  - "Was ${child.name_full()} separated from their parents by Immigration officers?": immigration_separation
    datatype: yesnoradio
  - note: |
      Be sure to attach any documents related to the immigration case to your *${ form_name }* when you file.
    show if:
      variable: immigration_separation
      is: True
---
id: guardianship type
question: |
  What kind of guardianship of ${child.name_full()} are you asking for?
subquestion: |
  A guardian of the **person** is responsible for ${child.name_full()}'s:

  * Safety,
  * Physical and emotional well-being,
  * Housing,
  * Education,
  * Nutrition, and
  * Medical care.

  A guardian of the **estate** is responsible for the care, management, and investment of ${child.name_full()}'s money and property.
fields:
  - Guardianship type: guardianship_type
    input type: radio
    choices:
      - Person only: person
      - Estate (property) only: estate
      - Both person and estate (property): both
---
id: child estate
question: |
  ${child.name_full()}'s estate
subquestion: |
  In a guardianship case, an "estate" is any income, money, or belongings that ${child.name_full()} has. You need to enter this information even if you are not asking the judge to give you control of ${child.name_full()}'s estate.
  
  **Note:** You usually do not need to ask the judge to give you control over Social Security or public benefits, because control is designated by the agency rather than the judge.
fields:
  - "What is the current value of ${child.name_full()}'s estate?": child_estate
    input type: radio
    choices:
      - "I don't know the value of ${child.name_full()}'s estate.": unknown
      - "$0 - ${child.name_full()} has no property, assets or saved money.": zero
      - "I will enter the amount.": amount                                                            
  - "Value of ${child.name_full()}'s estate": estate_value
    datatype: currency
    show if:
      variable: child_estate
      is: 'amount'
  - "What is the ${child.name_full()}'s annual income, including Social Security, SSI, and other public benefits?": child_income
    input type: radio
    choices:
      - "I don't know the amount of ${child.name_full()}'s income.": unknown
      - "$0 - ${child.name_full()} has no annual income.": zero
      - "I will enter the amount.": amount                                                            
  - "Value of ${child.name_full()}'s estate": income_value
    datatype: currency
    show if:
      variable: child_income
      is: 'amount'
---
id: any legal parents
question: |
  Does ${child.name_full()} have at least one legal parent?
subquestion: |
  Legal parents are entitled to notice if someone is asking a court to become a guardian of their child.
  
  You must list each of ${child.name_full()}'s parents on the *${ form_name }*, even if the parent:
  
  * Has died,
  * Gave up physical custody of ${child.name_full()},
  * Cannot be located, or
  * Is unable or unwilling to take care of ${child.name_full()}.

  **Note:**  Do not include parents who have had their parental rights terminated by a court.
fields:
  - "Does ${child.name_full()} have at least one legal parent?": has_legal_parent
    datatype: yesnoradio
---
#code: |
#  parents[i].name.first
#  parents[i].complete = True
---
id: names of parents
sets:
  - parents[i].name.first
  - parents[i].name.last
  - parents[i].name.middle
  - parents[i].name.suffix
question: |
  % if i == 0:
  Name of ${child.name_full()}'s parent
  % else:
  Name of ${child.name_full()}'s second parent
  % endif
subquestion: |
  You may be able to find this on ${child.name_full()}'s birth certificate or other official records, if you have them.
fields:
  - code: |
      parents[i].name_fields()
---
id: know parent address
question: |
  ${parents[i].name_full()}'s current address
fields:
  - "Do you know ${parents[i].name_full()}'s address?": parents[i].address.known
    datatype: yesnoradio
  - "Does ${parents[i].name_full()} live with ${child.name_full()} at[NEWLINE] **${child.address.on_one_line(bare=True)}**?": parents[i].lives_with_child
    datatype: yesnoradio
    show if:
      variable: parents[i].address.known
      is: True
---
id: parent address
question: |
  What is ${parents[i].name_full()}'s current address?
fields:
  - Street address: parents[i].address.address
    address autocomplete: True
  - Address line 2: parents[i].address.unit
    required: False
  - City: parents[i].address.city
  - State: parents[i].address.state
    code: |
      states_list()
  - ZIP code: parents[i].address.zip
    required: False
---
id: info about parents
question: |
  Information about ${parents[i].name_full()}
subquestion: |
  Enter information about ${parents[i].name_full()}. Check all that apply.
fields:
  - "${parents[i].name_full()} agrees to the guardianship. They will have to sign a *Consent to Guardianship of Minor and Appearance* or give consent in court.": parents[i].agrees
    datatype: yesnowide
  - "${parents[i].name_full()} has died.": parents[i].is_dead
    datatype: yesnowide
  - "When did ${parents[i].name_full()} die?": parents[i].decease_date
    datatype: date
    max: ${today()}
    show if:
      variable: parents[i].is_dead
      is: True
  - note: |
      You may need to provide the court with a copy of ${parents[i].name_full()}'s death certificate.
    show if:
      variable: parents[i].is_dead
      is: True      
  - "${parents[i].name_full()} voluntarily gave up custody of ${child.name_full()}.": parents[i].gave_up_custody
    datatype: yesnowide
  - "${parents[i].name_full()} cannot be found.": parents[i].not_found
    datatype: yesnowide
  - "**When** was ${parents[i].name_full()}'s last contact with ${child.name_full()}?": parents[i].last_contact_date
    datatype: date
    max: ${today()}
    show if:
      variable: parents[i].not_found
      is: True
  - "**Where** was ${parents[i].name_full()}'s last contact with ${child.name_full()}?": parents[i].last_contact_location
    maxlength: 50
    show if:
      variable: parents[i].not_found
      is: True
  - "${parents[i].name_full()} is unable or unwilling to take care of ${child.name_full()}.": parents[i].unable
    datatype: yesnowide
---
id: another legal parent
question: |
  Does ${child.name_full()} have another legal parent?
subquestion: |
  You already entered information about ${parents[0].name_full()}. They might be ${child.name_full()}'s only legal parent.
  
  There might not be another legal parent if:

  * No other parent is listed on the birth certificate,
  * There is no Voluntary Acknowledgment of Paternity/Parentage,
  * The parents were not married at the time the child was born, and
  * Parentage has not been decided by a court or administrative agency.

  ${ collapse_template(parental_notice_help) }
  
  **Note:** You do not need to include parents who have had their parental rights terminated by a court.
fields:
  - "Does ${child.name_full()} have another legal parent?": has_second_parent
    datatype: yesnoradio
---
template: parental_notice_help
subject: |
  **Remind me why parents must be included**
content: |  
  Legal parents are entitled to notice if someone is asking a court to become a guardian of their child.
  
  You must list each of ${child.name_full()}'s parents on the *${ form_name }*, even if the parent:
  
  * Has died,
  * Gave up physical custody of ${child.name_full()},
  * Cannot be located, or
  * Is unable or unwilling to take care of ${child.name_full()}.
---
#code: |
#  if parents.number() >= 2:
#    parents.there_is_another = False
---
#reconsider: True
#code: |
#  if has_legal_parent:
#    if parents[0].address.known:
#      if parents[0].lives_with_child:
#        parents[0].address.address = child.address.address
#        parents[0].address.unit = child.address.unit
#        parents[0].address.city = child.address.city
#        parents[0].address.state = child.address.state
#        parents[0].address.zip = child.address.zip
#    	if has_second_parent:
#        if parents[1].address.known:
#          if parents[1].lives_with_child:
#            parents[1].address.address = child.address.address
#            parents[1].address.unit = child.address.unit
#            parents[1].address.city = child.address.city
#            parents[1].address.state = child.address.state
#            parents[1].address.zip = child.address.zip
#
#  parent_child_same_address_check = True
---
code: |
  def get_parent_address(parent, child):
    if parent.lives_with_child:
      parent.address = child.address.copy_deep(parent.attr_name('address'))
      parent.address.known = True
    else:
      parent.address.address
    return
 
---
id: another court case that involves parents
question: |
  Do you know of any court cases that involve ${child.name_full()} or their parents?
subquestion: |
  This includes adoption, divorce, custody, parentage, child support, orders of protection, juvenile, DCFS, and guardianship cases. You must list all cases from anywhere inside or outside the US on your forms.
fields:
  - no label: other_case_involving_parents
    datatype: yesnoradio
---
code: |
  other_cases[i].name.text
  other_cases[i].in_us
  other_cases[i].complete = True
---
id: info about first other case
question: |
  Information about another case
subquestion: |
  This includes adoption, divorce, custody, parentage, child support, orders of protection, juvenile, DCFS, and guardianship cases. You must list all cases from anywhere inside or outside the US.

  This information should be found on the court papers from the other case. If you do not have the court papers, you may be able to find the case information online. To learn more, read ILAO's article about [how to access court records](https://www.illinoislegalaid.org/node/33186).
fields:
  - Case number: other_cases[0].name.text
    maxlength: 25
  - Was the case filed in the United States?: other_cases[0].in_us
    datatype: yesnoradio
  - State: other_cases[0].state
    show if: 
      variable: other_cases[0].in_us
      is: True
    code: |
      states_list()
  - County: other_cases[0].county
    code: |
      court_list._load_courts()["address_county"].unique()      
    js show if: |
      val('other_cases[0].in_us') && val('other_cases[0].state') === "IL"
  - Country (outside US): other_cases[0].non_us_country
    code: |
      countries_list()
    show if: 
      variable: other_cases[0].in_us
      is: False
---
id: info about other cases
question: |
  Information about a ${ ordinal(i) } other case
subquestion: |
  This includes adoption, divorce, custody, parentage, child support, orders of protection, juvenile, DCFS, and guardianship cases. You must list all cases from anywhere inside or outside the US on your forms.

  This information should be found on the court papers from the other case. If you do not have the court papers, you may be able to find the case information online. To learn more, read ILAO's article about [how to access court records](https://www.illinoislegalaid.org/node/33186).
fields:
  - Case number: other_cases[i].name.text
    maxlength: 25
  - Was the case filed in the United States?: other_cases[i].in_us
    datatype: yesnoradio
  - State: other_cases[i].state
    show if: 
      variable: other_cases[i].in_us
      is: True
    code: |
      states_list()
  - County: other_cases[i].county
    code: |
      court_list._load_courts()["address_county"].unique()      
    js show if: |
      val('other_cases[i].in_us') && val('other_cases[i].state') === "IL"
  - Country (outside US): other_cases[i].non_us_country
    code: |
      countries_list()
    show if: 
      variable: other_cases[i].in_us
      is: False
---
id: any other cases
question: |  
  Do you know of any other court cases that involve ${child.name_full()} or their parents?
subquestion: |
  So far you have told us about:

  % for case in other_cases:
  % if case.in_us:
  * Case number: ${case.name.text} in ${state_name(case.state)}
  % else:  
  * Case number: ${case.name.text} in ${country_name(case.non_us_country)}
  % endif  
  % endfor  

  The forms have room for up to eight cases.

  You only need to include adoption, divorce, custody, parentage, child support, orders of protection, juvenile, DCFS, and guardianship cases. You must list all cases from anywhere inside or outside the US on your forms.  
fields:
  - "Any other cases?": other_cases.there_is_another
    datatype: yesnoradio
---
code: |
  if other_cases.number_gathered() >= 8:
    other_cases.there_is_another = False
---
id: any caregivers
question: |  
  Are there any adults that live with ${ child.name_full()}?
subquestion: | 
  These would be adults that live with ${ child.name_full()} at ${ child.address.on_one_line(bare=True)}.

  % if parent_lives_with_child():
  You already told us about:

  % if parents[0].address.known:
  % if parents[0].lives_with_child:
  * ${ parents[0].name_full()}
  % endif
  % endif
  % if has_second_parent:
  % if parents[1].address.known:
  % if parents[1].lives_with_child:
  * ${ parents[1].name_full()}
  % endif
  % endif
  % endif
  % endif  
fields:
  - "Any adults live with ${ child.name_full()}?": caregivers.there_are_any
    datatype: yesnoradio
---
code: |
  def parent_lives_with_child():
  
    if has_legal_parent:
      if  parents[0].address.known:
        if parents[0].lives_with_child:
    	    return True
    	if has_second_parent:
        if parents[1].address.known:
          if parents[1].lives_with_child:
    	      return True
    return False
---
code: |
  caregivers[i].name.first
  caregivers[i].relationship
  caregivers[i].address = child.address.copy_deep(caregivers[i].attr_name('address'))
  caregivers[i].address.known = True
  caregivers[i].agrees
  caregivers[i].notice_relationship
  if caregivers[i].knows_delivery_method:
    caregivers[i].hand_delivery
    caregivers[i].delivery_date
  caregivers[i].complete = True
---
id: caregiver name
sets: 
  - caregivers[i].name.first
question: |
  % if i==0:
  Who is an adult that lives with ${child.name_full()}?
  % else:
  Who is another adult that lives with ${child.name_full()}?  
  % endif
subquestion: |
  % if i>0 or parent_lives_with_child():
  So far you have told us about:

  % if parents[0].address.known:
  % if parent_lives_with_child():
  % if parents[0].lives_with_child:
  * ${ parents[0].name_full()}, Parent
  % endif
  % endif
  % if has_second_parent:
  % if parents[1].address.known:
  % if parents[1].lives_with_child:
  * ${ parents[1].name_full()}, Parent
  % endif
  % endif
  % endif
  % endif    
  % for x in range(caregivers.number_gathered() - 1):
  * ${caregivers[x].name_full()}, ${caregivers[x].relationship}
  % endfor  

  % endif
  You can include up to four adults that live with ${child.name_full()} at ${child.address.on_one_line(bare=True)}.
fields:
  - code: |
      caregivers[i].name_fields()
---
id: caregiver relationship
question: |
  What is ${caregivers[i].name_full()}'s relationship to ${child.name_full()}?
subquestion: |
  Examples include: sister, brother, aunt, uncle, grandparent, or cousin.
  
  You can also enter things like Short-term guardian, or a relative's friend or parnter.
fields:
  - "Relationship to ${child.name_full()}": caregivers[i].relationship
    maxlength: 25
  - "Are they related to to ${child.name_full()} through blood or marriage?": caregivers[i].is_family
    datatype: yesnoradio
  - "Are they ${child.name_full()}'s short-term guardian?": caregivers[i].is_stg
    datatype: yesnoradio
---
id: any other caregivers
question: |  
  Are there any other adults that live with ${child.name_full()}?
subquestion: |
  So far you have told us about:

  % if  parents[0].address.known:  
  % if parent_lives_with_child():
  % if parents[0].lives_with_child:
  * ${ parents[0].name_full()}, Parent
  % endif
  % endif
  % if has_second_parent:
  % if parents[1].address.known:  
  % if parents[1].lives_with_child:
  * ${ parents[1].name_full()}, Parent
  % endif
  % endif
  % endif
  % endif    
  % for caregiver in caregivers:
  * ${caregiver.name_full()}, ${caregiver.relationship}
  % endfor 
  
  The forms have room for up to four adults that live with ${child.name_full()} at ${child.address.on_one_line(bare=True)}.

  **Note:** Be sure to list ${child.name_full()}'s parents, if any of them live with their child.  
fields:
  - "Any other adults?": caregivers.there_is_another
    datatype: yesnoradio
---
code: |
  def number_parents_live_with_child():
    total_parents = 0
  
    if has_legal_parent:
      if parents[0].address.known:  
        if parents[0].lives_with_child:
    	    total_parents += 1
    	if has_second_parent:
        if parents[1].address.known:  
            if parents[1].lives_with_child:
      	      total_parents += 1
    return total_parents

---
code: |
  if caregivers.number_gathered() >= (4 - number_parents_live_with_child() ):
    caregivers.there_is_another = False
---
id: is minor married
question: |  
  Is ${child.name_full()} married?
subquestion: |
  If ${child.name_full()} married, their spouse needs to have a chance to participate in the guardianship request case.
fields:
  - "Is ${child.name_full()} married?": minor_is_married
    datatype: yesnoradio
---
id: spouse name
sets: 
  - spouse.name.first
question: |
  Who is ${child.name_full()}'s spouse? 
fields:
  - code: |
      spouse.name_fields()
---
id: spouse address
question: |
  What is ${spouse.name_full()}'s current address?
fields:
  - Street address: spouse.address.address
    address autocomplete: True
  - Address line 2: spouse.address.unit
    required: False
  - City: spouse.address.city
  - State: spouse.address.state
    code: |
      states_list()
    default: IL
  - ZIP code: spouse.address.zip
    required: False
  - "I don't know ${spouse.name_full()}'s address.": spouse.address.known
    datatype: noyes
    disable others: True
---
code: |
  if spouse.number_gathered() == 1:
    spouse.there_is_another = False
---
id: any adult relatives
question: |  
  ${child.name_full()}'s adult relatives
subquestion: |
  % if caregivers.there_are_any or has_legal_parent:
  So far you have told us about: 

  % if has_legal_parent:
  * ${ parents[0].name_full()}, Parent
  % if has_second_parent:
  * ${ parents[1].name_full()}, Parent
  % endif
  % endif
  % for person in caregivers:
  % if person.is_family or person.is_stg:
  * ${person.name_full()}, ${person.relationship}
  % endif    
  % endfor
  
  % endif

  <div class="alert alert-info ilao-info" role="alert">
    <h6 class="alert-heading">Important information about notice and consent</h6>
    <p>You will need to notify or get consent from ${child.name_full()}'s other adult relatives and a short-term guardian, if any.<br>
    <ul>
    <li>Include ${child.name_full()}'s parents, adult brothers and sisters, and short-term guardian, if any.</li>
    <li>If ${child.name_full()} has none of those relatives or a short-term guardian, then you will need to list the adult relatives who are most closely related to them (for example, grandparents, aunts, and uncles).</li></ul></p>
  </div>

  The forms have room for up to ten adult relatives of ${child.name_full()}, including the adults that live with ${child.name_full()}.
fields:
  - "Any other adult relatives?": adult_relatives.there_are_any
    datatype: yesnoradio

---
code: |
  adult_relatives[i].name.first
  adult_relatives[i].relationship
  adult_relatives[i].address.known
  adult_relatives[i].agrees
  if not adult_relatives[i].address.known:
    adult_relatives[i].notice_by_publication  
  adult_relatives[i].notice_relationship
  if adult_relatives[i].knows_delivery_method:
    adult_relatives[i].hand_delivery
    adult_relatives[i].delivery_date
  adult_relatives[i].complete = True
---
sets: 
  - adult_relatives[i].name.first
id: adult relative name
question: |
  % if i == 0:
  Who is an adult relative of ${child.name_full()}?
  % else:
  Who is another adult relative of ${child.name_full()}?
  % endif
subquestion: |
  % if caregivers.there_are_any or adult_relatives.there_are_any or has_legal_parent:
  So far you have told us about: 

  % if has_legal_parent:
  * ${ parents[0].name_full()}, Parent
  % if has_second_parent:
  * ${ parents[1].name_full()}, Parent
  % endif
  % endif
  % for person in caregivers:
  % if person.is_family or person.is_stg:
  * ${person.name_full()}, ${person.relationship}
  % endif    
  % for x in range(adult_relatives.number() - 1):
  * ${adult_relatives[x].name_full()}, ${adult_relatives[x].relationship}
  % endfor
  % endfor
  
  % endif

  **Important:**

  * Include ${child.name_full()}'s parents, adult brothers and sisters, and short-term guardian, if any.
  * If ${child.name_full()} has none of those relatives or a short-term guardian, then list the adult relatives who are most closely related to them (for example, grandparents, aunts, and uncles).
fields:
  - code: |
      adult_relatives[i].name_fields()
---
id: adult relative relationship
question: |
  What is ${adult_relatives[i].name_full()}'s relationship to ${child.name_full()}?
fields:
  - Relationship to ${child.name_full()}: adult_relatives[i].relationship
    maxlength: 25
---
id: adult relative address
question: |
  What is ${adult_relatives[i].name_full()}'s current address?
fields:
  - Street address: adult_relatives[i].address.address
    address autocomplete: True
  - Address line 2: adult_relatives[i].address.unit
    required: False
  - City: adult_relatives[i].address.city
  - State: adult_relatives[i].address.state
    code: |
      states_list()
    default: IL
  - ZIP code: adult_relatives[i].address.zip
    required: False
  - "I don't know ${adult_relatives[i].name_full()}'s address.": adult_relatives[i].address.known
    datatype: noyes
    disable others: True
---
id: any other adult_relatives
question: |  
  Does ${child.name_full()} have any other adult relatives?
subquestion: |
  So far you have told us about:

  % if has_legal_parent:
  * ${ parents[0].name_full()}, Parent
  % if has_second_parent:
  * ${ parents[1].name_full()}, Parent
  % endif
  % endif
  % for person in caregivers:
  % if person.is_family or person.is_stg:
  * ${person.name_full()}, ${person.relationship}
  % endif    
  % endfor
  % for adult in adult_relatives:
  * ${adult.name_full()}, ${adult.relationship}
  % endfor

  **Important:**

  * Include ${child.name_full()}'s parents, adult brothers and sisters, and short-term guardian, if any.
  * If ${child.name_full()} has none of those relatives or a short-term guardian, then list the adult relatives who are most closely related to them (for example, grandparents, aunts, and uncles).
  
  The forms have room for up to ten adult relatives of ${child.name_full()}, including the adults that live with ${child.name_full()}.
fields:
  - "Any other adult relatives?": adult_relatives.there_is_another
    datatype: yesnoradio
---
code: |
  def number_caregivers_family_or_stg():

    total = 0
    for person in caregivers:
      if person.is_family or person.is_stg:
        total += 1
    return total

---
code: |  
  if adult_relatives.number_gathered() >= (10 - number_parents_live_with_child() - number_caregivers_family_or_stg()):
    adult_relatives.there_is_another = False
---
code: |
  def get_notice_parties():  
    temp_list = []

    if child.age_in_years() >= 14:
      child.relationship = "Minor age 14+"
      temp_list.append(child)
  
    if minor_is_married:
      temp_list.append(spouse)
    else:

      if has_legal_parent:
        temp_list.append(parents[0])
      	if has_second_parent:
          temp_list.append(parents[1]) 
      if caregivers.there_are_any:
        for caregiver in caregivers:
          temp_list.append(caregiver)    	  
      if adult_relatives.there_are_any:
        for x in range(adult_relatives.number() - 1):
          temp_list.append(adult_relatives[x])
    
    return temp_list
---
code: |
  def any_consent():

    if has_legal_parent:
      if parents[0].agrees:
        return True
      if has_second_parent:
        if parents[1].agrees:
          return True
      
    if minor_is_married:
      if spouse.agrees:
        return True
    else:
      if caregivers.there_are_any:
        for caregiver in caregivers:
          if caregiver.agrees:
            return True
      if adult_relatives.there_are_any:
        for x in range(adult_relatives.number() - 1):
          if adult_relatives[x].agrees:
            return True

    return False
---
code: |
  def any_publication():
 
    for person in relatives:
      if not person.address.known:
        return True

    return False

---
reconsider: True
code: |
  temp_list = []

  if minor_is_married:
    temp_list.append(spouse)
  else:
    if has_legal_parent:
      if not parents[0].is_dead:
        temp_list.append(parents[0])
    	if has_second_parent:
        if not parents[1].is_dead:
          temp_list.append(parents[1]) 
    if caregivers.there_are_any:
      for caregiver in caregivers:
        if caregiver.is_family or caregiver.is_stg:
          temp_list.append(caregiver)    	  
    if adult_relatives.there_are_any:
      for adult_relative in adult_relatives:
        temp_list.append(adult_relative)
  relatives = ALPeopleList("relatives", elements = temp_list )
  
  build_relatives_list = True
---
reconsider: True
code: |
  temp_list = []
  if child.age_in_years() >= 14:
    child.relationship = "Minor age 14+"
    temp_list.append(child)

  if minor_is_married:
    temp_list.append(spouse)
  else:
    if has_legal_parent:
      temp_list.append(parents[0])
    	if has_second_parent:
        temp_list.append(parents[1]) 
    if caregivers.there_are_any:
      for caregiver in caregivers:
        if caregiver.is_family or caregiver.is_stg:
          temp_list.append(caregiver)    	  
    if adult_relatives.there_are_any:
      for adult_relative in adult_relatives:
        temp_list.append(adult_relative)
  notice_parties = ALPeopleList("relatives", elements = temp_list )
  
  build_notice_parties = True

---
id: next steps
question: |
  Next steps
subquestion: |
  UPDATE

  Notice parties (NOT INCLUDING LAST ADULT RELATIVE WHY):

  % for party in get_notice_parties():
  * ${party.name_full()}, ${party.relationship}
  % endfor

  Caregivers:

  % for person in caregivers:
  * ${person.name_full()}, ${person.relationship}
  % endfor

  Adult relatives:
  
  % for adult in adult_relatives:
  * ${adult.name_full()}, ${adult.relationship}
  % endfor
 
continue button field: next_steps
---
id: guardian intro
continue button field: guardian_intro
question: |
  Information about the guardian
subquestion: |
  **UPDATE**

  The next screens will ask questions about you, the person who wants to be ${child.name_full()}'s guardian. If you want the court to appoint a co-guardian, you can enter their information as well.

  **Note:** You may have entered some of this information already if you live with or are related to ${child.name_full()}. It is important that it is included in both places.
---
id: user name
sets:
    - users[0].name.first
question:  |
  What is your name?
subquestion: |
  You will be listed on the court forms as the proposed guardian.
fields:
  - code: |
      users[0].name_fields()
---
id: user birthdate
question: |
  When were you born?
fields:
  - Birthdate: users[0].birthdate
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
---
id: guardian too young kick out
event: guardian_too_young
question: |
  Sorry
subquestion: |
  You must be at least 18 years old to be appointed as a guardian.
  
  Click **Back** if you made a mistake, or you can talk with a lawyer to discuss your options. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
buttons:
  - Exit: exit
  - Restart: restart
---
id: guardian willing and able
question: |
  Are you willing and able to act as guardian of ${child.name_full()}?
subquestion: |
  % if guardianship_type != "estate":
  A guardian of the **person** is responsible for ${child.name_full()}'s:

  * Safety,
  * Physical and emotional well-being,
  * Housing,
  * Education,
  * Nutrition, and
  * Medical care.
  % endif
  % if guardianship_type == "both":
  
  % endif
  % if guardianship_type != "person":
  A guardian of the **estate** is responsible for the care, management, and investment of ${child.name_full()}'s money and property.
  % endif
fields:
  - no label: users[0].is_willing
    datatype: yesnoradio
---
id: guardian not willing kick out
event: guardian_not_willing
question: |
  Sorry
subquestion: |
  % if guardianship_type == "person":
  You must be willing and able to be responsible for the health, welfare, and education of ${child.name_full()} to be appointed as guardian of the person.
  % endif
  % if guardianship_type == "both":
  [NEWLINE]
  % endif
  % if guardianship_type == "estate":
  You must be willing and able to be responsible for the care, management, and investment of ${child.name_full()}'s money and property to be appointed as guardian of the estate.
  % endif
  
  Click **Back** if you made a mistake, or you can talk with a lawyer to discuss your options. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
buttons:
  - Exit: exit
  - Restart: restart
---
id: user address
question: |
  What is your current address?
subquestion: |
  **Note:** This address will appear on your court papers.
fields:
  - Street address: users[0].address.address
    address autocomplete: True
  - Address line 2: users[0].address.unit
    required: False
  - City: users[0].address.city
  - State: users[0].address.state
    code: |
      states_list()
    default: IL
  - ZIP code: users[0].address.zip
    required: False
---
id: guardian job
question: |
  What is your current job?
subquestion: |
  If you are unemployed, retired, or receiving public benefits, you can enter that information.
fields:
  - Job: users[0].job
    maxlength: 50
---
id: guardian disabled
question: |
  Has a judge found you disabled and appointed you a Guardian?
subquestion: |
  It is up to the judge to decide how this might affect your ability to be appointed guardian of ${child.name_full()}.
fields:
  - no label: users[0].is_disabled
    datatype: yesnoradio
---
id: guardian negligent
question: |
  Have you been found to have neglected or abused any minor by DCFS or in court?
subquestion: |
  It is up to the judge to decide how this might affect your ability to be appointed guardian of ${child.name_full()}.
fields:
  - no label: users[0].found_negligent
    datatype: yesnoradio
---
id: any felony convictions
generic object: ALPeopleList
question: |
  % if i== 0:
  Do you have any felony convictions?
  % else: 
  Does ${x[i].name_full()} have any felony convictions?
  % endif
subquestion: |
  % if i== 0:
  You must list your felony convictions on your forms. It is up to the judge to decide how they might affect your ability to be appointed guardian of ${child.name_full()}.
  % else: 
  You must list ${x[i].name_full()}'s felony convictions on your forms. It is up to the judge to decide how they might affect ${x[i].name_full()}'s ability to be appointed guardian of ${child.name_full()}.
  % endif

  ${collapse_template(felony_conviction_help)}  
fields:
  - no label: x[i].has_felony_conviction
    datatype: yesnoradio
---
code: |
  users[0].felony_convictions[i].name.text
  users[0].felony_convictions[i].complete = True
---
id: info about first felony conviction
generic object: ALPeopleList
question: |
  % if i== 0:
  Information about your felony conviction
  % else: 
  Information about ${x[i].name_full()}'s felony conviction
  % endif  
subquestion: |
  % if i== 0:
  It is up to the judge to decide how they might affect your ability to be appointed guardian of ${child.name_full()}.
  % else: 
  It is up to the judge to decide how they might affect ${x[i].name_full()}'s ability to be appointed guardian of ${child.name_full()}.
  % endif

  ${collapse_template(felony_conviction_help)}
fields:
  - Date of conviction: x[i].felony_convictions[0].date
    datatype: ThreePartsDate
    alMax: ${ today().format("yyyy-MM-dd") }
    alMin: x[i].birthdate
  - Charge: x[i].felony_convictions[0].name.text
    maxlength: 40
---
id: info about other felony convictions
generic object: ALPeopleList
question: |
  % if i== 0:
  Information about a ${ ordinal(j) } felony conviction
  % else: 
  Information about ${x[i].name_full()}'s ${ ordinal(j) } felony conviction
  % endif 
subquestion: |
  % if i== 0:
  It is up to the judge to decide how they might affect your ability to be appointed guardian of ${child.name_full()}.
  % else: 
  It is up to the judge to decide how they might affect ${x[i].name_full()}'s ability to be appointed guardian of ${child.name_full()}.
  % endif

  ${collapse_template(felony_conviction_help)}
fields:
  - Date of conviction: x[i].felony_convictions[j].date
    datatype: ThreePartsDate
    alMin: ${ x[i].birthdate.format("yyyy-MM-dd") }
    alMax: ${ today().format("yyyy-MM-dd") }
  - Charge: x[i].felony_convictions[j].name.text
    maxlength: 40
---
template: felony_conviction_help
subject: |
  **What will the judge consider?**
content: |  
  A person with a felony conviction that involves harm or threat to a minor cannot be appointed guardian of a minor.
  
  If that person has a felony conviction that does not involve harm or threat to a minor, they may still be appointed if the judge finds it to be in the minor's best interest.
---
id: any other felony convictions
generic object: ALPeopleList
question: |
  % if i== 0:
  Do you have any other felony convictions?
  % else: 
  Does ${x[i].name_full()} have any other felony convictions?
  % endif 
subquestion: |
  So far you have told us about:

  % for conviction in x[i].felony_convictions:
  * Date of conviction: ${conviction.date}, Charge: ${conviction.name.text}
  % endfor  

  The forms have room for up to three felony convictions.
fields:
  - "Any other felony convictions?": x[i].felony_convictions.there_is_another
    datatype: yesnoradio
---
code: |
  if users[0].felony_convictions.number_gathered() >= 3:
    users[0].felony_convictions.there_is_another = False
---
id: your contact information
question: |
  What is your contact information?
subquestion: |
  The court or other parties might need to contact you about this case.

  **This information will appear on your court forms.**
  
  If you do not want to list a phone number on your forms, leave it blank.

  If you have an email address, you must list it. Be sure to check your email daily, otherwise you may miss important court documents or information about your case.

  ${ collapse_template(contact_info_help) }  
fields:  
  - Phone number: users[0].phone_number
    datatype: al_international_phone
    required: False
  - label: |
      Do you have an email address?
    field: users[0].has_email_address      
    datatype: yesnoradio
  - note: |
      This email address will appear on your court forms. Be sure to check 
      this email daily, otherwise you may miss important information about 
      your case.
    show if:
      variable: users[0].has_email_address
      is: True
  - Email address: users[0].email    
    datatype: email
    show if: 
      variable: users[0].has_email_address
      is: True
---
template: contact_info_help
subject: |
  **What if I don't want to list my email address?**
content: |  
  If you do not want to enter your personal email address, you can create a new email account to get email about your case.
  
  To make a new email account try one of these email services:
  
  * [**Gmail**](https://accounts.google.com/SignUp)
  * [**Outlook**](https://outlook.live.com/owa/?nlp=1&signup=1)
  * [**Yahoo**](https://login.yahoo.com/account/create?.lang=en-US&.intl=us)
---
id: guardian contact information
question: |
  What is ${users[1].name_full()}'s contact information?
subquestion: |
  The court or other parties might need to contact them about this case.

  **This information will appear on the court forms.**
  
  If ${users[1].name_full()} does not want to list a phone number on the forms, leave it blank.

  If ${users[1].name_full()} has an email address, they must list it. They should check their email daily, otherwise they may miss important court documents or information about their case.

  ${ collapse_template(co_guardian_contact_info_help) }  
fields:  
  - "${users[1].name_full()}'s phone number": users[1].phone_number
    datatype: al_international_phone
    required: False
  - label: |
      Does ${users[1].name_full()} have an email address?
    field: users[1].has_email_address      
    datatype: yesnoradio
  - note: |
      This email address will appear on the court forms. They should check 
      this email daily, otherwise they may miss important information about 
      the case.
    show if:
      variable: users[1].has_email_address
      is: True
  - "${users[1].name_full()}'s email address": users[1].email    
    datatype: email
    show if: 
      variable: users[1].has_email_address
      is: True
---
template: co_guardian_contact_info_help
subject: |
  **What if ${users[1].name_full()} doesn't want to list their email address?**
content: |  
  If ${users[1].name_full()} does not want to enter their personal email address, they can create a new email account to get email about the case.
  
  To make a new email account try one of these email services:
  
  * [**Gmail**](https://accounts.google.com/SignUp)
  * [**Outlook**](https://outlook.live.com/owa/?nlp=1&signup=1)
  * [**Yahoo**](https://login.yahoo.com/account/create?.lang=en-US&.intl=us)
---
id: add co-guardian
question: |
  Do you want someone to be a co-guardian of ${child.name_full()} with you? 
fields:
  - no label: add_co_guardian
    datatype: yesnoradio
---
id: co-guardian name
sets:
    - users[1].name.first
question:  |
  Who do you want to be co-guardian?
fields:
  - code: |
      users[1].name_fields()
---
id: co-guardian birthdate
question: |
  When was ${users[1].name_full()} born?
fields:
  - Birthdate: users[1].birthdate
    datatype: BirthDate
    alMax: ${ today().format("yyyy-MM-dd") }
---
id: co-guardian too young kick out
continue button field: co_guardian_too_young
question: |
  Sorry
subquestion: |
  A person must be at least 18 years old to be appointed as a co-guardian.
  
  Click **Back** if you made a mistake, or click **Next** to continue making forms for you as the guardian.
---
id: co-guardian willing and able
question: |
  Is ${users[1].name_full()} willing and able to act as co-guardian of ${child.name_full()}?
subquestion: |
  % if guardianship_type != "estate":
  A co-guardian of the **person** is responsible for ${child.name_full()}'s:

  * Safety,
  * Physical and emotional well-being,
  * Housing,
  * Education,
  * Nutrition, and
  * Medical care.
  % endif
  % if guardianship_type == "both":
  
  % endif
  % if guardianship_type != "person":
  A co-guardian of the **estate** is responsible for the care, management, and investment of ${child.name_full()}'s money and property.
  % endif
fields:
  - no label: users[1].is_willing
    datatype: yesnoradio
---
id: co-guardian not willing kick out
continue button field: co_guardian_not_willing
question: |
  Sorry
subquestion: |
  % if guardianship_type == "person":
  ${users[1].name_full()} must be willing and able to be responsible for the health, welfare, and education of ${child.name_full()} to be appointed as co-guardian of the person.
  % endif
  % if guardianship_type == "both":
  [NEWLINE]
  % endif
  % if guardianship_type == "estate":
  ${users[1].name_full()} must be willing and able to be responsible for the care, management, and investment of ${child.name_full()}'s money and property to be appointed as co-guardian of the estate.
  % endif

  Click **Back** if you made a mistake, or click **Next** to continue making forms for you as the guardian.
---
id: co-guardian address
question: |
  What is ${users[1].name_full()}'s current address?
subquestion: |
  **Note:** This address will appear on your court papers.
fields:
  - Street address: users[1].address.address
    address autocomplete: True
  - Address line 2: users[1].address.unit
    required: False
  - City: users[1].address.city
  - State: users[1].address.state
    code: |
      states_list()
    default: IL
  - ZIP code: users[1].address.zip
    required: False
---
id: co-guardian job
question: |
  What is ${users[1].name_full()}'s current job?
subquestion: |
  If ${users[1].name_full()} is unemployed, retired, or receiving public benefits, you can enter that information.
fields:
  - ${users[1].name_full()}'s job: users[1].job
    maxlength: 50
---
id: co-guardian disabled
question: |
  Has a judge found ${users[1].name_full()} disabled and appointed a Guardian for them?
subquestion: |
  It is up to the judge to decide how this might affect ${users[1].name_full()}'s ability to be appointed guardian of ${child.name_full()}.
fields:
  - no label: users[1].is_disabled
    datatype: yesnoradio
---
id: co-guardian negligent
question: |
  Has ${users[1].name_full()} been found to have neglected or abused any minor by DCFS or in court?
subquestion: |
  It is up to the judge to decide how this might affect ${users[1].name_full()}'s ability to be appointed guardian of ${child.name_full()}.
fields:
  - no label: users[1].found_negligent
    datatype: yesnoradio
---
code: |
  users[1].felony_convictions[i].name.text
  users[1].felony_convictions[i].complete = True
---
code: |
  if users[1].felony_convictions.number_gathered() >= 3:
    users[1].felony_convictions.there_is_another = False
---
# the valid_co variable is used for show ifs on review screen entries
reconsider: True
code: |
  valid_co = valid_co_guardian()
---
id: oath intro
continue button field: oath_intro
question: |
  Oath required for guardianship
subquestion: |
  UPDATE
  Explain next screens will lay out terms of G of P and/or Estate

  If ESTATE then BOND - see instructions

  Download form, IF CO-GUARDIAN E-SIGN Oath, & bring to court
---
id: oath person check
question: |
  % if valid_co_guardian():
  Do you and ${ users[1].name_full() } agree to the terms of guardianship of the person?
  % else:
  Do you agree to the terms of guardianship of the person?
  % endif
subquestion: |
  % if valid_co_guardian():
  UPDATE You and ${ users[1].name_full() }:
  % else:
  UPDATE You:
  % endif

  TERMS of guardianship PERSON

fields:
  - no label: oath_person_agree
    datatype: yesnoradio
---
id: oath estate check
question: |
  % if valid_co_guardian():
  Do you and ${ users[1].name_full() } agree to the terms of guardianship of the estate?
  % else:
  Do you agree to the terms of guardianship of the estate?
  % endif
subquestion: |
  % if valid_co_guardian():
  UPDATE You and ${ users[1].name_full() }:
  % else:
  UPDATE You:
  % endif

  TERMS of guardianship ESTATE

fields:
  - no label: oath_estate_agree
    datatype: yesnoradio
---
id: oath required kick out
event: oath_required
question: |
  Sorry
subquestion: |
  % if valid_co_guardian():
  UPDATE You and ${ users[1].name_full() } must
  % else:
  UPDATE You must
  % endif
  
  USE logic to include info about person & estate & both - or separate screens?

  Click **Back** if you made a mistake, or you can talk with a lawyer to discuss your options. Use **[Get Legal Help](https://www.illinoislegalaid.org/get-legal-help)** to find free or low-cost legal services in your area.
buttons:
  - Exit: exit
  - Restart: restart
---
id: bond info
continue button field: bond_info
question: |
  Bond required for guardianship of estate
subquestion: |
  UPDATE

  Explain process and guess at amount based on minor info
---
code: |
  def valid_co_guardian():
  
    if add_co_guardian:
      if users[1].age_in_years() >= 18:
        if users[1].is_willing:
  	      return True
  	  return False
    else:
      return False
---
id: notice relationship
generic object: ALPeopleList
question: |
  Choose a relationship for Notice
subquestion: |
  The Notice court forms ask for different information than the *${ form_name}*.

  You told us that ${x[i].name_full()} is ${ child.name_full()}'s ${x[i].relationship}. Pick the option that fits.
fields:
  - "${x[i].name_full()} is": x[i].notice_relationship
    input type: radio
    choices: 
      - "${ child.name_full()}'s **sibling** who is at least 18 years old": sibling
      - "Some **other adult**, not ${ child.name_full()}'s parent or sibling, who has had legal or physical custody of ${ child.name_full()}": custody
      - "A person with a **different relationship** to ${ child.name_full() }": other
  - "Other relationship": x[i].other_notice_relationship
    maxlength: 40
    show if:
      variable: x[i].notice_relationship
      is: "other"
---
id: notice agrees
generic object: ALIndividual
question: |
  Does ${x.name_full()} agree to the guardianship of ${ child.name_full()}?
subquestion: |
  If ${x.name_full()} agrees to the guardianship, they will have to sign a CONSENT and APPEARANCE form that they can file with the court. Alternatively, they can give their consent in court.

  If they do not agree, or if you do not know, you will have to send them notice of the guardianship. 
 
  UPDATE: The Consent & Appearance must be signed in front of a notary public, filed. You can download a form that you can give them at the end of this program.

  **Note:** UPDATE Be sure that they agree. If they do not agree and file a CONSENT, you will have to give them notice of the guardianship some other way.

  UPDATE - If you do not know, select **No**.
fields:
  - "Does ${x.name_full()} agree to the guardianship?": x.agrees
    datatype: yesnomaybe
---
id: minor 14 agrees
question: |
  Does ${child.name_full()} agree to the guardianship?
subquestion: |
  Since ${child.name_full()} is at least 14 years old, they can participate in the court case.
  
  If ${child.name_full()} agrees to the guardianship, they can fill out Nomination. You can download the Nomination form at the end of this program.
  
  If they do not agree, or if you do not know, you will have to send them notice of the guardianship. 
  
  If you do not know, select **No**.
fields:
  - "Does ${child.name_full()} agree to the guardianship?": child.agrees
    datatype: yesnoradio
---
id: consent info
generic object: ALIndividual
continue button field: x.consent_info
question: |
  Consent and Appearance form information
subquestion: |
  Since you said that ${x.name_full() } agrees to the guardianship, they will have to sign a CONSENT and APPEARANCE form that you file with your Petition. Alternatively, they can give their consent in court.

  UPDATE: The Consent & Appearance must be signed in front of a notary public, filed

  **Note:** Be sure that they agree. If they do not agree and file a CONSENT, you will have to give them notice of the guardianship some other way.  

  You can download the form at the end of this program.
---
depends on:
  - trial_court_index
  - cook_district
code: |
  if trial_court_index == -1:
    trial_court = court_list.as_court('trial_court', cook_district)
  else:
    trial_court = court_list.as_court('trial_court', trial_court_index)
    
  court_name = str(trial_court.name)
  court_street_address = str(trial_court.address.address)
  court_city = str(trial_court.address.city)
  court_state = str(trial_court.address.state)
  court_zip = str(trial_court.address.zip)
  courthouse_info = court_name + ", " + court_street_address + ", " + court_city + ", " + court_state

---
id: Cook County district
question: |
  In which Cook County courthouse will you file your case?
subquestion: |
  If you are not sure, visit **[Illinois Court Help](https://www.ilcourthelp.gov/)**, or you can call or text (833) 411-1121 for assistance.
field: cook_district
choices:
  - First Municipal District, Daley Center, 50 W. Washington Street, Chicago: 15
  - Second Municipal District, 5600 Old Orchard Road, Skokie: 16
  - Third Municipal District, 2121 Euclid Avenue, Rolling Meadows: 17
  - Fourth Municipal District, 1500 Maybrook Drive, Maywood: 18
  - Fifth Municipal District, 10220 S. 76th Avenue, Bridgeview: 19
  - Sixth Municipal District, 16501 South Kedzie Parkway, Markham: 20
---
id: knows delivery method
generic object: ALIndividual
question: |
  Do you know **how** and **when** you will send your forms to ${ x.name_full() }?
subquestion: |
  ${ collapse_template(delivery_method_help) }  

  You must deliver the *Petition for Guardianship of a Minor* and the *Notice of Hearing* at least 7 days before the court date. You must use the options below to deliver documents. You cannot use email. 

  If you do not know this now, you can add it to the Proof of Delivery section of your forms later.
fields:
  - no label: x.knows_delivery_method
    datatype: radio
    choices:
      - Yes: True
      - No. I do not know this now. I will add it to my forms later.: False
---
template: delivery_method_help
subject: |
  **What are my delivery options?**
content: |  
  You can deliver the forms by:
  
  * Personal hand delivery, or
  * US mail or a delivery company (like UPS or FedEx), with postage or delivery prepaid.

  If you are in a prison or jail, you can deliver by mail.
---
id: all party delivery method
generic object: ALIndividual
question: |
  How will you send your forms to ${ x.name_full() }?
subquestion: |
  You must deliver your forms by hand, by mail, through a delivery company. You cannot use email.
  
  If you do not know this now, be sure to add it to the Proof of Delivery section of your forms later.
fields:
  - "I will personally **hand-deliver** the forms. **Note:** You can only deliver to the person or to their family member who is age 13 or older at their home.": x.hand_delivery
    datatype: yesnowide
    required: False
  - I will send the forms by **US mail or a delivery company** (like UPS or FedEx).: x.mail_delivery
    datatype: yesnowide
    required: False
  - Street address or intersection of mailbox or delivery company: x.delivery_mail_address
    maxlength: 40
    js show if: 
      val("x.mail_delivery") == true
    required: False
  - City of mailbox or delivery company: x.delivery_mail_city
    maxlength: 30
    js show if: 
      val("x.mail_delivery") == true
    required: False
  - State of mailbox or delivery company: x.delivery_mail_state
    code: |
      states_list()
    js show if: 
      val("x.mail_delivery") == true
    required: False
  - I will send the forms by mail from a **prison or jail**.: x.jail_delivery
    datatype: yesnowide
    required: False
  - note: |
      Enter prison or jail information
    js show if: 
      val("x.jail_delivery") == true
  - Name of prison or jail: x.delivery_jail_name
    maxlength: 40
    js show if: 
      val("x.jail_delivery") == true
    required: False
  - Street address: x.jail_delivery_address.address
    address autocomplete: True
    js show if: 
      val("x.jail_delivery") == true
    required: False
  - Address line 2: x.jail_delivery_address.unit
    js show if: 
      val("x.jail_delivery") == true
    required: False
  - City: x.jail_delivery_address.city
    js show if: 
      val("x.jail_delivery") == true
    required: False
  - State: x.jail_delivery_address.state
    code: |
      states_list()
    js show if: 
      val("x.jail_delivery") == true
    required: False
  - ZIP code: x.jail_delivery_address.zip
    js show if: 
      val("x.jail_delivery") == true
    required: False
---
id: delivery time
generic object: ALIndividual
question: |
  When will you send your forms to ${ x.name_full() }?
subquestion: |
  **Remember:** You must send the *Petition for Guardianship of a Minor* and the *Notice of Hearing* at least 7 days before the court date.

  If you do not know this now, be sure to add it to your forms later.
fields:
  - Date: x.delivery_date
    datatype: date
    required: False
    min: ${ today() }
    max: ${ today().plus(years=1) }
  - Time: x.delivery_time
    datatype: time
    required: False
validation code: |
  if (not showifdef('x.delivery_date')):
    x.knows_delivery_date = False
  else:
    x.knows_delivery_date = True
  if (not showifdef('x.delivery_time')):
    x.knows_delivery_time = False
  else:
    x.knows_delivery_time = True
---
id: hand delivery info
continue button field: hand_delivery_info
question: |
  Check the Proof of Delivery section of your forms
subquestion: |
  UPDATE this page and the package with a NEW .png snip from the guardianship Notice
  
  **Don't forget!** Make sure you review and complete the Proof of Delivery section of your forms. 
  
  [FILE proof_of_delivery_snip_sep_2025.png, 100%, Proof of Delivery section of forms]

  **Instructions when delivering your forms by hand:**

  You can hand-deliver the forms to a person or to their family member who is 13 or older at their home.
---
id: notice options for unknown address
generic object: ALIndividual
question: |
  Notice by publication
subquestion: |
  If you do not know ${x.name_full()}'s address now, you an add it to your forms later. They must receive notice of the guardianship at least **7 days** before the court hearing.
  
  If you cannot find ${x.name_full()}'s address, you will have to give them notice of the guardianship by publishing in a newspaper.

  EXPLAIN You will need to show the judge that you tried to find them by filling out a STATEMENT.

  EXPLAIN To give notice by newspaper, the process is X, Y, Z and must run for # of weeks.
continue button field: x.notice_by_publication
---
id: filing intro
continue button field: filing_intro
question: |
  Filing your forms and next steps
subquestion: |
  Next screens will help prepare your forms for filing. They will also explain the next steps. More information can be found in the instructions you can download at the end of this program.

  IF MINOR >=14:
  Must be notified or consent. They can also nominate. Next screens will help you make the right forms.
  
  Notice is done differently depending on where you file. Usually you can deliver in person or send by certified mail. Must be given notice seven days before hearing. If you do not know address of people, you will have to post notice in newspaper.

  If any parents or relatives agree to the guardianship, they can sign a CONSENT & APPEARANCE form. If they do & file with court, then you do not need to give them notice.


---
id: filing county
question: |
  In which county will you file your *${ form_name }*?
subquestion: |
  You should file in the county where ${child.name_full()} lives.
fields:
  - County: trial_court_index
    datatype: integer
    code: |
      court_county_lookup()
---
code: |
  def court_county_lookup(lowercase=False):
    all_court_counties = court_list._load_courts()['address_county'].items()
    filtered_courts = [(-1, "cook")] if lowercase else [(-1, "Cook")]
    for court in all_court_counties:
      if court[1] != "Cook":
        court_name = court[1].lower() if lowercase else court[1]
        filtered_courts.append((court[0],court_name))
    return sorted( filtered_courts, key=lambda y: y[1])
---
depends on:
  - trial_court_index
code: |
  if trial_court_index == -1:
    trial_court = court_list.as_court('trial_court', 15)
    trial_court.address.county = "Cook"
  else:
    trial_court = court_list.as_court('trial_court', trial_court_index)
---
id: notice intro
continue button field: notice_intro
question: |
  Notify parents and relatives of guardianship
subquestion: |
  UPDATE with info from instructions

  Must give notice to these people. INCLUDE minor if age 14+.

  Notice is done differently depending on where you file. Usually deliver in person or send by certified mail. Must be given notice seven days before hearing. If you do not know address of people, you will have to post notice in newspaper.

  If any parents or relatives agree to the guardianship, they can sign a CONSENT & APPEARANCE form. If they do & file with court, then you do not need to give them notice.

  The next screens will ask questions that will help you figure out who needs to be informed and how you can give them notice or get their consent. At the end of this program, you can download forms and instructions to guide you through the next steps.

---
id: hearing scheduled
question: |
  Do you already have a court date scheduled for your Guardianship hearing?
subquestion: |
  In some counties, the circuit clerk can give you a hearing date before you file your petition. In other counties, you will get a hearing date when you file your petition. If you have this information now, you can add it to your forms.
  
  If the clerk gives you the hearing date after you file your *${form_name}*, you can add it to your Notice forms later. 
  
  **Note:** Be sure to add the hearing information to your *Notice of Hearing on Petition for Guardianship of a Minor* before you send it to other parties in your case.
fields:
  - "Know court date and time?": has_court_date
    datatype: yesnoradio
---
id: hearing info
question: |
  Court hearing date and time
subquestion: |
  Enter the date and time of the court hearing.

  If you do not have this information now, you can click **Back** and change your answer.

  **Note:** Be sure to add the hearing information to your *Notice of Hearing on Petition for Guardianship of a Minor* before you send it to other parties in your case.
fields:
  - Hearing date: hearing_date
    datatype: date
    min: ${ today().format("yyyy-MM-dd") }
  - Hearing time: hearing_time
    datatype: time
---
id: hearing appearance info
question: |
  How to attend the court hearing
subquestion: |
  Your court date could be in person, by phone, or by video. If your court date is by phone or video, it is called a "Remote Appearance."
  
  Enter the court date details below. If the clerk did not give you this information yet, leave it blank. You can add it to the *Notice of Hearing on Petition for Guardianship of a Minor* after you file your petition.
  
  **Note:** Be sure to add the hearing information to your *Notice of Hearing on Petition for Guardianship of a Minor* before you send it to other parties in your case.

  ${ collapse_template(hearing_info_help) }  
fields:
  - Courtroom number: courtroom
    maxlength: 10
    required: False
  - How to attend court (check all that apply): attend_court
    datatype: checkboxes
    choices:
      - In person: in_person
      - Remotely: remote
    none of the above: |
      I don't know. I will add this to my forms later.
  - Video conference website (URL): remote_website
    maxlength: 100
    input type: area
    rows: 2
    required: False
    show if:
      variable: attend_court['remote']
      is: True
  - Video conference log-in information (Meeting ID, password, etc.): remote_login
    maxlength: 100
    input type: area
    rows: 2
    required: False
    show if:
      variable: attend_court['remote']
      is: True
  - Call-in phone number for remote appearance: remote_phone
    datatype: al_international_phone
    required: False
    show if:
      variable: attend_court['remote']
      is: True

---
template: hearing_info_help
subject: |
  **See where to put hearing information on your forms**
content: |  
  You can put information on how to attend court on the bottom of page 1 of the *Notice of Hearing on Petition for Guardianship of a Minor*. If needed, you can also put it on the *Minor Guardianship Publication Information for Newspaper*.

  We will add the courtroom address to your forms. To get the other information, contact your Circuit Clerk. You can look up how to contact them using [**Find Your Court**](https://www.illinoiscourts.gov/courts-directory/interactive-map/by-court-type/) on the Illinois Courts website.
  
  [FILE guardianship_hearing.png, 100%, Notice of Hearing Court Date Information example]
---
id: e-signature
question: |
  Do you want to add your e-signature to your forms?
subquestion: |
  **UPDATE THIS PAGE**
  
  This program can put “**/s/ ${users[0].name_full()}**” where you would sign your name. The court will accept this as your signature.

  If you do not add your **{e-signature}** now, you must sign your paper forms before you file and deliver them.

  <div class="alert alert-info ilao-info" role="alert">
    <h6 class="alert-heading">What it means to sign your forms</h6>
    <p>By signing the <i>Motion</i> and <i>Notice of Court Date for Motion</i> forms, you are certifying that:</p>
    <p><ul>
      <li>You read the document,</li>
      <li>You have been informed and believe it is true and correct, and</li>
      <li>You are not filing it to cause delay or for another bad reason.</li>
    </ul></p>
    <p>See the <a href="https://ilcourtsaudio.blob.core.windows.net/antilles-resources/resources/9ce1fce9-895f-463e-b87d-f9b7631f8fde/Rule%20137.pdf"><b>Illinois Supreme Court Rule 137</b></a> for more information.</p>
    <p>By signing the Proof of Delivery section of your forms, you are certifying that:</p>
    <p><ul>
      <li>Everything on the forms is true and correct, or you have been informed or believe it to be true and correct, and</li>
      <li>You understand that making a false statement on the forms is perjury and has penalties provided by law.</li>    </ul></p>
  <p>See the <a href="https://www.ilga.gov/legislation/ilcs/documents/073500050k1-109.htm"><b>Illinois Code of Civil Procedure, 735 ILCS 5/1-109</b></a> for more information.</p>
  </div>
fields:
  - "Add e-signature?": e_signature
    datatype: yesnoradio
terms:
  - "e-signature": |
      An e-signature is an electronic signature. It is a digital version of a signature that has the same effect as a hand-written signature.
---
id: forms assembling
continue button field: forms_assembling
question: |
  Almost done
subquestion: |
  After you click **Next**, it may take a few moments to finish making your forms.
  
  ###### You do not need to refresh your screen. Hang in there!
  
  [NEWLINE]
---
id: get docs screen
event: get_docs_screen
question: |
  Download
subquestion: |
  
  Your forms are ready. View and download your forms below. Click **:edit: Make changes** to fix any mistakes.
  
  This program **does not file** your forms with the court or deliver them to other parties in your case. You will need to do this yourself. Learn about [**e-filing in Illinois**](https://www.illinoiscourts.gov/eservices/information-for-filers-without-lawyers).

  ${ action_button_html(url_action('review_answers'), label=':edit: Make changes', color='success', size="md") }
  
  ${ al_user_bundle.download_list_html() }

  [NEWLINE]

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

  **Note:** This program **does not file** your forms with the court or deliver them to other parties in your case. Learn about [**e-filing in Illinois**](https://www.illinoiscourts.gov/eservices/information-for-filers-without-lawyers).
  
  Thank you for using ILAO Easy Forms!
under: |
  % if not user_logged_in():
  [${fa_icon("sign-in-alt", color="#0079d0", size="sm")} **Sign-in**](${url_of('login', next=interview_url())}) or [**create**](${url_of('register', next=interview_url())}) an ILAO Easy Form account to save your progress (optional).
  % endif 

  &nbsp;
  ${ action_button_html(interview_url(i="docassemble.ILAO:feedback.yml", easy_form_interview=ilao_easy_form_url, easy_form_title=ilao_easy_form_title, easy_form_page=current_context().question_id, easy_form_variable=current_context().variable, local=False,reset=1), label=':comment: Was this program helpful?', color="#181c36", size="md", new_window=True) }
---
generic object: ALDocumentBundle
template: x.send_email_template
subject: |
  Guardianship of a minor forms
content: |
  Your forms are attached.
  
  Thanks for using ILAO Easy Forms!
  
  [Illinois Legal Aid Online](https://www.illinoislegalaid.org)

---
objects:
  - instructions: ALDocument.using(title="Instructions", filename="instructions.pdf", has_addendum=False)
  - petition: ALDocument.using(title="Petition", filename="petition_for_guardianship.pdf", has_addendum=False)
  - additional_relatives: ALDocument.using(title="Additional Relatives", filename="additional_relatives.pdf", has_addendum=False)
  - additional_cases: ALDocument.using(title="Additional Cases", filename="additional_cases.pdf", has_addendum=False)
  - oath: ALDocument.using(title="Oath of Guardian", filename="oath_of_guardian.pdf", has_addendum=False)
  - oath_co_guardian: ALDocument.using(title="Oath of Co-Guardian", filename="oath_of_co_guardian.pdf", has_addendum=False)
  - oath_and_bond: ALDocument.using(title="Oath and Bond of Guardian", filename="oath_of_guardian.pdf", has_addendum=False)
  - oath_and_bond_co_guardian: ALDocument.using(title="Oath and Bond of Co-Guardian", filename="oath_of_co_guardian.pdf", has_addendum=False)
  - consent: ALDocument.using(title="Consent and Appearance (optional, use one for each adult who agrees)", filename="consent_and_appearance.pdf", has_addendum=False)
  - nomination: ALDocument.using(title="Nomination", filename="nomination.pdf", has_addendum=False)
  - notice: ALDocument.using(title="Notice of hearing", filename="notice.pdf", has_addendum=False)
  - additional_proof_of_delivery: ALDocument.using(title="Additional Proof of Delivery", filename="additional_proof_of_delivery.pdf", has_addendum=False)
  - statement: ALDocument.using(title="Statement for newspaper publication (optional, use one for each adult who can't be found)", filename="statement_for_publication.pdf", has_addendum=False)    
  - publication_letter: ALDocument.using(title="Newspaper publication letter (optional, use if needed)", filename="newspaper_publication_letter.pdf", has_addendum=False)    
  - order: ALDocument.using(title="Order", filename="order.pdf", has_addendum=False)
---
#This needs to be a generic object because the notice parties list entries point to entries in other lists.
generic object: ALIndividual
objects:
  - x.additional_proof: ALDocument.using(title="Additional Proof of Delivery", filename="additional_proof_of_delivery.pdf", has_addendum=False)
---
objects:
  - additional_delivery_bundle: ALDocumentBundle.using(elements=[], title= "Additional Proof of Delivery", filename="additional_proof_of_delivery.pdf", has_addendum=False)
---
reconsider: True
code: |
  #deliveries_to_bundle will be used as the elements for the additional_delivery_bundle object created in the above block. This is its initial definition for the Appearance.
  deliveries_to_bundle = []
  additional_delivery_bundle.enabled = False

  #enumerate allows us to reference the index in a for loop. This for loop appends each additional proof template to the deliveries_to_bundle object and sets the enabled trait for those templates.
  for index, party in enumerate(notice_parties):
    #If the index is 0 to 3, the party is included on the main notice form, and thus does not need to be added to additional proof of delivery
    if index < 4:
      party.additional_proof.enabled = False
    #Any index > 3 must go to an additional proof of delivery form
    elif index > 3:
      party.additional_proof.enabled = True
      additional_delivery_bundle.enabled = True
      deliveries_to_bundle.append(party.additional_proof)

  additional_delivery_bundle.elements = deliveries_to_bundle
  refresh_delivery_bundle = True
---
code: |
  instructions.enabled = True
  petition.enabled = True
  additional_relatives.enabled = False
  additional_cases.enabled = False
  oath.enabled = False
  oath_co_guardian.enabled = False
  oath_and_bond.enabled = False
  oath_and_bond_co_guardian.enabled = False
  consent.enabled = False
  nomination.enabled = False
  notice.enabled = False
  additional_proof_of_delivery.enabled = False
  statement.enabled = False
  publication_letter.enabled = False
  order.enabled = True
  
  if relatives.number() > 3:
    additional_relatives.enabled = True
  if other_case_involving_parents and other_cases.number() > 2:
    additional_cases.enabled = True

  if guardianship_type == "person":
    oath.enabled = True
    if add_co_guardian and valid_co_guardian():
      oath_co_guardian.enabled = True
  else:
    oath_and_bond.enabled = True
    if add_co_guardian and valid_co_guardian():
      oath_and_bond_co_guardian.enabled = True

  if any_consent():
    consent.enabled = True

  if child.age_in_years() >= 14:
    if child.agrees:
      nomination.enabled = True

  if relatives.number() > 0:
    notice.enabled = True

  if any_publication():
    statement.enabled = True
    publication_letter.enabled = True
---
objects:
  - petition_bundle: ALDocumentBundle.using(elements=[petition, additional_relatives, additional_cases], filename="petition_for_guardianship.pdf", title="Petition", enabled=True)
  - notice_bundle: ALDocumentBundle.using(elements=[notice, additional_delivery_bundle], filename="notice.pdf", title="Notice of Hearing", enabled=True)

---
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[instructions, petition_bundle, oath, oath_co_guardian, oath_and_bond, oath_and_bond_co_guardian, consent, nomination, notice_bundle, statement, publication_letter, order], filename="minor_guardianship_forms.pdf", title="All forms")
---
attachment:
  variable name: instructions[i]
  name: instructions
  filename: instructions
  skip undefined: True
  editable: False
  pdf template file: instructions.pdf
  fields:
      - "fake": ${ "" }
---
attachment:
  variable name: petition[i]
  name: petition
  filename: petition
  skip undefined: True
  editable: False
  pdf template file: petition_for_guardianship.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "case_number_2": ${ "" }
    - "case_number_3": ${ "" }
    - "case_number_4": ${ "" }
    - "case_number_5": ${ "" }
    - "case_number_6": ${ "" }
    - "case_number_7": ${ "" }
    - "child_name": ${ child.name_full() }
    - "guardianship_type_person": ${ True if guardianship_type == "person" else "" }
    - "guardianship_type_estate": ${ True if guardianship_type == "estate" else "" }
    - "guardianship_type_both": ${ True if guardianship_type == "both" else "" }
    - "child_name_2": ${ child.name_full() }
    - "child_dob": ${ child.birthdate }
    - "child_address": ${ child.address.on_one_line(bare=True) }
    - "caregiver_name_0": ${ caregivers[0].name_full() if caregivers.there_are_any else "" }
    - "caregiver_address_0": ${ child.address.on_one_line(bare=True) if caregivers.there_are_any else "" }
    - "caregiver_relationship_0": ${ caregivers[0].relationship if caregivers.there_are_any else "" }
    - "caregiver_name_1": ${ caregivers[1].name_full() if caregivers.there_are_any and caregivers.number() > 1 else "" }
    - "caregiver_address_1": ${ child.address.on_one_line(bare=True) if caregivers.there_are_any and caregivers.number() > 1 else "" }
    - "caregiver_relationship_1": ${ caregivers[1].relationship if caregivers.there_are_any and caregivers.number() > 1 else "" }
    - "caregiver_name_2": ${ caregivers[2].name_full() if caregivers.there_are_any and caregivers.number() > 2 else "" }
    - "caregiver_address_2": ${ child.address.on_one_line(bare=True) if caregivers.there_are_any and caregivers.number() > 2 else "" }
    - "caregiver_relationship_2": ${ caregivers[2].relationship if caregivers.there_are_any and caregivers.number() > 2 else "" }
    - "caregiver_name_3": ${ caregivers[3].name_full() if caregivers.there_are_any and caregivers.number() > 3 else "" }
    - "caregiver_address_3": ${ child.address.on_one_line(bare=True) if caregivers.there_are_any and caregivers.number() > 3 else "" }
    - "caregiver_relationship_3": ${ caregivers[3].relationship if caregivers.there_are_any and caregivers.number() > 3 else "" }
    - "relative_name_0": ${ relatives[0].name_full() if relatives.number() > 0 else "" }
    - "relative_address_0": ${ relatives[0].address.on_one_line(bare=True) if relatives.number() > 0 else "" }
    - "relative_relationship_0": ${ relatives[0].relationship if relatives.number() > 0 else "" }
    - "relative_name_1": ${ relatives[1].name_full() if relatives.number() > 1 else "" }
    - "relative_address_1": ${ relatives[1].address.on_one_line(bare=True) if relatives.number() > 1 else "" }
    - "relative_relationship_1": ${ relatives[1].relationship if relatives.number() > 1 else "" }
    - "relative_name_2": ${ relatives[2].name_full() if relatives.number() > 2 else "" }
    - "relative_address_2": ${ relatives[2].address.on_one_line(bare=True) if relatives.number() > 2 else "" }
    - "relative_relationship_2": ${ relatives[2].relationship if relatives.number() > 2 else "" }
    - "relative_name_3": ${ relatives[3].name_full() if relatives.number() > 3 else "" }
    - "relative_address_3": ${ relatives[3].address.on_one_line(bare=True) if relatives.number() > 3 else "" }
    - "relative_relationship_3": ${ relatives[3].relationship if relatives.number() > 3 else "" }
    - "more_relatives_no": ${ True if relatives.number()<= 4 else "" }
    - "more_relatives_yes": ${ True if relatives.number() > 4 else "" }
    - "other_case_number_0": ${ other_cases[0].name.text if other_case_involving_parents and other_cases.number > 0 else "" }
    - "other_case_state_0": |
        % if other_case_involving_parents and other_cases.number > 0:
        % if other_cases[0].in_us:
        ${state_name(other_cases[0].state)}
        % else:  
        ${country_name(other_cases[0].non_us_country)}
        % endif
        % else:
        ${ "" }    
        % endif 
    - "other_case_il_county_0": |
        % if other_case_involving_parents and other_cases.number > 0:
        % if other_cases[0].in_us and other_cases[0].state == "IL":
        ${ other_cases[0].county } County
        % else:  
        ${ "" }
        % endif 
        % else:  
        ${""}
        % endif         
    - "other_case_number_1": ${ other_cases[1].name.text if other_case_involving_parents and other_cases.number > 1 else "" }
    - "other_case_state_1": |
        % if other_case_involving_parents and other_cases.number > 1:
        % if other_cases[1].in_us:
        ${state_name(other_cases[1].state)}
        % else:  
        ${country_name(other_cases[1].non_us_country)}
        % endif
        % else:
        ${ "" }    
        % endif 
    - "other_case_il_county_1": |
        % if other_case_involving_parents and other_cases.number > 1:
        % if other_cases[1].in_us and other_cases[0].state == "IL":
        ${ other_cases[1].county } County
        % else:  
        ${ "" }
        % endif 
        % else:  
        ${""}
        % endif         
    - "more_cases_no": ${ True if not other_case_involving_parents or (other_case_involving_parents and other_cases.number <= 2) else "" }
    - "more_cases_yes": ${ True if other_case_involving_parents and other_cases.number > 2 else "" }
    - "estate_unknown": ${ True if child_estate == "unknown" else "" }
    - "estate_0": ${ True if child_estate == "zero" else "" }
    - "estate_other": ${ True if child_estate == "other" else "" }
    - "estate_amount": ${ thousands(estate_value, show_decimals=True) if child_estate == "other" else "" }
    - "income_unknown": ${ True if child_income == "unknown" else "" }
    - "income_0": ${ True if child_income == "zero" else "" }
    - "income_other": ${ True if child_income == "other" else "" }
    - "income_amount": ${thousands(income_value, show_decimals=True) if child_income == "other" else ""}
    - "parent_name_0": ${ parents[0].name_full() if has_legal_parent else "" }
    - "parent_agrees_0": ${ True if has_legal_parent and parents[0].agrees else "" }
    - "parent_is_dead_0": ${ True if has_legal_parent and parents[0].is_dead else "" }
    - "parent_death_date_0": ${ parents[0].decease_date if has_legal_parent and parents[0].is_dead else "" }
    - "parent_gave_up_0": ${ True if has_legal_parent and parents[0].gave_up_custody else "" }
    - "parent_not_found_0": ${ True if has_legal_parent and parents[0].not_found else "" }
    - "parent_last_contact_date_0": ${ parents[0].last_contact_date if has_legal_parent and parents[0].not_found else "" }
    - "parent_last_contact_location_0": ${ parents[0].last_contact_location if has_legal_parent and parents[0].not_found else "" }
    - "parent_unable_0": ${ True if has_legal_parent and parents[0].unable else "" }
    - "one_parent_cb": ${ True if has_legal_parent and parents.number() == 1 else "" }
    - "two_parents_cb": ${ True if has_legal_parent and has_second_parent else "" }
    - "parent_name_1": ${ parents[1].name_full() if has_legal_parent and has_second_parent else "" }
    - "parent_agrees_1": ${ True if has_legal_parent and has_second_parent and parents[1].agrees else "" }
    - "parent_is_dead_1": ${ True if has_legal_parent and has_second_parent and parents[1].is_dead else "" }
    - "parent_death_date_1": ${ parents[1].decease_date if has_legal_parent and has_second_parent and parents[1].is_dead else "" }
    - "parent_gave_up_1": ${ True if has_legal_parent and has_second_parent and parents[1].gave_up_custody else "" }
    - "parent_not_found_1": ${ True if has_legal_parent and has_second_parent and parents[1].not_found else "" }
    - "parent_last_contact_date_1": ${ parents[1].last_contact_date if has_legal_parent and has_second_parent and parents[1].not_found else "" }
    - "parent_last_contact_location_1": ${ parents[1].last_contact_location if has_legal_parent and has_second_parent and parents[1].not_found else "" }
    - "parent_unable_1": ${ True if has_legal_parent and has_second_parent and parents[1].unable else "" }
    - "child_agrees_no": ${ True if child.age_in_years() >= 14 and child.agrees == False else "" }
    - "child_agrees_yes": ${ True if child.age_in_years() >= 14 and child.agrees else "" }
    - "child_standby_no": ${ not previous_standby }
    - "child_standby_yes": ${ previous_standby }
    - "child_stg_no": ${ not current_stg }
    - "child_stg_yes": ${ current_stg }
    - "child_will_no": ${ not named_in_will }
    - "child_will_yes": ${ named_in_will }
    - "child_admin_no": ${ not immigration_separation }
    - "child_admin_yes": ${ immigration_separation }
    - "guardian_name": ${ users[0].name_full() }
    - "guardian_address": ${ users[0].address.on_one_line(bare=True) }
    - "guardian_age": ${ users[0].age_in_years() }
    - "guardian_job": ${ users[0].job }
    - "guardian_disabled_yes": ${ users[0].is_disabled }
    - "guardian_disabled_no": ${ not users[0].is_disabled }
    - "guardian_no_felonies": ${ not users[0].has_felony_conviction }
    - "guardian_yes_felonies": ${ users[0].has_felony_conviction }
    - "guardian_felony_date_0": ${ users[0].felony_convictions[0].date if users[0].has_felony_conviction else "" }
    - "guardian_felony_charge_0": ${ users[0].felony_convictions[0].charge if users[0].has_felony_conviction else "" }
    - "guardian_felony_date_1": ${ users[0].felony_convictions[1].date if users[0].has_felony_conviction and users[0].felony_convictions.number() > 1 else "" }
    - "guardian_felony_charge_1": ${ users[0].felony_convictions[1].charge if users[0].has_felony_conviction and users[0].felony_convictions.number() > 1 else "" }
    - "guardian_felony_date_2": ${ users[0].felony_convictions[2].date if users[0].has_felony_conviction and users[0].felony_convictions.number() > 2  else "" }
    - "guardian_felony_charge_2": ${ users[0].felony_convictions[2].charge if users[0].has_felony_conviction and users[0].felony_convictions.number() > 2 else "" }
    - "guardian_dcfs_yes": ${ users[0].found_negligent }
    - "guardian_dcfs_no": ${ not users[0].found_negligent }
    - "co_guardian_no": ${ True if not add_co_guardian or valid_co_guardian() == False else '' }
    - "co_guardian_yes": ${ True if add_co_guardian and valid_co_guardian() else '' }
    - "co_guardian_name": ${ users[1].name_full() if add_co_guardian and valid_co_guardian() else ""}
    - "co_guardian_address": ${ users[1].address.on_one_line(bare=True) if add_co_guardian and valid_co_guardian() else ""}
    - "co_guardian_age": ${ users[1].age_in_years() if add_co_guardian and valid_co_guardian() else ""}
    - "co_guardian_job": ${ users[1].job if add_co_guardian and valid_co_guardian() else ""}
    - "co_guardian_disabled_yes": ${ users[1].is_disabled if add_co_guardian and valid_co_guardian() else ""}
    - "co_guardian_disabled_no": ${ not users[1].is_disabled if add_co_guardian and valid_co_guardian() else ""}
    - "co_guardian_no_felonies": ${ not users[1].has_felony_conviction if add_co_guardian and valid_co_guardian() else ""}
    - "co_guardian_yes_felonies": ${ users[1].has_felony_conviction if add_co_guardian and valid_co_guardian() else ""}
    - "co_guardian_felony_date_0": ${ users[1].felony_convictions[0].date if add_co_guardian and valid_co_guardian() and users[1].has_felony_conviction else "" }
    - "co_guardian_felony_charge_0": ${ users[1].felony_convictions[0].charge if add_co_guardian and valid_co_guardian() and users[1].has_felony_conviction else "" }
    - "co_guardian_felony_date_1": ${ users[1].felony_convictions[1].date if add_co_guardian and valid_co_guardian() and users[1].has_felony_conviction and users[1].felony_convictions.number() > 1 else "" }
    - "co_guardian_felony_charge_1": ${ users[1].felony_convictions[1].charge if add_co_guardian and valid_co_guardian() and users[1].has_felony_conviction and users[1].felony_convictions.number() > 1 else "" }
    - "co_guardian_felony_date_2": ${ users[1].felony_convictions[2].date if add_co_guardian and valid_co_guardian() and users[1].has_felony_conviction and users[1].felony_convictions.number() > 2  else "" }
    - "co_guardian_felony_charge_2": ${ users[1].felony_convictions[2].charge if add_co_guardian and valid_co_guardian() and users[1].has_felony_conviction and users[1].felony_convictions.number() > 2 else "" }
    - "co_guardian_dcfs_yes": ${ users[1].found_negligent if add_co_guardian and valid_co_guardian() else ""}
    - "co_guardian_dcfs_no": ${ not users[1].found_negligent if add_co_guardian and valid_co_guardian() else ""}
    - "guardianship_type_person_2": ${ True if guardianship_type == "person" else "" }
    - "guardianship_type_estate_2": ${ True if guardianship_type == "estate" else "" }
    - "guardianship_type_both_2": ${ True if guardianship_type == "both" else "" }
    - "e_sign_name": ${ users[0].name_full() if e_signature else "" }
    - "user_name": ${ users[0].name_full() }
    - "for_self": ${ True }
    - "user_phone": ${ phone_number_formatted(users[0].phone_number) }
    - "user_email": ${ users[0].email if users[0].has_email_address else "" }
    - "user_address": ${ users[0].address.on_one_line(bare=True) }
---
attachment:
  variable name: additional_relatives[i]
  name: additional_relatives
  filename: additional_relatives
  skip undefined: True
  editable: False
  pdf template file: additional_relatives.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "child_name": ${ child.name_full() }
    - "relative_name_4": ${ relatives[4].name_full() }
    - "relative_address_4": ${ relatives[4].address.on_one_line(bare=True) }
    - "relative_relationship_4": ${ relatives[4].relationship }
    - "relative_name_5": ${ relatives[5].name_full() if relatives.number() > 5 else "" }
    - "relative_address_5": ${ relatives[5].address.on_one_line(bare=True) if relatives.number() > 5 else "" }
    - "relative_relationship_5": ${ relatives[5].relationship if relatives.number() > 5 else "" }
    - "relative_name_6": ${ relatives[6].name_full() if relatives.number() > 6 else "" }
    - "relative_address_6": ${ relatives[6].address.on_one_line(bare=True) if relatives.number() > 6 else "" }
    - "relative_relationship_6": ${ relatives[6].relationship if relatives.number() > 6 else "" }
    - "relative_name_7": ${ relatives[7].name_full() if relatives.number() > 7 else "" }
    - "relative_address_7": ${ relatives[7].address.on_one_line(bare=True) if relatives.number() > 7 else "" }
    - "relative_relationship_7": ${ relatives[7].relationship if relatives.number() > 7 else "" }
    - "relative_name_8": ${ relatives[8].name_full() if relatives.number() > 8 else "" }
    - "relative_address_8": ${ relatives[8].address.on_one_line(bare=True) if relatives.number() > 8 else "" }
    - "relative_relationship_8": ${ relatives[8].relationship if relatives.number() > 8 else "" }
    - "relative_name_9": ${ relatives[9].name_full() if relatives.number() > 9 else "" }
    - "relative_address_9": ${ relatives[9].address.on_one_line(bare=True) if relatives.number() > 9 else "" }
    - "relative_relationship_9": ${ relatives[9].relationship if relatives.number() > 9 else "" }
---
attachment:
  variable name: additional_cases[i]
  name: additional_cases
  filename: additional_cases
  skip undefined: True
  editable: False
  pdf template file: additional_cases.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "child_name": ${ child.name_full() }
    - "other_case_number_2": ${ other_cases[2].name.text if other_cases.number > 2 else "" }
    - "other_case_state_2": |
        % if other_cases.number > 2:
        % if other_cases[2].in_us:
        ${state_name(other_cases[2].state)}
        % else:  
        ${country_name(other_cases[2].non_us_country)}
        % endif
        % else:
        ${ "" }    
        % endif 
    - "other_case_il_county_2": |
        % if other_cases.number > 2:
        % if other_cases[2].in_us and other_cases[2].state == "IL":
        ${ other_cases[2].county } County
        % else:  
        ${ "" }
        % endif 
        % else:  
        ${""}
        % endif         
    - "other_case_number_3": ${ other_cases[3].name.text if other_cases.number > 3 else "" }
    - "other_case_state_3": |
        % if other_cases.number > 3:
        % if other_cases[3].in_us:
        ${state_name(other_cases[3].state)}
        % else:  
        ${country_name(other_cases[3].non_us_country)}
        % endif
        % else:
        ${ "" }    
        % endif 
    - "other_case_il_county_3": |
        % if other_cases.number > 3:
        % if other_cases[3].in_us and other_cases[3].state == "IL":
        ${ other_cases[3].county } County
        % else:  
        ${ "" }
        % endif 
        % else:  
        ${""}
        % endif
    - "other_case_number_4": ${ other_cases[4].name.text if other_cases.number > 4 else "" }
    - "other_case_state_4": |
        % if other_cases.number > 4:
        % if other_cases[4].in_us:
        ${state_name(other_cases[4].state)}
        % else:  
        ${country_name(other_cases[4].non_us_country)}
        % endif
        % else:
        ${ "" }    
        % endif 
    - "other_case_il_county_4": |
        % if other_cases.number > 4:
        % if other_cases[4].in_us and other_cases[4].state == "IL":
        ${ other_cases[4].county } County
        % else:  
        ${ "" }
        % endif 
        % else:  
        ${""}
        % endif
    - "other_case_number_5": ${ other_cases[5].name.text if other_cases.number > 5 else "" }
    - "other_case_state_5": |
        % if other_cases.number > 5:
        % if other_cases[5].in_us:
        ${state_name(other_cases[5].state)}
        % else:  
        ${country_name(other_cases[5].non_us_country)}
        % endif
        % else:
        ${ "" }    
        % endif 
    - "other_case_il_county_5": |
        % if other_cases.number > 5:
        % if other_cases[5].in_us and other_cases[5].state == "IL":
        ${ other_cases[5].county } County
        % else:  
        ${ "" }
        % endif 
        % else:  
        ${""}
        % endif
    - "other_case_number_6": ${ other_cases[6].name.text if other_cases.number > 6 else "" }
    - "other_case_state_6": |
        % if other_cases.number > 6:
        % if other_cases[6].in_us:
        ${state_name(other_cases[6].state)}
        % else:  
        ${country_name(other_cases[6].non_us_country)}
        % endif
        % else:
        ${ "" }    
        % endif 
    - "other_case_il_county_6": |
        % if other_cases.number > 6:
        % if other_cases[6].in_us and other_cases[6].state == "IL":
        ${ other_cases[6].county } County
        % else:  
        ${ "" }
        % endif 
        % else:  
        ${""}
        % endif
    - "other_case_number_7": ${ other_cases[7].name.text if other_cases.number > 7 else "" }
    - "other_case_state_7": |
        % if other_cases.number > 7:
        % if other_cases[7].in_us:
        ${state_name(other_cases[7].state)}
        % else:  
        ${country_name(other_cases[7].non_us_country)}
        % endif
        % else:
        ${ "" }    
        % endif 
    - "other_case_il_county_7": |
        % if other_cases.number > 7:
        % if other_cases[7].in_us and other_cases[7].state == "IL":
        ${ other_cases[7].county } County
        % else:  
        ${ "" }
        % endif 
        % else:  
        ${""}
        % endif
---
attachment:
  variable name: oath[i]
  name: oath
  filename: oath
  skip undefined: True
  editable: False
  pdf template file: oath.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "child_name": ${ child.name_full() }
    - "guardian_name": ${ users[0].name_full() }
    - "e_sign_name": ${ users[0].name_full() if e_signature else "" }
    - "user_name": ${ users[0].name_full() }
    - "for_self": ${ True }
    - "user_phone": ${ phone_number_formatted(users[0].phone_number) }
    - "user_email": ${ users[0].email if users[0].has_email_address else "" }
    - "user_address": ${ users[0].address.on_one_line(bare=True) }
---
attachment:
  variable name: oath_co_guardian[i]
  name: oath_co_guardian
  filename: oath_co_guardian
  skip undefined: True
  editable: False
  pdf template file: oath.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "child_name": ${ child.name_full() }
    - "guardian_name": ${ users[1].name_full() }
    - "user_name": ${ users[1].name_full() }
    - "for_self": ${ True }
    - "user_phone": ${ phone_number_formatted(users[1].phone_number) }
    - "user_email": ${ users[1].email if users[1].has_email_address else "" }
    - "user_address": ${ users[1].address.on_one_line(bare=True) }
---
attachment:
  variable name: oath_and_bond[i]
  name: oath_and_bond
  filename: oath_and_bond
  skip undefined: True
  editable: False
  pdf template file: oath_and_bond.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "case_number_2": ${ "" }
    - "child_name": ${ child.name_full() }
    - "guardian_name": ${ users[0].name_full() }
    - "estate_cb": ${ True if guardianship_type == "estate" else "" }
    - "both_cb": ${ True if guardianship_type == "both" else "" }
    - "e_sign_name": ${ users[0].name_full() if e_signature else "" }
    - "user_name": ${ users[0].name_full() }
    - "for_self": ${ True }
    - "user_phone": ${ phone_number_formatted(users[0].phone_number) }
    - "user_email": ${ users[0].email if users[0].has_email_address else "" }
    - "user_address": ${ users[0].address.on_one_line(bare=True) }
---
attachment:
  variable name: oath_and_bond_co_guardian[i]
  name: oath_and_bond_co_guardian
  filename: oath_and_bond_co_guardian
  skip undefined: True
  editable: False
  pdf template file: oath_and_bond.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "case_number_2": ${ "" }
    - "child_name": ${ child.name_full() }
    - "guardian_name": ${ users[1].name_full() }
    - "estate_cb": ${ True if guardianship_type == "estate" else "" }
    - "both_cb": ${ True if guardianship_type == "both" else "" }
    - "user_name": ${ users[1].name_full() }
    - "for_self": ${ True }
    - "user_phone": ${ phone_number_formatted(users[1].phone_number) }
    - "user_email": ${ users[1].email if users[1].has_email_address else "" }
    - "user_address": ${ users[1].address.on_one_line(bare=True) }
---
attachment:
  variable name: consent[i]
  name: consent
  filename: consent
  skip undefined: True
  editable: False
  pdf template file: consent_and_appearance.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "case_number_2": ${ "" }
    - "child_name": ${ child.name_full() }
    - "guardian_name": ${ users[0].name_full() }
    - "co_guardian_name": ${ users[1].name_full() if add_co_guardian and valid_co_guardian() else "" }
    - "guardianship_type_person": ${ True if guardianship_type == "person" else "" }
    - "guardianship_type_estate": ${ True if guardianship_type == "estate" else "" }
    - "guardianship_type_both": ${ True if guardianship_type == "both" else "" }
---
attachment:
  variable name: nomination[i]
  name: nomination
  filename: nomination
  skip undefined: True
  editable: False
  pdf template file: nomination.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "child_name": ${ child.name_full() }
    - "child_name_2": ${ child.name_full() }
    - "child_name_3": ${ child.name_full() }
    - "guardian_name": ${ users[0].name_full() }
    - "co_guardian_name": ${ users[1].name_full() if add_co_guardian and valid_co_guardian() else "" }
---
attachment:
  variable name: notice[i]
  name: notice
  filename: notice
  skip undefined: True
  editable: False
  pdf template file: notice.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "case_number_2": ${ "" }
    - "case_number_3": ${ "" }
    - "case_number_4": ${ "" }
    - "case_number_5": ${ "" }
    - "hearing_date": ${ hearing_date if (defined('hearing_date') and has_court_date) else '' }
    - "hearing_time": ${ format_time(hearing_time, format='h:mm') if (defined('hearing_time') and has_court_date) else '' }
    - "hearing_am_checkbox": ${ True if (has_court_date and format_time(hearing_time, format='a')=='AM') else '' }
    - "hearing_pm_checkbox": ${ True if (has_court_date and format_time(hearing_time, format='a')=='PM') else '' }
    - "hearing_courtroom": ${ courtroom if has_court_date else '' }
    - "in_person_cb": ${ attend_court['in_person'] }
    - "remote_cb": ${  attend_court['remote'] }
    - "remote_url": ${ remote_website if attend_court['remote'] == True else '' }
    - "remote_login": ${  remote_login.replace("\n", " ").replace("\r", " ") if attend_court['remote'] == True else ''}
    - "remote_phone": ${ phone_number_formatted(remote_phone) if attend_court['remote'] == True else '' }
    - "courthouse_address": |
        % if has_court_date:
        % if courtroom != "":          
        ${ courthouse_info + ", Room # " + courtroom }
        % endif
        % else:
        ${ courthouse_info }          
        % endif
    - "clerk_phone": ${ trial_court.phone }
    - "clerk_website": ${ trial_court.website }
    - "e_sign_name": ${ users[0].name_full() if e_signature else "" }
    - "user_name": ${ users[0].name_full() }
    - "for_self": ${ True }
    - "user_phone": ${ phone_number_formatted(users[0].phone_number) }
    - "user_email": ${ users[0].email if users[0].has_email_address else "" }
    - "user_address": ${ users[0].address.on_one_line(bare=True) }

    - "delivery_party_name_0": ${ notice_parties[0].name_full() }
    - "is_delivery_party_parent_0": ${ True if notice_parties[0].notice_relationship == "parent" else "" }
    - "is_delivery_party_sibling_0": ${ True if notice_parties[0].notice_relationship == "sibling" else "" }
    - "is_delivery_party_minor_0": ${ True if notice_parties[0].notice_relationship == "minor" else "" }
    - "is_delivery_party_custody_0": ${ True if notice_parties[0].notice_relationship == "custody" else "" }
    - "is_delivery_party_other_0": ${ True if notice_parties[0].notice_relationship == "other" else "" }
    - "delivery_party_other_relationship_0": ${ notice_parties[0].other_notice_relationship if notice_parties[0].notice_relationship == "other" else "" }
    - "delivery_party_address_0": ${ notice_parties[0].address.on_one_line(bare=True) if notice_parties[0].address.known else "" }
      
    - "is_delivery_party_hand_0": ${ notice_parties[0].hand_delivery if notice_parties[0].address.known and notice_parties[0].knows_delivery_method else '' }
    - "is_delivery_party_mail_0": ${ notice_parties[0].mail_delivery if notice_parties[0].address.known and notice_parties[0].knows_delivery_method else '' }
    
    - "delivery_party_mail_location_0": |
        % if notice_parties[0].address.known and notice_parties[0].knows_delivery_method and notice_parties[0].mail_delivery:
        % if notice_parties[0].delivery_mail_address != "" and notice_parties[0].delivery_mail_city != "" and notice_parties[0].delivery_mail_state != "":
        ${notice_parties[0].delivery_mail_address }, ${notice_parties[0].delivery_mail_city}, ${ state_name(notice_parties[0].delivery_mail_state) }
        % elif notice_parties[0].delivery_mail_address != "" and notice_parties[0].delivery_mail_city != "":
        ${notice_parties[0].delivery_mail_address }, ${notice_parties[0].delivery_mail_city}
        % elif notice_parties[0].delivery_mail_address != "" and notice_parties[0].delivery_mail_state != "":
        ${notice_parties[0].delivery_mail_address }, ${ state_name(notice_parties[0].delivery_mail_state) }
        % elif notice_parties[0].delivery_mail_city != "" and notice_parties[0].delivery_mail_state != "":
        ${notice_parties[0].delivery_mail_city}, ${ state_name(notice_parties[0].delivery_mail_state) }
        % elif notice_parties[0].delivery_mail_address != "":
        ${notice_parties[0].delivery_mail_address}
        % elif notice_parties[0].delivery_mail_city != "":
        ${notice_parties[0].delivery_mail_city}
        % else:
        ${state_name(notice_parties[0].delivery_mail_state)}
        % endif
        % else:
        ${ "" }
        % endif
    - "is_delivery_party_jail_0": ${ True if notice_parties[0].address.known and notice_parties[0].knows_delivery_method and notice_parties[0].jail_delivery else '' }
    - "delivery_party_jail_name_0": |
        % if notice_parties[0].address.known and notice_parties[0].knows_delivery_method and notice_parties[0].jail_delivery:
        % if notice_parties[0].delivery_jail_name != "" and notice_parties[0].jail_delivery_address.address != "" and notice_parties[0].jail_delivery_address.city != "" and notice_parties[0].jail_delivery_address.state != "":
        ${ notice_parties[0].delivery_jail_name }, ${ notice_parties[0].jail_delivery_address.on_one_line(bare=True)}
        % elif notice_parties[0].delivery_jail_name == "":
        ${ notice_parties[0].jail_delivery_address.on_one_line(bare=True)}
        % else:
        ${ notice_parties[0].delivery_jail_name }
        % endif
        % else:
        ${""}
        % endif
    - "delivery_party_date_0": ${ notice_parties[0].delivery_date if notice_parties[0].knows_delivery_method and notice_parties[0].knows_delivery_date else '' }
    - "delivery_party_time_0": ${ format_time(notice_parties[0].delivery_time, format='h:mm a') if notice_parties[0].knows_delivery_method and notice_parties[0].knows_delivery_time else '' }
    
    - "delivery_party_name_1": ${ notice_parties[1].name_full() if notice_parties.number() > 1 else ''}
    - "is_delivery_party_parent_1": ${ True if notice_parties.number() > 1 and notice_parties[1].notice_relationship == "parent" else "" }
    - "is_delivery_party_sibling_1": ${ True if notice_parties.number() > 1 and notice_parties[1].notice_relationship == "sibling" else "" }
    - "is_delivery_party_minor_1": ${ True if notice_parties.number() > 1 and notice_parties[1].notice_relationship == "minor" else "" }
    - "is_delivery_party_custody_1": ${ True if notice_parties.number() > 1 and notice_parties[1].notice_relationship == "custody" else "" }
    - "is_delivery_party_other_1": ${ True if notice_parties.number() > 1 and notice_parties[1].notice_relationship == "other" else "" }
    - "delivery_party_other_relationship_1": ${ notice_parties[1].other_notice_relationship if notice_parties.number() > 1 and notice_parties[1].notice_relationship == "other" else "" }
    - "delivery_party_address_1": ${ notice_parties[1].address.on_one_line(bare=True) if notice_parties.number() > 1 and notice_parties[1].address.known else "" }
    
    - "is_delivery_party_hand_1": ${ notice_parties[1].hand_delivery if notice_parties.number() > 1 and notice_parties[1].address.known and notice_parties[1].knows_delivery_method else '' }
    - "is_delivery_party_mail_1": ${ notice_parties[1].mail_delivery if notice_parties.number() > 1 and notice_parties[1].address.known and notice_parties[1].knows_delivery_method else '' }
    
    - "delivery_party_mail_location_1": |
        % if notice_parties.number() > 1 and notice_parties[1].address.known and notice_parties[1].knows_delivery_method and notice_parties[1].mail_delivery:
        % if notice_parties[1].delivery_mail_address != "" and notice_parties[1].delivery_mail_city != "" and notice_parties[1].delivery_mail_state != "":
        ${notice_parties[1].delivery_mail_address }, ${notice_parties[1].delivery_mail_city}, ${ state_name(notice_parties[1].delivery_mail_state) }
        % elif notice_parties[1].delivery_mail_address != "" and notice_parties[1].delivery_mail_city != "":
        ${notice_parties[1].delivery_mail_address }, ${notice_parties[1].delivery_mail_city}
        % elif notice_parties[1].delivery_mail_address != "" and notice_parties[1].delivery_mail_state != "":
        ${notice_parties[1].delivery_mail_address }, ${ state_name(notice_parties[1].delivery_mail_state) }
        % elif notice_parties[1].delivery_mail_city != "" and notice_parties[1].delivery_mail_state != "":
        ${notice_parties[1].delivery_mail_city}, ${ state_name(notice_parties[1].delivery_mail_state) }
        % elif notice_parties[1].delivery_mail_address != "":
        ${notice_parties[1].delivery_mail_address}
        % elif notice_parties[1].delivery_mail_city != "":
        ${notice_parties[1].delivery_mail_city}
        % else:
        ${state_name(notice_parties[1].delivery_mail_state)}
        % endif
        % else:
        ${ "" }
        % endif
    
    - "is_delivery_party_jail_1": ${ True if notice_parties.number() > 1 and notice_parties[1].address.known and notice_parties[1].knows_delivery_method and notice_parties[1].jail_delivery else '' }
    
    - "delivery_party_jail_name_1": |
        % if notice_parties.number() > 1 and notice_parties[1].address.known and notice_parties[1].knows_delivery_method and notice_parties[1].jail_delivery:
        % if notice_parties[1].delivery_jail_name != "" and notice_parties[1].jail_delivery_address.address != "" and notice_parties[1].jail_delivery_address.city != "" and notice_parties[1].jail_delivery_address.state != "":
        ${ notice_parties[1].delivery_jail_name }, ${ notice_parties[1].jail_delivery_address.on_one_line(bare=True)}
        % elif notice_parties[1].delivery_jail_name == "":
        ${ notice_parties[1].jail_delivery_address.on_one_line(bare=True)}
        % else:
        ${ notice_parties[1].delivery_jail_name }
        % endif
        % else:
        ${""}
        % endif
    
    - "delivery_party_date_1": ${ notice_parties[1].delivery_date if notice_parties.number() > 1 and notice_parties[1].knows_delivery_method and notice_parties[1].knows_delivery_date else '' }
    - "delivery_party_time_1": ${ format_time(notice_parties[1].delivery_time, format='h:mm a') if notice_parties.number() > 1 and notice_parties[1].knows_delivery_method and notice_parties[1].knows_delivery_time else '' }

    - "delivery_party_name_2": ${ notice_parties[2].name_full() if notice_parties.number() > 2 else '' }
    - "is_delivery_party_parent_2": ${ True if notice_parties.number() > 2 and notice_parties[2].notice_relationship == "parent" else "" }
    - "is_delivery_party_sibling_2": ${ True if notice_parties.number() > 2 and notice_parties[2].notice_relationship == "sibling" else "" }
    - "is_delivery_party_minor_2": ${ True if notice_parties.number() > 2 and notice_parties[2].notice_relationship == "minor" else "" }
    - "is_delivery_party_custody_2": ${ True if notice_parties.number() > 2 and notice_parties[2].notice_relationship == "custody" else "" }
    - "is_delivery_party_other_2": ${ True if notice_parties.number() > 2 and notice_parties[2].notice_relationship == "other" else "" }
    - "delivery_party_other_relationship_2": ${ notice_parties[2].other_notice_relationship if notice_parties.number() > 2 and notice_parties[2].notice_relationship == "other" else "" }
    - "delivery_party_address_2": ${ notice_parties[2].address.on_one_line(bare=True) if notice_parties.number() > 2 and notice_parties[2].address.known else "" }
    
    - "is_delivery_party_hand_2": ${ notice_parties[2].hand_delivery if notice_parties.number() > 2 and notice_parties[2].address.known and notice_parties[2].knows_delivery_method else '' }
    - "is_delivery_party_mail_2": ${ notice_parties[2].mail_delivery if notice_parties.number() > 2 and notice_parties[2].address.known and notice_parties[2].knows_delivery_method else '' }
    
    - "delivery_party_mail_location_2": |
        % if notice_parties.number() > 2 and notice_parties[2].address.known and notice_parties[2].knows_delivery_method and notice_parties[2].mail_delivery:
        % if notice_parties[2].delivery_mail_address != "" and notice_parties[2].delivery_mail_city != "" and notice_parties[2].delivery_mail_state != "":
        ${notice_parties[2].delivery_mail_address }, ${notice_parties[2].delivery_mail_city}, ${ state_name(notice_parties[2].delivery_mail_state) }
        % elif notice_parties[2].delivery_mail_address != "" and notice_parties[2].delivery_mail_city != "":
        ${notice_parties[2].delivery_mail_address }, ${notice_parties[2].delivery_mail_city}
        % elif notice_parties[2].delivery_mail_address != "" and notice_parties[2].delivery_mail_state != "":
        ${notice_parties[2].delivery_mail_address }, ${ state_name(notice_parties[2].delivery_mail_state) }
        % elif notice_parties[2].delivery_mail_city != "" and notice_parties[2].delivery_mail_state != "":
        ${notice_parties[2].delivery_mail_city}, ${ state_name(notice_parties[2].delivery_mail_state) }
        % elif notice_parties[2].delivery_mail_address != "":
        ${notice_parties[2].delivery_mail_address}
        % elif notice_parties[2].delivery_mail_city != "":
        ${notice_parties[2].delivery_mail_city}
        % else:
        ${state_name(notice_parties[2].delivery_mail_state)}
        % endif
        % else:
        ${ "" }
        % endif
    
    - "is_delivery_party_jail_2": ${ True if notice_parties.number() > 2 and notice_parties[2].address.known and notice_parties[2].knows_delivery_method and notice_parties[2].jail_delivery else '' }
    
    - "delivery_party_jail_name_2": |
        % if notice_parties.number() > 2 and notice_parties[2].address.known and notice_parties[2].knows_delivery_method and notice_parties[2].jail_delivery:
        % if notice_parties[2].delivery_jail_name != "" and notice_parties[2].jail_delivery_address.address != "" and notice_parties[2].jail_delivery_address.city != "" and notice_parties[2].jail_delivery_address.state != "":
        ${ notice_parties[2].delivery_jail_name }, ${ notice_parties[2].jail_delivery_address.on_one_line(bare=True)}
        % elif notice_parties[2].delivery_jail_name == "":
        ${ notice_parties[2].jail_delivery_address.on_one_line(bare=True)}
        % else:
        ${ notice_parties[2].delivery_jail_name }
        % endif
        % else:
        ${""}
        % endif
    
    - "delivery_party_date_2": ${ notice_parties[2].delivery_date if notice_parties.number() > 2 and notice_parties[2].knows_delivery_method and notice_parties[2].knows_delivery_date else '' }
    - "delivery_party_time_2": ${ format_time(notice_parties[2].delivery_time, format='h:mm a') if notice_parties.number() > 2 and notice_parties[2].knows_delivery_method and notice_parties[2].knows_delivery_time else '' }

    - "delivery_party_name_3": ${ notice_parties[3].name_full() if notice_parties.number() > 3 else '' }
    - "is_delivery_party_parent_3": ${ True if notice_parties.number() > 3 and notice_parties[3].notice_relationship == "parent" else "" }
    - "is_delivery_party_sibling_3": ${ True if notice_parties.number() > 3 and notice_parties[3].notice_relationship == "sibling" else "" }
    - "is_delivery_party_minor_3": ${ True if notice_parties.number() > 3 and notice_parties[3].notice_relationship == "minor" else "" }
    - "is_delivery_party_custody_3": ${ True if notice_parties.number() > 3 and notice_parties[3].notice_relationship == "custody" else "" }
    - "is_delivery_party_other_3": ${ True if notice_parties.number() > 3 and notice_parties[3].notice_relationship == "other" else "" }
    - "delivery_party_other_relationship_3": ${ notice_parties[3].other_notice_relationship if notice_parties.number() > 3 and notice_parties[3].notice_relationship == "other" else "" }
    - "delivery_party_address_3": ${ notice_parties[3].address.on_one_line(bare=True) if notice_parties.number() > 3 and notice_parties[3].address.known else "" }
    
    - "is_delivery_party_hand_3": ${ notice_parties[3].hand_delivery if notice_parties.number() > 3 and notice_parties[3].address.known and notice_parties[3].knows_delivery_method else '' }
    - "is_delivery_party_mail_3": ${ notice_parties[3].mail_delivery if notice_parties.number() > 3 and notice_parties[3].address.known and notice_parties[3].knows_delivery_method else '' }
    
    - "delivery_party_mail_location_3": |
        % if notice_parties.number() > 3 and notice_parties[3].address.known and notice_parties[3].knows_delivery_method and notice_parties[3].mail_delivery:
        % if notice_parties[3].delivery_mail_address != "" and notice_parties[3].delivery_mail_city != "" and notice_parties[3].delivery_mail_state != "":
        ${notice_parties[3].delivery_mail_address }, ${notice_parties[3].delivery_mail_city}, ${ state_name(notice_parties[3].delivery_mail_state) }
        % elif notice_parties[3].delivery_mail_address != "" and notice_parties[3].delivery_mail_city != "":
        ${notice_parties[3].delivery_mail_address }, ${notice_parties[3].delivery_mail_city}
        % elif notice_parties[3].delivery_mail_address != "" and notice_parties[3].delivery_mail_state != "":
        ${notice_parties[3].delivery_mail_address }, ${ state_name(notice_parties[3].delivery_mail_state) }
        % elif notice_parties[3].delivery_mail_city != "" and notice_parties[3].delivery_mail_state != "":
        ${notice_parties[3].delivery_mail_city}, ${ state_name(notice_parties[3].delivery_mail_state) }
        % elif notice_parties[3].delivery_mail_address != "":
        ${notice_parties[3].delivery_mail_address}
        % elif notice_parties[3].delivery_mail_city != "":
        ${notice_parties[3].delivery_mail_city}
        % else:
        ${state_name(notice_parties[3].delivery_mail_state)}
        % endif
        % else:
        ${ "" }
        % endif
    
    - "is_delivery_party_jail_3": ${ True if notice_parties.number() > 3 and notice_parties[3].address.known and notice_parties[3].knows_delivery_method and notice_parties[3].jail_delivery else '' }
    
    - "delivery_party_jail_name_3": |
        % if notice_parties.number() > 3 and notice_parties[3].address.known and notice_parties[3].knows_delivery_method and notice_parties[3].jail_delivery:
        % if notice_parties[3].delivery_jail_name != "" and notice_parties[3].jail_delivery_address.address != "" and notice_parties[3].jail_delivery_address.city != "" and notice_parties[3].jail_delivery_address.state != "":
        ${ notice_parties[3].delivery_jail_name }, ${ notice_parties[3].jail_delivery_address.on_one_line(bare=True)}
        % elif notice_parties[3].delivery_jail_name == "":
        ${ notice_parties[3].jail_delivery_address.on_one_line(bare=True)}
        % else:
        ${ notice_parties[3].delivery_jail_name }
        % endif
        % else:
        ${""}
        % endif
    
    - "delivery_party_date_3": ${ notice_parties[3].delivery_date if notice_parties.number() > 3 and notice_parties[3].knows_delivery_method and notice_parties[3].knows_delivery_date else '' }
    - "delivery_party_time_3": ${ format_time(notice_parties[3].delivery_time, format='h:mm a') if notice_parties.number() > 3 and notice_parties[3].knows_delivery_method and notice_parties[3].knows_delivery_time else '' }

    - "e_sign_name_2": ${ users[0].name_full() if e_signature else "" }
    - "user_name_2": ${ users[0].name_full() }
    - "for_self_2": ${ True }
    - "user_phone_2": ${ phone_number_formatted(users[0].phone_number) }
    - "user_email_2": ${ users[0].email if users[0].has_email_address else "" }
    - "user_address_2": ${ users[0].address.on_one_line(bare=True) }
---
generic object: ALIndividual
attachment:
  variable name: x.additional_proof[i]
  name: additional_proof
  filename: additional_proof
  skip undefined: True
  editable: False
  pdf template file: additional_proof_of_delivery.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "child_name": ${ child.name_full() }
    - "delivery_party_name_0": ${ x.name_full() }
    - "is_delivery_party_parent_0": ${ True if x.notice_relationship == "parent" else "" }
    - "is_delivery_party_sibling_0": ${ True if x.notice_relationship == "sibling" else "" }
    - "is_delivery_party_minor_0": ${ True if x.notice_relationship == "minor" else "" }
    - "is_delivery_party_custody_0": ${ True if x.notice_relationship == "custody" else "" }
    - "is_delivery_party_other_0": ${ True if x.notice_relationship == "other" else "" }
    - "delivery_party_other_relationship_0": ${ x.other_notice_relationship if x.notice_relationship == "other" else "" }
    - "delivery_party_address_0": ${ x.address.on_one_line(bare=True) if x.address.known else "" }
      
    - "is_delivery_party_hand_0": ${ x.hand_delivery if x.address.known and x.knows_delivery_method else '' }
    - "is_delivery_party_mail_0": ${ x.mail_delivery if x.address.known and x.knows_delivery_method else '' }
    
    - "delivery_party_mail_location_0": |
        % if x.address.known and x.knows_delivery_method and x.mail_delivery:
        % if x.delivery_mail_address != "" and x.delivery_mail_city != "" and x.delivery_mail_state != "":
        ${x.delivery_mail_address }, ${x.delivery_mail_city}, ${ state_name(x.delivery_mail_state) }
        % elif x.delivery_mail_address != "" and x.delivery_mail_city != "":
        ${x.delivery_mail_address }, ${x.delivery_mail_city}
        % elif x.delivery_mail_address != "" and x.delivery_mail_state != "":
        ${x.delivery_mail_address }, ${ state_name(x.delivery_mail_state) }
        % elif x.delivery_mail_city != "" and x.delivery_mail_state != "":
        ${x.delivery_mail_city}, ${ state_name(x.delivery_mail_state) }
        % elif x.delivery_mail_address != "":
        ${x.delivery_mail_address}
        % elif x.delivery_mail_city != "":
        ${x.delivery_mail_city}
        % else:
        ${state_name(x.delivery_mail_state)}
        % endif
        % else:
        ${ "" }
        % endif
    - "is_delivery_party_jail_0": ${ True if x.address.known and x.knows_delivery_method and x.jail_delivery else '' }
    - "delivery_party_jail_name_0": |
        % if x.address.known and x.knows_delivery_method and x.jail_delivery:
        % if x.delivery_jail_name != "" and x.jail_delivery_address.address != "" and x.jail_delivery_address.city != "" and x.jail_delivery_address.state != "":
        ${ x.delivery_jail_name }, ${ x.jail_delivery_address.on_one_line(bare=True)}
        % elif x.delivery_jail_name == "":
        ${ x.jail_delivery_address.on_one_line(bare=True)}
        % else:
        ${ x.delivery_jail_name }
        % endif
        % else:
        ${""}
        % endif
    - "delivery_party_date_0": ${ x.delivery_date if x.knows_delivery_method and x.knows_delivery_date else '' }
    - "delivery_party_time_0": ${ format_time(x.delivery_time, format='h:mm a') if x.knows_delivery_method and x.knows_delivery_time else '' }

---
attachment:
  variable name: statement[i]
  name: statement
  filename: statement
  skip undefined: True
  editable: True
  pdf template file: statement_for_publication.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "child_name": ${ child.name_full() }
    - "child_name_2": ${ child.name_full() }
    - "guardian_name": ${ users[0].name_full() }
    - "e_sign_name": ${ users[0].name_full() if e_signature else "" }
    - "user_name": ${ users[0].name_full() }
    - "for_self": ${ True }
    - "user_phone": ${ phone_number_formatted(users[0].phone_number) }
    - "user_email": ${ users[0].email if users[0].has_email_address else "" }
    - "user_address": ${ users[0].address.on_one_line(bare=True) }

---
attachment:
  variable name: publication_letter[i]
  name: publication_letter
  filename: publication_letter
  skip undefined: True
  editable: True
  pdf template file: newspaper_publication_letter.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "child_name": ${ child.name_full() }
      
---
attachment:
  variable name: order[i]
  name: order
  filename: order
  skip undefined: True
  editable: False
  pdf template file: order.pdf
  fields:
    - "county": ${ trial_court.address.county }
    - "case_number": ${ "" }
    - "child_name": ${ child.name_full() }

---
############### Review page
id: review screen
event: review_answers
question: |
  Review screen
subquestion: |
  Edit your answers below.
review: 
  - note: |
      <h4>Child</h4>
  - Edit: child.name.first
    button: |
      **Child's name:**
      ${ child.name_full()  }
  - Edit: child.birthdate
    button: |
      **${ child.name_full() }'s birthdate:**
      ${ child.birthdate }
  - Edit: child.address.address
    button: |
      **${ child.name_full() }'s current address:**[NEWLINE]
      ${ child.address.on_one_line(bare=True) }
  - Edit: previous_standby
    button: |
      **Has a judge appointed a standby guardian for ${child.name_full()}?**
      ${ word(yesno(previous_standby)) }
  - Edit: current_stg
    button: |
      **Is there a short-term guardian for ${child.name_full()}?**
      ${ word(yesno(current_stg)) }
  - Edit: named_in_will
    button: |
      **Were you named as ${child.name_full()}'s guardian in their parent's will or in another document?**
      ${ word(yesno(named_in_will)) }
  - Edit: immigration_separation
    button: |
      **Have Immigration officers separated ${child.name_full()} from their parents?**
      ${ word(yesno(immigration_separation)) }
  - Edit: guardianship_type
    button: |
      **What kind of guardianship of ${child.name_full()} are you asking for?**[NEWLINE]
      % if guardianship_type == "person":
      Person only
      % elif guardianship_type == "estate":
      Estate (property) only
      % else:
      Both person and estate (property)
      % endif
  - Edit: child_estate
    button: |
      **What is the current value of ${child.name_full()}'s estate?**[NEWLINE]
      % if child_estate == "unknown":
      I don't know.
      % elif child_estate == "zero":
      $0 - ${child.name_full()} has no property, assets or saved money.
      % else:
      $${thousands(estate_value, show_decimals=True)}
      % endif
  - Edit: child_income
    button: |
      **What is the ${child.name_full()}'s annual income, including Social Security, SSI, and other public benefits?**[NEWLINE]
      % if child_income == "unknown":
      I don't know.
      % elif child_income == "zero":
      $0 - ${child.name_full()} has no annual income.
      % else:
      $${thousands(income_value, show_decimals=True)}
      % endif

  - note: |
      <h4>Child's parents, caregivers, and relatives</h4>
  - Edit: has_legal_parent
    button: |
      **Does ${child.name_full()} have at least one legal parent?**
      ${ word(yesno(has_legal_parent)) }
  - Edit: parents[0].name.first
    button: |
      **Parent name:**
      ${ parents[0].name_full() }
    show if: has_legal_parent

  - Edit: parents[0].address.known
    button: |
      **Do you know ${ parents[0].name_full() }'s current address?**
      ${word(yesno(parents[0].address.known))}
    show if: has_legal_parent
  - Edit: parents[0].address.known
    button: |
      **Does ${ parents[0].name_full() } live at same address as ${child.name_full()}?**
      ${word(yesno(parents[0].lives_with_child))}
    show if: has_legal_parent and parents[0].address.known
  - Edit: parents[0].address.address
    button: |
      **${ parents[0].name_full() }'s current address:**
      ${parents[0].address.on_one_line(bare=True)}
    show if: has_legal_parent and parents[0].address.known

  - Edit: parents[0].agrees
    button: |
      **Information about ${ parents[0].name_full() }:**
      
      % if parents[0].agrees:
      * ${parents[0].name_full()} agrees to the guardianship.
      % endif
      % if parents[0].is_dead:
      * ${parents[0].name_full()} died on ${ parents[0].decease_date }.
      % endif
      % if parents[0].gave_up_custody:
      * ${parents[0].name_full()} voluntarily gave up custody of ${child.name_full()}.
      % endif
      % if parents[0].not_found:
      * ${parents[0].name_full()} cannot be found. Last contact was on ${parents[0].last_contact_date} at ${parents[0].last_contact_location}.
      % endif
      % if parents[0].unable:
      * ${parents[0].name_full()} is unable or unwilling to take care of ${child.name_full()}.
      % endif
    show if: has_legal_parent
  - Edit: parents[0].knows_delivery_method
    button: |
      **Do you know how and when you will send your forms to ${parents[0].name_full()}?**
      ${ word(yesno(parents[0].knows_delivery_method)) }
    show if: has_legal_parent and not parents[0].is_dead and not parents[0].not_found
  - Edit: parents[0].hand_delivery
    button: |
      **Delivery to ${ parents[0].name_full() } by: (Edit to view and change details)**
      
      % if parents[0].hand_delivery == True:
        * Hand delivery
      % endif
      % if parents[0].mail_delivery == True:
        * US mail or delivery company
      % endif
      % if parents[0].jail_delivery == True:
        * Mail from prison or jail
      % endif
      % if parents[0].hand_delivery != True and parents[0].mail_delivery != True and parents[0].jail_delivery != True:
        * None entered
      % endif
    show if: has_legal_parent and not parents[0].is_dead and not parents[0].not_found and parents[0].knows_delivery_method
  - Edit: parents[0].delivery_date
    button: |
      **Delivery to ${ parents[0].name_full() } on:**
      % if parents[0].knows_delivery_date == True and parents[0].knows_delivery_time == True:
      ${ parents[0].delivery_date } at ${ format_time(parents[0].delivery_time, "h:mm a") }
      % elif parents[0].knows_delivery_date: 
      ${ parents[0].delivery_date }, time not entered.
      % elif parents[0].knows_delivery_time:
      Date not entered, ${ format_time(parents[0].delivery_time, "h:mm a") }.
      % else:
      Incomplete date and time entered.
      % endif
    show if: has_legal_parent and not parents[0].is_dead and not parents[0].not_found and parents[0].knows_delivery_method

  - Edit: has_second_parent
    button: |
      **Does ${child.name_full()} have a second legal parent?**
      ${ word(yesno(has_second_parent)) }  

  - Edit: parents[1].name.first
    button: |
      **Second parent name:**
      ${ parents[1].name_full() }
    show if: has_legal_parent and has_second_parent
  - Edit: parents[1].address.known
    button: |
      **Do you know ${ parents[1].name_full() }'s current address?**
      ${word(yesno(parents[1].address.known))}
    show if: has_legal_parent
  - Edit: parents[1].address.known
    button: |
      **Does ${ parents[1].name_full() } live at same address as ${child.name_full()}?**
      ${word(yesno(parents[1].lives_with_child))}
    show if: has_legal_parent and parents[0].address.known
  - Edit: parents[1].address.address
    button: |
      **${ parents[1].name_full() }'s current address:**
      ${parents[1].address.on_one_line(bare=True)}
    show if: has_legal_parent and has_second_parent and parents[0].address.known
  - Edit: parents[1].agrees
    button: |
      **Information about ${ parents[1].name_full() }:**
      
      % if parents[1].agrees:
      * ${parents[1].name_full()} agrees to the guardianship.
      % endif
      % if parents[1].is_dead:
      * ${parents[1].name_full()} died on ${ parents[1].decease_date }.
      % endif
      % if parents[1].gave_up_custody:
      * ${parents[1].name_full()} voluntarily gave up custody of ${child.name_full()}.
      % endif
      % if parents[1].not_found:
      * ${parents[1].name_full()} cannot be found. Last contact was on ${parents[1].last_contact_date} at ${parents[1].last_contact_location}.
      % endif
      % if parents[1].unable:
      * ${parents[1].name_full()} is unable or unwilling to take care of ${child.name_full()}.
      % endif
    show if: has_legal_parent and has_second_parent
  - Edit: parents[1].knows_delivery_method
    button: |
      **Do you know how and when you will send your forms to ${parents[1].name_full()}?**
      ${ word(yesno(parents[1].knows_delivery_method)) }
    show if: has_legal_parent and has_second_parent and not parents[1].is_dead and not parents[1].not_found
  - Edit: parents[1].hand_delivery
    button: |
      **Delivery to ${ parents[1].name_full() } by: (Edit to view and change details)**
      
      % if parents[1].hand_delivery == True:
        * Hand delivery
      % endif
      % if parents[1].mail_delivery == True:
        * US mail or delivery company
      % endif
      % if parents[1].jail_delivery == True:
        * Mail from prison or jail
      % endif
      % if parents[1].hand_delivery != True and parents[1].mail_delivery != True and parents[1].jail_delivery != True:
        * None entered
      % endif
    show if: has_legal_parent and has_second_parent and not parents[1].is_dead and not parents[1].not_found and parents[1].knows_delivery_method
  - Edit: parents[1].delivery_date
    button: |
      **Delivery to ${ parents[1].name_full() } on:**
      % if parents[1].knows_delivery_date == True and parents[1].knows_delivery_time == True:
      ${ parents[1].delivery_date } at ${ format_time(parents[1].delivery_time, "h:mm a") }
      % elif parents[1].knows_delivery_date: 
      ${ parents[1].delivery_date }, time not entered.
      % elif parents[1].knows_delivery_time:
      Date not entered, ${ format_time(parents[1].delivery_time, "h:mm a") }.
      % else:
      Incomplete date and time entered.
      % endif
    show if: has_legal_parent and has_second_parent and not parents[1].is_dead and not parents[1].not_found and parents[1].knows_delivery_method
      
  - Edit: other_case_involving_parents
    button: |
      **Do you know of any court cases that involve ${child.name_full()} or their parents?**
      ${ word(yesno(other_case_involving_parents)) }
  - Edit: other_cases.revisit
    button: |
      **Other cases with ${child.name_full()} or their parents: (Edit to change details)**

      % for case in other_cases:
      % if case.in_us:
      % if case.state == "IL":
      * ${ case.name.text } in ${ case.county } County, Illinois
      % else:
      * ${ case.name.text } in ${ state_name(case.state) }
      % endif
      % else:
      * ${ case.name.text } in ${ country_name(case.non_us_country) }
      % endif
      % endfor
    show if: other_case_involving_parents
  - Edit: caregivers.there_are_any
    button: |
      **Do any adults live with ${child.name_full()}?**
      ${ word(yesno(caregivers.there_are_any)) }
  - Edit: caregivers.revisit
    button: |
      **Adults that live with ${child.name_full()}: (Edit to change name, relationship, and notice or consent)**

      % for person in caregivers:
      * ${ person.name_full() }, ${ person.relationship }
      % endfor
    show if: caregivers.there_are_any
  - Edit: minor_is_married
    button: |
      **Is ${child.name_full()} married?**
      ${ word(yesno(minor_is_married)) }      
  - Edit: spouse.name.first
    button: |
      **Spouse's name:**
      ${ spouse.name_full()  }
    show if: minor_is_married
  - Edit: spouse.address.known
    button: |
      **${spouse.name_full()}'s current address:**
      % if not spouse.address.known:
      Unknown
      % else:
      ${ spouse.address.on_one_line(bare=True) }
      % endif
    show if: minor_is_married
  - Edit: spouse.agrees
    button: |
      **Does ${spouse.name_full()} agree to the guardianship of ${ child.name_full()}?**
      % if spouse.agrees == None:
      I don't know
      % else:
      ${word(yesno(spouse.agrees))}
      % endif
    show if: minor_is_married
  - Edit: spouse.knows_delivery_method
    button: |
      **Do you know how and when you will send your forms to ${spouse.name_full()}?**
      ${ word(yesno(spouse.knows_delivery_method)) }
    show if: minor_is_married
  - Edit: spouse.hand_delivery
    button: |
      **Delivery by: (Edit to view and change details)**
      
      % if spouse.hand_delivery == True:
        * Hand delivery
      % endif
      % if spouse.mail_delivery == True:
        * US mail or delivery company
      % endif
      % if spouse.jail_delivery == True:
        * Mail from prison or jail
      % endif
      % if spouse.hand_delivery != True and spouse.mail_delivery != True and spouse.jail_delivery != True:
        * None entered
      % endif
    show if: minor_is_married and spouse.knows_delivery_method
  - Edit: spouse.delivery_date
    button: |
      **Delivery on:**
      % if spouse.knows_delivery_date == True and spouse.knows_delivery_time == True:
      ${ spouse.delivery_date } at ${ format_time(spouse.delivery_time, "h:mm a") }
      % elif spouse.knows_delivery_date: 
      ${ spouse.delivery_date }, time not entered.
      % elif spouse.knows_delivery_time:
      Date not entered, ${ format_time(spouse.delivery_time, "h:mm a") }.
      % else:
      Incomplete date and time entered.
      % endif
    show if: minor_is_married and spouse.knows_delivery_method
    
  - Edit: adult_relatives.there_are_any
    button: |
      **Does ${child.name_full()} have any adult relatives?**
      ${ word(yesno(adult_relatives.there_are_any))}
    show if: not minor_is_married
  - Edit: adult_relatives.revisit
    button: |
      **${child.name_full()}'s adult relatives: (Edit to change name, relationship, notice or consent, and address)**

      % for person in adult_relatives:
      * ${ person.name_full() }, ${ person.relationship }
      % endfor
    show if: not minor_is_married and adult_relatives.there_are_any
     
  - note: |
      <h4>Guardian</h4>
  - Edit: users[0].name.first
    button: |
      **Your name:**
      ${ users[0].name_full() }
  - Edit: users[0].birthdate
    button: |
      **When were you born?**
      ${ users[0].birthdate }
  - Edit: users[0].is_willing
    button: |
      **Are you willing and able to act as guardian of ${child.name_full()}?**
      ${word(yesno(users[0].is_willing))}
  - Edit: users[0].address.address
    button: |
      **Your address:**[NEWLINE]
      ${ users[0].address.on_one_line(bare=True) }
  - Edit: users[0].job
    button: |
      **What is your current job?**
      ${users[0].job}
  - Edit: users[0].is_disabled
    button: |
      **Has a judge found you disabled and appointed you a Guardian?**
      ${ word(yesno(users[0].is_disabled))}
  - Edit: users[0].found_negligent
    button: |
      **Have you been found to have neglected or abused any minor by DCFS or in court?**
      ${ word(yesno(users[0].found_negligent))}
  - Edit: users[0].has_felony_conviction
    button: |
      **Do you have any felony convictions?**
      ${ word(yesno(users[0].has_felony_conviction)) }
  - Edit: users[0].felony_convictions.revisit
    button: |
      **Your past felony convictions: (Edit to change details)**

      % for conviction in users[0].felony_convictions:
      * Date: ${conviction.date}, Charge: ${ conviction.name.text }
      % endfor
    show if: users[0].has_felony_conviction
  - Edit: users[0].phone_number
    button: |
      **Your phone number:**
      % if users[0].phone_number == "":
      None entered
      % else:
      ${ phone_number_formatted(users[0].phone_number) }
      % endif
  - Edit: users[0].has_email_address
    button: |
      **Do you have an email address?**
      ${ word(yesno(users[0].has_email_address)) }
  - Edit: users[0].email
    button: |
      **Your email:**
      ${ users[0].email }
    show if: users[0].has_email_address
  - Edit: e_signature
    button: |
      **Do you want to add your e-signature to your forms?**
      ${ word(yesno(e_signature)) }
  - Edit: add_co_guardian
    button: |
      **Do you want someone to be a co-guardian of ${child.name_full()} with you?**
      ${word(yesno(add_co_guardian))}
  - Edit: users[1].name.first
    button: |
      **Co-guardian's name:**
      ${ users[1].name_full() }
    show if: add_co_guardian
  - Edit: users[1].birthdate
    button: |
      **When was ${ users[1].name_full() } born?**
      ${ users[1].birthdate }
    show if: add_co_guardian
  - Edit: users[1].is_willing
    button: |
      **Is ${ users[1].name_full() } willing and able to act as guardian of ${child.name_full()}?**
      ${word(yesno(users[1].is_willing))}
    show if: add_co_guardian
  - Edit: users[1].address.address
    button: |
      **${ users[1].name_full() }'s address:**[NEWLINE]
      ${ users[1].address.on_one_line(bare=True) }
    show if: add_co_guardian and valid_co  
  - Edit: users[1].job
    button: |
      **What is ${ users[1].name_full() }'s current job?**
      ${users[1].job}
    show if: add_co_guardian and valid_co
  - Edit: users[1].is_disabled
    button: |
      **Has a judge found ${ users[1].name_full() } disabled and appointed them a Guardian?**
      ${ word(yesno(users[1].is_disabled))}
    show if: add_co_guardian and valid_co
  - Edit: users[1].found_negligent
    button: |
      **Has ${ users[1].name_full() } been found to have neglected or abused any minor by DCFS or in court?**
      ${ word(yesno(users[1].found_negligent))}
    show if: add_co_guardian and valid_co
  - Edit: users[1].has_felony_conviction
    button: |
      **Does ${ users[1].name_full() } have any felony convictions?**
      ${ word(yesno(users[1].has_felony_conviction)) }
    show if: add_co_guardian and valid_co
  - Edit: users[1].felony_convictions.revisit
    button: |
      **${ users[1].name_full() }'s past felony convictions: (Edit to change details)**

      % for conviction in users[1].felony_convictions:
      * Date: ${conviction.date}, Charge: ${ conviction.name.text }
      % endfor
    show if: add_co_guardian and valid_co and users[1].has_felony_conviction
  - Edit: users[1].phone_number
    button: |
      **${ users[1].name_full() }'s phone number:**
      % if users[1].phone_number == "":
      None entered
      % else:
      ${ phone_number_formatted(users[1].phone_number) }
      % endif
    show if: add_co_guardian and valid_co
  - Edit: users[1].has_email_address
    button: |
      **Does ${ users[1].name_full() }'s have an email address?**
      ${ word(yesno(users[1].has_email_address)) }
    show if: add_co_guardian and valid_co
  - Edit: users[1].email
    button: |
      **${ users[1].name_full() }'s email:**
      ${ users[1].email }
    show if: add_co_guardian and valid_co and users[1].has_email_address    
  - Edit: oath_person_agree
    button: |
      **Do all proposed guardians agree to the terms of guardianship of the person?**
      ${ word(yesno(oath_person_agree)) }    
  - Edit: oath_estate_agree
    button: |
      **Do all proposed guardians agree to the terms of guardianship of the estate?**
      ${ word(yesno(oath_estate_agree)) }

      
      
  
  - note: |
      <h4>Court and filing details</h4>
  - Edit: child.agrees
    button: |
      **Does ${child.name_full()} agree to the guardianship?**
      ${word(yesno(child.agrees))}
    show if: child.age_in_years() >= 14

  - Edit: child.knows_delivery_method
    button: |
      **Do you know how and when you will send your forms to ${child.name_full()}?**
      ${ word(yesno(child.knows_delivery_method)) }
    show if: child.age_in_years() >= 14
  - Edit: child.hand_delivery
    button: |
      **Delivery by: (Edit to view and change details)**
      
      % if child.hand_delivery == True:
        * Hand delivery
      % endif
      % if child.mail_delivery == True:
        * US mail or delivery company
      % endif
      % if child.jail_delivery == True:
        * Mail from prison or jail
      % endif
      % if child.hand_delivery != True and child.mail_delivery != True and child.jail_delivery != True:
        * None entered
      % endif
    show if: child.age_in_years() >= 14 and child.knows_delivery_method
  - Edit: child.delivery_date
    button: |
      **Delivery on:**
      % if child.knows_delivery_date == True and child.knows_delivery_time == True:
      ${ child.delivery_date } at ${ format_time(child.delivery_time, "h:mm a") }
      % elif child.knows_delivery_date: 
      ${ child.delivery_date }, time not entered.
      % elif child.knows_delivery_time:
      Date not entered, ${ format_time(child.delivery_time, "h:mm a") }.
      % else:
      Incomplete date and time entered.
      % endif
    show if: child.age_in_years() >= 14 and child.knows_delivery_method
    
  - Edit: 
      - trial_court_index
      - recompute:
        - trial_court
    button: |
      **County where you will file the petition:**
      ${ trial_court.address.county }
  - Edit: cook_district
    button: |
      **Cook County courthouse:**
      % if cook_district == "15":
      ${ "Daley Center, 50 W. Washington Street, Chicago" }
      % elif cook_district == "16":
      ${ "Second Municipal District, 5600 Old Orchard Road, Skokie" }
      % elif cook_district == "17":
      ${ "Third Municipal District, 2121 Euclid Avenue, Rolling Meadows" }
      % elif cook_district == "18":
      ${ "Fourth Municipal District, 1500 Maybrook Drive, Maywood" }
      % elif cook_district == "19":
      ${ "Fifth Municipal District, 10220 S. 76th Avenue, Bridgeview" }
      % elif cook_district == "20":
      ${ "Sixth Municipal District, 16501 South Kedzie Parkway, Markham" }
      % endif      
    show if: trial_court_index == -1  
      
  - Edit: has_court_date
    button: |
      **Do you already have a court date scheduled for your Guardianship hearing?**
      ${ word(yesno(has_court_date)) }
  - Edit: hearing_date
    button: |
      **Court hearing on:**
      ${ hearing_date } at ${ format_time(hearing_time, "h:mm a") }
    show if: has_court_date
  - Edit: attend_court
    button: |
      **How can parties attend court?**
      
      % if attend_court['in_person'] == True:
        * In person
      % endif
      % if attend_court['remote'] == True:
        * Remotely
      % endif
      % if attend_court['in_person'] == False and attend_court['remote'] == False:
        * I don't know. I will add this to my forms later. 
      % endif
  - Edit: courtroom
    button: |
      **Courtroom:**
      % if courtroom != "":
      ${ courtroom }
      % else:
      None entered
      % endif
  - Edit: remote_website
    button: |
      **Video conference website (URL):**
      % if remote_website != "":
      ${ remote_website }
      % else:
      None entered
      % endif
    show if: attend_court['remote'] == True
  - Edit: remote_login
    button: |
      **Video conference log-in information:**
      % if remote_login != "":
      ${ remote_login }
      % else:
      None entered
      % endif
    show if: attend_court['remote'] == True
  - Edit: remote_phone
    button: |
      **Call-in phone number for remote appearance:**
      % if remote_phone != "":
      ${ phone_number_formatted(remote_phone) }
      % else:
      None entered
      % endif
    show if: attend_court['remote'] == True      
      
  - Edit: e_signature
    button: |
      **Do you want to add your e-signature to your forms?**
      ${ word(yesno(e_signature)) }

---
id: other cases revisit review screen
continue button field: other_cases.revisit
section: Child's parents, caregivers, and relatives
question: |
  Edit the other court cases with ${child.name_full()} or their parents
subquestion: |
  ${ other_cases.table }

  % if other_cases.number_gathered() < 8:
  ${ other_cases.add_action() }
  % endif
---
table: other_cases.table
rows: other_cases
columns:
  - Case number: |
      row_item.name.text if defined("row_item.name.text") else ""
  - Location: |
      country_name(row_item.non_us_country) if not row_item.in_us else state_name(row_item.state) if not row_item.state == "IL" else row_item.county + " County, Illinois"
edit:
  - name.text
delete buttons: True
confirm: True
---
id: caregivers revisit review screen
continue button field: caregivers.revisit
section: Child's parents, caregivers, and relatives
question: |
  Edit the adult caregivers that live with ${child.name_full()}
subquestion: |  
  ${ caregivers.table }

  % if caregivers.number_gathered() < (4 - number_parents_live_with_child() ):
  ${ caregivers.add_action() }
  % endif
---
table: caregivers.table
rows: caregivers
columns:
  - Name: |
      row_item.name_full() if defined("row_item.name.first") else ""
  - Relationship to ${child.name_full()}: |
      row_item.relationship if defined("row_item.relationship") else ""
edit:
  - review_caregiver_details
delete buttons: True
confirm: True
---
id: caregiver details review screen
continue button field: x.review_caregiver_details
section: Child's parents, caregivers, and relatives
generic object: ALIndividual
question: |
  Edit ${ x.name_full() }'s information
review: 
  - Edit: x.name.first
    button: |
      **Name:**
      ${ x.name_full()  }
  - Edit: x.relationship
    button: |
      **Relationship to ${child.name_full()}:**
      ${ x.relationship }
  - Edit: x.is_family
    button: |
      **Related to to ${child.name_full()} through blood or marriage?**
      ${word(yesno(x.is_family))}
  - Edit: x.is_stg
    button: |
      **Is ${ x.name_full()  } the short-term guardian of ${child.name_full()}?**
      ${word(yesno(x.is_stg))}
  - Edit: x.notice_relationship
    button: |
      **For notice purposes, ${x.name_full()} is:**

      % if x.notice_relationship == "sibling": 
      ${ child.name_full()}'s sibling who is at least 18 years old
      % elif x.notice_relationship == "custody":    
      Some other adult, not ${ child.name_full()}'s parent or sibling, who has had legal or physical custody of ${ child.name_full()}
      % else:
      Other: ${ x.other_notice_relationship }
      % endif
  - Edit: x.agrees
    button: |
      **Does ${x.name_full()} agree to the guardianship of ${ child.name_full()}?**
      % if x.agrees == None:
      I don't know.
      % else:
      ${word(yesno(x.agrees))}
      % endif
  - Edit: x.knows_delivery_method
    button: |
      **Do you know how and when you will send your forms to ${x.name_full()}?**
      ${ word(yesno(x.knows_delivery_method)) }
  - Edit: x.hand_delivery
    button: |
      **Delivery by: (Edit to view and change details)**
      
      % if x.hand_delivery == True:
        * Hand delivery
      % endif
      % if x.mail_delivery == True:
        * US mail or delivery company
      % endif
      % if x.jail_delivery == True:
        * Mail from prison or jail
      % endif
      % if x.hand_delivery != True and x.mail_delivery != True and x.jail_delivery != True:
        * None entered
      % endif
    show if: x.knows_delivery_method
  - Edit: x.delivery_date
    button: |
      **Delivery on:**
      % if x.knows_delivery_date == True and x.knows_delivery_time == True:
      ${ x.delivery_date } at ${ format_time(x.delivery_time, "h:mm a") }
      % elif x.knows_delivery_date: 
      ${ x.delivery_date }, time not entered.
      % elif x.knows_delivery_time:
      Date not entered, ${ format_time(x.delivery_time, "h:mm a") }.
      % else:
      Incomplete date and time entered.
      % endif
    show if: x.knows_delivery_method

---
id: parents revisit review screen
continue button field: parents.revisit
section: Child's parents, caregivers, and relatives
question: |
  Edit ${child.name_full()}'s parents 
subquestion: |  
  ${ parents.table }

  % if parents.number() == 1:
  ${ parents.add_action() }
  % endif
---
id: adult relatives revisit review screen
continue button field: adult_relatives.revisit
section: Child's parents, caregivers, and relatives
question: |
  Edit ${child.name_full()}'s adult relatives 
subquestion: |  
  ${ adult_relatives.table }

  % if adult_relatives.number_gathered() < (10 - number_parents_live_with_child() - number_caregivers_family_or_stg()):
  ${ adult_relatives.add_action() }
  % endif
---
table: adult_relatives.table
rows: adult_relatives
columns:
  - Name: |
      row_item.name_full() if defined("row_item.name.first") else ""
  - Relationship to ${child.name_full()}: |
      row_item.relationship if defined("row_item.relationship") else ""
edit:
  - review_adult_relative_details
delete buttons: True
confirm: True
---
id: adult relative details review screen
continue button field: x.review_adult_relative_details
section: Child's parents, caregivers, and relatives
generic object: ALIndividual
question: |
  Edit ${ x.name_full() }'s information
review: 
  - Edit: x.name.first
    button: |
      **Name:**
      ${ x.name_full()  }
  - Edit: x.relationship
    button: |
      **Relationship to ${child.name_full()}:**
      ${ x.relationship }
  - Edit: x.notice_relationship
    button: |
      **For notice purposes, ${x.name_full()} is:**

      % if x.notice_relationship == "sibling": 
      ${ child.name_full()}'s sibling who is at least 18 years old
      % elif x.notice_relationship == "custody":    
      Some other adult, not ${ child.name_full()}'s parent or sibling, who has had legal or physical custody of ${ child.name_full()}
      % else:
      Other: ${ x.other_notice_relationship }
      % endif      
  - Edit: x.address.known
    button: |
      **Current address:**
      % if not x.address.known:
      Unknown
      % else:
      ${ x.address.on_one_line(bare=True) }
      % endif
  - Edit: x.agrees
    button: |
      **Does ${x.name_full()} agree to the guardianship of ${ child.name_full()}?**
      % if x.agrees == None:
      I don't know.
      % else:
      ${word(yesno(x.agrees))}
      % endif
  - Edit: x.knows_delivery_method
    button: |
      **Do you know how and when you will send your forms to ${x.name_full()}?**
      ${ word(yesno(x.knows_delivery_method)) }
  - Edit: x.hand_delivery
    button: |
      **Delivery by: (Edit to view and change details)**
      
      % if x.hand_delivery == True:
        * Hand delivery
      % endif
      % if x.mail_delivery == True:
        * US mail or delivery company
      % endif
      % if x.jail_delivery == True:
        * Mail from prison or jail
      % endif
      % if x.hand_delivery != True and x.mail_delivery != True and x.jail_delivery != True:
        * None entered
      % endif
    show if: x.knows_delivery_method
  - Edit: x.delivery_date
    button: |
      **Delivery on:**
      % if x.knows_delivery_date == True and x.knows_delivery_time == True:
      ${ x.delivery_date } at ${ format_time(x.delivery_time, "h:mm a") }
      % elif x.knows_delivery_date: 
      ${ x.delivery_date }, time not entered.
      % elif x.knows_delivery_time:
      Date not entered, ${ format_time(x.delivery_time, "h:mm a") }.
      % else:
      Incomplete date and time entered.
      % endif
    show if: x.knows_delivery_method

---
id: convictions revisit review screen
continue button field: users[i].felony_convictions.revisit
section: Guardian
question: |
  % if i==0:
  Edit your felony convictions
  % else:
  Edit ${ users[1].name_full() }'s felony convictions
  % endif
subquestion: |
  ${ users[i].felony_convictions.table }

  % if users[i].felony_convictions.number_gathered() < 3:
  ${ users[i].felony_convictions.add_action() }
  % endif
---
table: users[i].felony_convictions.table
rows: users[i].felony_convictions
columns:
  - Date: |
      row_item.date if defined("row_item.date") else ""
  - Charge: |
      row_item.name.text if defined("row_item.name.text") else ""
edit:
  - date
delete buttons: True
confirm: True
---
id: child review screen
section: Child
event: section_child
question: |
  Child information
subquestion: |
  Edit your answers below.
review:
  - Edit: child.name.first
    button: |
      **Child's name:**
      ${ child.name_full()  }
  - Edit: child.birthdate
    button: |
      **${ child.name_full() }'s birthdate:**
      ${ child.birthdate }
  - Edit: child.address.address
    button: |
      **${ child.name_full() }'s current address:**[NEWLINE]
      ${ child.address.on_one_line(bare=True) }
  - Edit: previous_standby
    button: |
      **Has a judge appointed a standby guardian for ${child.name_full()}?**
      ${ word(yesno(previous_standby)) }
  - Edit: current_stg
    button: |
      **Is there a short-term guardian for ${child.name_full()}?**
      ${ word(yesno(current_stg)) }
  - Edit: named_in_will
    button: |
      **Were you named as ${child.name_full()}'s guardian in their parent's will or in another document?**
      ${ word(yesno(named_in_will)) }
  - Edit: immigration_separation
    button: |
      **Have Immigration officers separated ${child.name_full()} from their parents?**
      ${ word(yesno(immigration_separation)) }
  - Edit: guardianship_type
    button: |
      **What kind of guardianship of ${child.name_full()} are you asking for?**[NEWLINE]
      % if guardianship_type == "person":
      Person only
      % elif guardianship_type == "estate":
      Estate (property) only
      % else:
      Both person and estate (property)
      % endif
  - Edit: child_estate
    button: |
      **What is the current value of ${child.name_full()}'s estate?**[NEWLINE]
      % if child_estate == "unknown":
      I don't know.
      % elif child_estate == "zero":
      $0 - ${child.name_full()} has no property, assets or saved money.
      % else:
      $${thousands(estate_value, show_decimals=True)}
      % endif
  - Edit: child_income
    button: |
      **What is the ${child.name_full()}'s annual income, including Social Security, SSI, and other public benefits?**[NEWLINE]
      % if child_income == "unknown":
      I don't know.
      % elif child_income == "zero":
      $0 - ${child.name_full()} has no annual income.
      % else:
      $${thousands(income_value, show_decimals=True)}
      % endif
---
id: family review screen
section: Child's parents, caregivers, and relatives
event: section_family
question: |
  Information about ${child.name_full()}'s parents, caregivers, and relatives
subquestion: |
  Edit your answers below.
review:
  - Edit: has_legal_parent
    button: |
      **Does ${child.name_full()} have at least one legal parent?**
      ${ word(yesno(has_legal_parent)) }

  - Edit: parents[0].name.first
    button: |
      **Parent name:**
      ${ parents[0].name_full() }
    show if: has_legal_parent
  - Edit: parents[0].address.known
    button: |
      **Do you know ${ parents[0].name_full() }'s current address?**
      ${word(yesno(parents[0].address.known))}
    show if: has_legal_parent
  - Edit: parents[0].address.known
    button: |
      **Does ${ parents[0].name_full() } live at same address as ${child.name_full()}?**
      ${word(yesno(parents[0].lives_with_child))}
    show if: has_legal_parent and parents[0].address.known
  - Edit: parents[0].address.address
    button: |
      **${ parents[0].name_full() }'s current address:**
      ${parents[0].address.on_one_line(bare=True)}
    show if: has_legal_parent and parents[0].address.known
  - Edit: parents[0].agrees
    button: |
      **Information about ${ parents[0].name_full() }:**
      
      % if parents[0].agrees:
      * ${parents[0].name_full()} agrees to the guardianship.
      % endif
      % if parents[0].is_dead:
      * ${parents[0].name_full()} died on ${ parents[0].decease_date }.
      % endif
      % if parents[0].gave_up_custody:
      * ${parents[0].name_full()} voluntarily gave up custody of ${child.name_full()}.
      % endif
      % if parents[0].not_found:
      * ${parents[0].name_full()} cannot be found. Last contact was on ${parents[0].last_contact_date} at ${parents[0].last_contact_location}.
      % endif
      % if parents[0].unable:
      * ${parents[0].name_full()} is unable or unwilling to take care of ${child.name_full()}.
      % endif
    show if: has_legal_parent
  - Edit: parents[0].knows_delivery_method
    button: |
      **Do you know how and when you will send your forms to ${parents[0].name_full()}?**
      ${ word(yesno(parents[0].knows_delivery_method)) }
    show if: has_legal_parent and not parents[0].is_dead and not parents[0].not_found
  - Edit: parents[0].hand_delivery
    button: |
      **Delivery to ${ parents[0].name_full() } by: (Edit to view and change details)**
      
      % if parents[0].hand_delivery == True:
        * Hand delivery
      % endif
      % if parents[0].mail_delivery == True:
        * US mail or delivery company
      % endif
      % if parents[0].jail_delivery == True:
        * Mail from prison or jail
      % endif
      % if parents[0].hand_delivery != True and parents[0].mail_delivery != True and parents[0].jail_delivery != True:
        * None entered
      % endif
    show if: has_legal_parent and not parents[0].is_dead and not parents[0].not_found and parents[0].knows_delivery_method
  - Edit: parents[0].delivery_date
    button: |
      **Delivery to ${ parents[0].name_full() } on:**
      % if parents[0].knows_delivery_date == True and parents[0].knows_delivery_time == True:
      ${ parents[0].delivery_date } at ${ format_time(parents[0].delivery_time, "h:mm a") }
      % elif parents[0].knows_delivery_date: 
      ${ parents[0].delivery_date }, time not entered.
      % elif parents[0].knows_delivery_time:
      Date not entered, ${ format_time(parents[0].delivery_time, "h:mm a") }.
      % else:
      Incomplete date and time entered.
      % endif
    show if: has_legal_parent and not parents[0].is_dead and not parents[0].not_found and parents[0].knows_delivery_method

  - Edit: has_second_parent
    button: |
      **Does ${child.name_full()} have a second legal parent?**
      ${ word(yesno(has_second_parent)) }  

  - Edit: parents[1].name.first
    button: |
      **Second parent name:**
      ${ parents[1].name_full() }
    show if: has_legal_parent and has_second_parent
  - Edit: parents[1].address.known
    button: |
      **${ parents[1].name_full() }'s current address:**
      % if not parents[1].address.known:
      Unknown
      % elif parents[1].lives_with_child:
      ${ child.address.on_one_line(bare=True) }
      % else:
      ${ parents[1].address.on_one_line(bare=True) }
      % endif
    show if: has_legal_parent and has_second_parent
  - Edit: parents[1].agrees
    button: |
      **Information about ${ parents[1].name_full() }:**
      
      % if parents[1].agrees:
      * ${parents[1].name_full()} agrees to the guardianship.
      % endif
      % if parents[1].is_dead:
      * ${parents[1].name_full()} died on ${ parents[1].decease_date }.
      % endif
      % if parents[1].gave_up_custody:
      * ${parents[1].name_full()} voluntarily gave up custody of ${child.name_full()}.
      % endif
      % if parents[1].not_found:
      * ${parents[1].name_full()} cannot be found. Last contact was on ${parents[1].last_contact_date} at ${parents[1].last_contact_location}.
      % endif
      % if parents[1].unable:
      * ${parents[1].name_full()} is unable or unwilling to take care of ${child.name_full()}.
      % endif
    show if: has_legal_parent and has_second_parent
  - Edit: parents[1].knows_delivery_method
    button: |
      **Do you know how and when you will send your forms to ${parents[1].name_full()}?**
      ${ word(yesno(parents[1].knows_delivery_method)) }
    show if: has_legal_parent and has_second_parent and not parents[1].is_dead and not parents[1].not_found
  - Edit: parents[1].hand_delivery
    button: |
      **Delivery to ${ parents[1].name_full() } by: (Edit to view and change details)**
      
      % if parents[1].hand_delivery == True:
        * Hand delivery
      % endif
      % if parents[1].mail_delivery == True:
        * US mail or delivery company
      % endif
      % if parents[1].jail_delivery == True:
        * Mail from prison or jail
      % endif
      % if parents[1].hand_delivery != True and parents[1].mail_delivery != True and parents[1].jail_delivery != True:
        * None entered
      % endif
    show if: has_legal_parent and has_second_parent and not parents[1].is_dead and not parents[1].not_found and parents[1].knows_delivery_method
  - Edit: parents[1].delivery_date
    button: |
      **Delivery to ${ parents[1].name_full() } on:**
      % if parents[1].knows_delivery_date == True and parents[1].knows_delivery_time == True:
      ${ parents[1].delivery_date } at ${ format_time(parents[1].delivery_time, "h:mm a") }
      % elif parents[1].knows_delivery_date: 
      ${ parents[1].delivery_date }, time not entered.
      % elif parents[1].knows_delivery_time:
      Date not entered, ${ format_time(parents[1].delivery_time, "h:mm a") }.
      % else:
      Incomplete date and time entered.
      % endif
    show if: has_legal_parent and has_second_parent and not parents[1].is_dead and not parents[1].not_found and parents[1].knows_delivery_method
      
  - Edit: other_case_involving_parents
    button: |
      **Do you know of any court cases that involve ${child.name_full()} or their parents?**
      ${ word(yesno(other_case_involving_parents)) }
  - Edit: other_cases.revisit
    button: |
      **Other cases with ${child.name_full()} or their parents: (Edit to change details)**

      % for case in other_cases:
      % if case.in_us:
      % if case.state == "IL":
      * ${ case.name.text } in ${ case.county } County, Illinois
      % else:
      * ${ case.name.text } in ${ state_name(case.state) }
      % endif
      % else:
      * ${ case.name.text } in ${ country_name(case.non_us_country) }
      % endif
      % endfor
    show if: other_case_involving_parents
  - Edit: caregivers.there_are_any
    button: |
      **Do any adults live with ${child.name_full()}?**
      ${ word(yesno(caregivers.there_are_any)) }
  - Edit: caregivers.revisit
    button: |
      **Adults that live with ${child.name_full()}: (Edit to change name, relationship, and notice or consent)**

      % for person in caregivers:
      * ${ person.name_full() }, ${ person.relationship }
      % endfor
    show if: caregivers.there_are_any
  - Edit: minor_is_married
    button: |
      **Is ${child.name_full()} married?**
      ${ word(yesno(minor_is_married)) }      
  - Edit: spouse.name.first
    button: |
      **Spouse's name:**
      ${ spouse.name_full()  }
    show if: minor_is_married
  - Edit: spouse.address.known
    button: |
      **${spouse.name_full()}'s current address:**
      % if not spouse.address.known:
      Unknown
      % else:
      ${ spouse.address.on_one_line(bare=True) }
      % endif
    show if: minor_is_married
  - Edit: spouse.agrees
    button: |
      **Does ${spouse.name_full()} agree to the guardianship of ${ child.name_full()}?**
      % if spouse.agrees == None:
      I don't know
      % else:
      ${word(yesno(spouse.agrees))}
      % endif
    show if: minor_is_married
  - Edit: spouse.knows_delivery_method
    button: |
      **Do you know how and when you will send your forms to ${spouse.name_full()}?**
      ${ word(yesno(spouse.knows_delivery_method)) }
    show if: minor_is_married
  - Edit: spouse.hand_delivery
    button: |
      **Delivery by: (Edit to view and change details)**
      
      % if spouse.hand_delivery == True:
        * Hand delivery
      % endif
      % if spouse.mail_delivery == True:
        * US mail or delivery company
      % endif
      % if spouse.jail_delivery == True:
        * Mail from prison or jail
      % endif
      % if spouse.hand_delivery != True and spouse.mail_delivery != True and spouse.jail_delivery != True:
        * None entered
      % endif
    show if: minor_is_married and spouse.knows_delivery_method
  - Edit: spouse.delivery_date
    button: |
      **Delivery on:**
      % if spouse.knows_delivery_date == True and spouse.knows_delivery_time == True:
      ${ spouse.delivery_date } at ${ format_time(spouse.delivery_time, "h:mm a") }
      % elif spouse.knows_delivery_date: 
      ${ spouse.delivery_date }, time not entered.
      % elif spouse.knows_delivery_time:
      Date not entered, ${ format_time(spouse.delivery_time, "h:mm a") }.
      % else:
      Incomplete date and time entered.
      % endif
    show if: minor_is_married and spouse.knows_delivery_method
    
  - Edit: adult_relatives.there_are_any
    button: |
      **Does ${child.name_full()} have any adult relatives?**
      ${ word(yesno(adult_relatives.there_are_any))}
    show if: not minor_is_married
  - Edit: adult_relatives.revisit
    button: |
      **${child.name_full()}'s adult relatives: (Edit to change name, relationship, notice or consent, and address)**

      % for person in adult_relatives:
      * ${ person.name_full() }, ${ person.relationship }
      % endfor
    show if: not minor_is_married and adult_relatives.there_are_any

---
id: guardian review screen
section: Guardian
event: section_guardian
question: |
  Guardian information
subquestion: |
  Edit your answers below.
review:
  - Edit: users[0].name.first
    button: |
      **Your name:**
      ${ users[0].name_full() }
  - Edit: users[0].birthdate
    button: |
      **When were you born?**
      ${ users[0].birthdate }
  - Edit: users[0].is_willing
    button: |
      **Are you willing and able to act as guardian of ${child.name_full()}?**
      ${word(yesno(users[0].is_willing))}
  - Edit: users[0].address.address
    button: |
      **Your address:**[NEWLINE]
      ${ users[0].address.on_one_line(bare=True) }
  - Edit: users[0].job
    button: |
      **What is your current job?**
      ${users[0].job}
  - Edit: users[0].is_disabled
    button: |
      **Has a judge found you disabled and appointed you a Guardian?**
      ${ word(yesno(users[0].is_disabled))}
  - Edit: users[0].found_negligent
    button: |
      **Have you been found to have neglected or abused any minor by DCFS or in court?**
      ${ word(yesno(users[0].found_negligent))}
  - Edit: users[0].has_felony_conviction
    button: |
      **Do you have any felony convictions?**
      ${ word(yesno(users[0].has_felony_conviction)) }
  - Edit: users[0].felony_convictions.revisit
    button: |
      **Your past felony convictions: (Edit to change details)**

      % for conviction in users[0].felony_convictions:
      * Date: ${conviction.date}, Charge: ${ conviction.name.text }
      % endfor
    show if: users[0].has_felony_conviction
  - Edit: users[0].phone_number
    button: |
      **Your phone number:**
      % if users[0].phone_number == "":
      None entered
      % else:
      ${ phone_number_formatted(users[0].phone_number) }
      % endif
  - Edit: users[0].has_email_address
    button: |
      **Do you have an email address?**
      ${ word(yesno(users[0].has_email_address)) }
  - Edit: users[0].email
    button: |
      **Your email:**
      ${ users[0].email }
    show if: users[0].has_email_address
  - Edit: e_signature
    button: |
      **Do you want to add your e-signature to your forms?**
      ${ word(yesno(e_signature)) }
  - Edit: add_co_guardian
    button: |
      **Do you want someone to be a co-guardian of ${child.name_full()} with you?**
      ${word(yesno(add_co_guardian))}
  - Edit: users[1].name.first
    button: |
      **Co-guardian's name:**
      ${ users[1].name_full() }
    show if: add_co_guardian
  - Edit: users[1].birthdate
    button: |
      **When was ${ users[1].name_full() } born?**
      ${ users[1].birthdate }
    show if: add_co_guardian
  - Edit: users[1].is_willing
    button: |
      **Is ${ users[1].name_full() } willing and able to act as guardian of ${child.name_full()}?**
      ${word(yesno(users[1].is_willing))}
    show if: add_co_guardian
  - Edit: users[1].address.address
    button: |
      **${ users[1].name_full() }'s address:**[NEWLINE]
      ${ users[1].address.on_one_line(bare=True) }
    show if: add_co_guardian and valid_co  
  - Edit: users[1].job
    button: |
      **What is ${ users[1].name_full() }'s current job?**
      ${users[1].job}
    show if: add_co_guardian and valid_co
  - Edit: users[1].is_disabled
    button: |
      **Has a judge found ${ users[1].name_full() } disabled and appointed them a Guardian?**
      ${ word(yesno(users[1].is_disabled))}
    show if: add_co_guardian and valid_co
  - Edit: users[1].found_negligent
    button: |
      **Has ${ users[1].name_full() } been found to have neglected or abused any minor by DCFS or in court?**
      ${ word(yesno(users[1].found_negligent))}
    show if: add_co_guardian and valid_co
  - Edit: users[1].has_felony_conviction
    button: |
      **Does ${ users[1].name_full() } have any felony convictions?**
      ${ word(yesno(users[1].has_felony_conviction)) }
    show if: add_co_guardian and valid_co
  - Edit: users[1].felony_convictions.revisit
    button: |
      **${ users[1].name_full() }'s past felony convictions: (Edit to change details)**

      % for conviction in users[1].felony_convictions:
      * Date: ${conviction.date}, Charge: ${ conviction.name.text }
      % endfor
    show if: add_co_guardian and valid_co and users[1].has_felony_conviction
  - Edit: users[1].phone_number
    button: |
      **${ users[1].name_full() }'s phone number:**
      % if users[1].phone_number == "":
      None entered
      % else:
      ${ phone_number_formatted(users[1].phone_number) }
      % endif
    show if: add_co_guardian and valid_co
  - Edit: users[1].has_email_address
    button: |
      **Does ${ users[1].name_full() }'s have an email address?**
      ${ word(yesno(users[1].has_email_address)) }
    show if: add_co_guardian and valid_co
  - Edit: users[1].email
    button: |
      **${ users[1].name_full() }'s email:**
      ${ users[1].email }
    show if: add_co_guardian and valid_co and users[1].has_email_address    
  
  - Edit: oath_person_agree
    button: |
      **Do all proposed guardians agree to the terms of guardianship of the person?**
      ${ word(yesno(oath_person_agree)) }    
  - Edit: oath_estate_agree
    button: |
      **Do all proposed guardians agree to the terms of guardianship of the estate?**
      ${ word(yesno(oath_estate_agree)) }

---
id: filing info review screen
section: Court and filing details
event: section_filing
question: |
  Filing details
subquestion: |
  Edit your answers below.
review:
  - Edit: child.agrees
    button: |
      **Does ${child.name_full()} agree to the guardianship?**
      ${word(yesno(child.agrees))}
    show if: child.age_in_years() >= 14

  - Edit: child.knows_delivery_method
    button: |
      **Do you know how and when you will send your forms to ${child.name_full()}?**
      ${ word(yesno(child.knows_delivery_method)) }
    show if: child.age_in_years() >= 14
  - Edit: child.hand_delivery
    button: |
      **Delivery by: (Edit to view and change details)**
      
      % if child.hand_delivery == True:
        * Hand delivery
      % endif
      % if child.mail_delivery == True:
        * US mail or delivery company
      % endif
      % if child.jail_delivery == True:
        * Mail from prison or jail
      % endif
      % if child.hand_delivery != True and child.mail_delivery != True and child.jail_delivery != True:
        * None entered
      % endif
    show if: child.age_in_years() >= 14 and child.knows_delivery_method
  - Edit: child.delivery_date
    button: |
      **Delivery on:**
      % if child.knows_delivery_date == True and child.knows_delivery_time == True:
      ${ child.delivery_date } at ${ format_time(child.delivery_time, "h:mm a") }
      % elif child.knows_delivery_date: 
      ${ child.delivery_date }, time not entered.
      % elif child.knows_delivery_time:
      Date not entered, ${ format_time(child.delivery_time, "h:mm a") }.
      % else:
      Incomplete date and time entered.
      % endif
    show if: child.age_in_years() >= 14 and child.knows_delivery_method
    
  - Edit: 
      - trial_court_index
      - recompute:
        - trial_court
    button: |
      **County where you will file the petition:**
      ${ trial_court.address.county }
  - Edit: cook_district
    button: |
      **Cook County courthouse:**
      % if cook_district == "15":
      ${ "Daley Center, 50 W. Washington Street, Chicago" }
      % elif cook_district == "16":
      ${ "Second Municipal District, 5600 Old Orchard Road, Skokie" }
      % elif cook_district == "17":
      ${ "Third Municipal District, 2121 Euclid Avenue, Rolling Meadows" }
      % elif cook_district == "18":
      ${ "Fourth Municipal District, 1500 Maybrook Drive, Maywood" }
      % elif cook_district == "19":
      ${ "Fifth Municipal District, 10220 S. 76th Avenue, Bridgeview" }
      % elif cook_district == "20":
      ${ "Sixth Municipal District, 16501 South Kedzie Parkway, Markham" }
      % endif      
    show if: trial_court_index == -1  
      
  - Edit: has_court_date
    button: |
      **Do you already have a court date scheduled for your Guardianship hearing?**
      ${ word(yesno(has_court_date)) }
  - Edit: hearing_date
    button: |
      **Court hearing on:**
      ${ hearing_date } at ${ format_time(hearing_time, "h:mm a") }
    show if: has_court_date
  - Edit: attend_court
    button: |
      **How can parties attend court?**
      
      % if attend_court['in_person'] == True:
        * In person
      % endif
      % if attend_court['remote'] == True:
        * Remotely
      % endif
      % if attend_court['in_person'] == False and attend_court['remote'] == False:
        * I don't know. I will add this to my forms later. 
      % endif
  - Edit: courtroom
    button: |
      **Courtroom:**
      % if courtroom != "":
      ${ courtroom }
      % else:
      None entered
      % endif
  - Edit: remote_website
    button: |
      **Video conference website (URL):**
      % if remote_website != "":
      ${ remote_website }
      % else:
      None entered
      % endif
    show if: attend_court['remote'] == True
  - Edit: remote_login
    button: |
      **Video conference log-in information:**
      % if remote_login != "":
      ${ remote_login }
      % else:
      None entered
      % endif
    show if: attend_court['remote'] == True
  - Edit: remote_phone
    button: |
      **Call-in phone number for remote appearance:**
      % if remote_phone != "":
      ${ phone_number_formatted(remote_phone) }
      % else:
      None entered
      % endif
    show if: attend_court['remote'] == True      
      
  - Edit: e_signature
    button: |
      **Do you want to add your e-signature to your forms?**
      ${ word(yesno(e_signature)) }
